<CsoundSynthesizer>
<CsOptions>
;;; set command line options here
-o smalak.aiff
</CsOptions>
<CsLicence>
</CsLicence>
<CsInstruments>
sr		=		44100
kr		=		4410
ksmps	=		10
nchnls	=		1
0dbfs	=		32768


		instr 109							; P-FIELD FM
a1 		foscil 	p4, p5, p12, p13, p14, p15
		out 		a1
		endin

		instr 2
a1 		oscil 	p4, p5, 20 				; p4 = AMP
		out 		a1 						; p5 = FREQ
		endin

		instr 105
a1 		grain 	1000, 120, 55,  10000,  10,  .05,  1,  3, 1
		out 		a1
		endin

		instr  1
idur    	init   	p3
iamp    	init   	p4
ifqc    	init   	p5
ifqc2   	init   	p6
ax      	init   	p7
ay      	init   	p8
az      	init   	p9
is      	init   	p10
ir      	init   	p11
ib      	init   	p16
ih      	init   	p17
ilfo    	init   	p18
ipantab 	init   	p19
kclkold 	init   	-1
kpan    	oscil  	1, 1/idur, ipantab
kclknew 	oscil  	1, ilfo/p3/2, 3
	if 	(kclkold==kclknew) 	goto next
ax      	=   		p7
ay      	=   		p8
az      	=   		p9
next:
kclkold   =   		kclknew
;kamp    	linseg 	0, .2, iamp, idur-.21, iamp, .01, 0
kamp    	oscil  	1, ilfo/p3, 4
kamp    	=      	kamp*iamp
krez    	oscil  	1, ilfo/p3, 2
krez    	=      	1000; (krez+1)*4000+1000
kfqc    	oscil  	1, ilfo/p3, 2
kfqc    	=      	(kfqc+1)*(ifqc-ifqc2)+ifqc
axnew   	=      	ax+ih*is*(ay-ax)
aynew   	=      	ay+ih*(-ax*az+ir*ax-ay)
aznew   	=      	az+ih*(ax*ay-ib*az)

ax      	=      	axnew
ay      	=      	aynew
az      	=      	aznew

aoutx    	oscil  	1, kfqc*(1+ax), 1
aouty    	oscil  	1, kfqc*(1+ay), 1

;arezx   	reson   	asigx, krez, krez/8
;aoutx   	balance 	arezx, asigx
;arezy   	reson   	asigy, krez, krez/8
;aouty   	balance 	arezy, asigy
		out    	aoutx*kamp*sqrt(kpan)
		endin

		instr 107
a1 		buzz 	10000, 20, 10, 6
		out 		a1
		endin

</CsInstruments>
<CsScore>
; THING
f1 	 0 8192 10    1                           									; SINE
f2 	 0 8192  7   -1  8192 1                   									; RAMP
f3 	 0 8192  7    1  4096 1 0 -1 4096 -1       									; SQUARE
f4 	 0 8192  7    0  7992 1 200 0              									; RAMP
f5 	 0 8192  7    0  1024 1 6968 1 200 0       									; ENVELOPE
f6 	 0   32 10    1    50
f12  0 1024  7    0   512 1 512 0           									; PULSE TABLES
f25  0 1024 -5 5000  1024  100         											; RATE TABLES
f31  0 1024  7    1  1024  0              										; PAN TABLES
f41  0 1024  5  .01   128 1 768 1 128 .01    									; MIX TABLES
f20  0 4096 10   10  2050 1  1.5 -55 -100 20 2.6 -50 60 -4 33 -11
f50  0 1024 -5  .41 50 .021 206 .35 56 .012 200 .28 56 .016 200 .085 56 .02 200 .32	; LOOP TABLES
f60  0 1024  7    1   256 0 256 .5 256 .1 256 1 									; PAN

;--------------------------------------------
;   STA  DUR  AMP   FREQ1 FREQ2  X   Y   Z   S    R                            B      H   LFO  PANTAB

i1  21    4  5000  110   520    .6  .6   .6  16  28    0   0   0   0       2.667   .002   8    60
i1  22    4  5000  240   120    .6  .6   .7  10  27    0   0   0   0       2.657   .004  32    60
i1  23    5  5000  660   348    .6  .6   .6  10  26    0   0   0   0       2.666   .003   4    60

i1  26    6  5000  660   228    .9  .6   .6  10  26    0   0   0   0       2.666   .003   4    60
i1  27    5  5000  660   227    .9  .6   .6  10  26    0   0   0   0       2.666   .003   4    60
i1  28    4  5000  660   220    .9  .6   .6  10  26    0   0   0   0       2.666   .003   4    60

i1  14    6  5000  760   120    .9  .9   .6  10  26    0   0   0   0       2.666   .007   2    60

i109 .5 .2  5000   331        0  0   0   0   0    0          -4   -10  7 1
i109 .6 .2  8000   337        0  0   0   0   0    0          -5    10  6 2
i109 .7 .2  5000   340        0  0   0   0   0    0          -6    10  5 3
i109 .8 .2  8000   345        0  0   0   0   0    0          -7    10  4 1
i109 .9 .2  5000   356        0  0   0   0   0    0          -8   -10  3 2
i109 1   2  8000   446        0  0   0   0   0    0          -13  -10  2 3
i109 1.5 .2  8000  331        0  0   0   0   0    0          -4   -10  7 1
i109 1.6 .2  8000  337        0  0   0   0   0    0          -5   -10  6 2
i109 1.7 .2  8000  340        0  0   0   0   0    0          -6   -10  5 3
i109 1.8 .2  8000  345        0  0   0   0   0    0          -7   -10  4 1
i109 1.9 .2  8000  356        0  0   0   0   0    0          -8    10  3 2
i109 2   2   5000  446        0  0   0   0   0    0          -13   10  2 3
i109 2.5 .2  5000  331        0  0   0   0   0    0          -4   -10  7 1
i109 2.6 .2  8000  337        0  0   0   0   0    0          -5    10  6 2
i109 2.7 .2  8000  340        0  0   0   0   0    0          -6   -10  5 3
i109 2.8 .2  8000  345        0  0   0   0   0    0          -7    10  4 1
i109 2.9 .2  8000  356        0  0   0   0   0    0          -8    10  3 2
i109 3   1   5000  446        0  0   0   0   0    0          -13  -10  2 3

i109 3.5 .2  8000  331        0  0   0   0   0    0          -4   -10  7 1
i109 3.6 .2  5000   337       0  0   0   0   0    0          -5    10  6 2
i109 3.7 .2  8000   340       0  0   0   0   0    0          -6    10  5 3
i109 3.8 .2  5000   345       0  0   0   0   0    0          -7    10  4 1
i109 3.9 .2  8000   356       0  0   0   0   0    0          -8   -10  3 2
i109 4    2  5000   446       0  0   0   0   0    0          -13  -10  2 4
i109 4.5 .2  8000   331       0  0   0   0   0    0          -4   -10  7 1
i109 4.6 .2  3000   337       0  0   0   0   0    0          -5   -10  6 2
i109 4.7 .2  8000   340       0  0   0   0   0    0          -6   -10  5 3
i109 4.8 .2  3000   345       0  0   0   0   0    0          -7   -10  4 1
i109 4.9 .2  8000   356       0  0   0   0   0    0          -8    10  3 2
i109 5    2  8000   446       0  0   0   0   0    0          -13   10  2 4
i109 5.5 .2  8000   331       0  0   0   0   0    0          -4   -10  7 1
i109 5.6 .2  8000   337       0  0   0   0   0    0          -5    10  6 2
i109 5.7 .2  9000   340       0  0   0   0   0    0          -6   -10  5 3
i109 5.8 .2  9000   345       0  0   0   0   0    0          -7    10  4 1
i109 5.9 .2 10000   356       0  0   0   0   0    0          -8    10  3 2

i109 6   14.2   10000  446    0  0   0   0   0    0          -13  -10  2 4

i109 2 .5  10000   57       0  0   0   0   0    0 0           3    14  6
i109 3 .5  10000   57       0  0   0   0   0    0 0           3    14  6
i109 4 .5  10000   57       0  0   0   0   0    0 0           3    14  6
i109 5 .5  10000   57       0  0   0   0   0    0 0           3    14  6

i105 20  5

i2   32   .1  5000  778
i2   32   .1  5000  935.8
i2   33   .1  5000  778
i2   33   .1  5000  935.8
i2   34   .1  5000  778
i2   34   .1  5000  935.8
i2   35   .1  5000  778
i2   35   .1  5000  935.8
i2   36   .1  5000  778
i2   36   .1  5000  935.8
i2   37   6   5000  778
i2   37   6   5000  935.8

i2   40   .5  8000    52
i2   40.5 3   8000    55
i2   41   6   1000   220
i2   43   3   5000   110.8
i2   45   6   5000   670.8
i2   46   6   1000   220
i2   48   6   5000   110.8
i2   49   3   5000    55
i2   49   6   5000   778
i2   55   6  10000   935.8

i109 56   .2  10000   337      0  0   0   0   0    0   0       -5    3   6
i109 56.4 .2  10000   340      0  0   0   0   0    0   0       -6    3   5
i109 56.5 .2  10000   345      0  0   0   0   0    0   0       -7    3   4
i109 56.6 .2  10000   356      0  0   0   0   0    0   0       -8   -3   3
i109 56.9  2   7000   446      0  0   0   0   0    0   0       -13  -3   2
i109 57   .2   1000   331      0  0   0   0   0    0   0       -4   -3   1
i109 57.4 .2  10000   340      0  0   0   0   0    0   0       -6   -3   5
i109 57.5 .2   5000   345      0  0   0   0   0    0   0       -7   -3   4
i109 57.6 .2   5000   356      0  0   0   0   0    0   0       -8    3   3
i109 57.7 1.5 10000   446      0  0   0   0   0    0   0       -13   3   2

i105 60  7

i109 63.6 .2 10000    57       0  0   0   0   0    0          3   14  6  2
i109 64.7 .2  5000   110       0  0   0   0   0    0          4  -14  5  3
i109 65.8 .2  5000   345       0  0   0   0   0    0          5    3  4  3
i109 66.9 .2  5000   356       0  0   0   0   0    0          3   13  3  2
i109 67   3   8000   446       0  0   0   0   0    0         -6   -3  5  3
i109 67.3 .2  5000   337       0  0   0   0   0    0          4   -3  5  2
i109 67.4 12  5000   340       0  0   0   0   0    0          0   -6 -3  5
i109 78.5 1  10000   674.18    0  0   0   0   0    0   0       7   2  5
i109 79   1  10000    90       0  0   0   0   0    0   0       7   2  5
i109 79.5 1  10000   560       0  0   0   0   0    0   0       7   2  5
i109 80.5 1  10000   560       0  0   0   0   0    0   0       7   2  5

i109 81 13  5000   340       0  0   0   0   0    0   0       -6   -3  5

i1  84    .5  5000  660   520    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  86    .5  5000  660   520    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  87    .5  5000  660   520    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60

i1  89    .5  5000  760   420    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  91    .5  5000  760   420    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  92    .5 10000  760   420    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60

i1  84    .5  10000  660   520    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  96    .5  10000  660   520    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  97    .5  10000  760   420    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60

i1  98    .5  12000  660   520    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  99    .5  12000  760   320    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  101   .5  12000  660   520    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  102   .5  12000  760   320    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  103   .5  12000  760   820    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60
i1  103    7  12000  760   420    .6  .6  .6  16   28    0   0   0   0          2.667  .002  8      60


i1  103     6    12000  760   120    .9  .9   .6  10  26          0   0   0   0    2.666   .007 2      60
i1  104     7    10000  760   120    .9  .9   .6  10  26          0   0   0   0    2.666   .007 2      60
i1  105     8.2  10000   70   120    .9  .9   .6  10  26          0   0   0   0    2.666   .007 2      60
i1  105.55  5.23  8000  720   520    .9  .9   .6  10  26          0   0   0   0    2.666   .007 2      60


i107 105     3
i107 105.45 .2
i107 105.65 .2
i107 105.85 .2


i109 110 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 111 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 112 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 113 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 114 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 115 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 116 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 117 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 118 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 119 .6  10000   57       0  0   0   0   0    0   0       3   14   6
i109 120 .6  10000   57       0  0   0   0   0    0   0       3   14   6
e

</CsScore>
</CsoundSynthesizer>

