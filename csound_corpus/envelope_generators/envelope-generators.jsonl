{"instruction": "Write a CSound instrument that demonstrates envelope generators", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSine ftgen 1, 0, 16384, 10, 1\n\ninstr 1\n    ; linen opcode: kres linen kamp, irise, idur, idec\n    ; linen generates linear envelope\n    ; kamp - peak amplitude\n    ; irise - rise time\n    ; idur - total duration\n    ; idec - decay time\n    \n    iFreq = p4\n    iRise = 0.1\n    iDec = 0.2\n    \n    kEnv linen 0.5, iRise, p3, iDec\n    \n    aOsc poscil kEnv, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\ninstr 2\n    ; linenr opcode: kres linenr kamp, irise, idec, iatdec\n    ; linenr is like linen but can be released\n    ; iatdec - decay time after release\n    \n    iFreq = p4\n    iRise = 0.05\n    iDec = 0.15\n    iRelDec = 0.3\n    \n    kEnv linenr 0.5, iRise, iDec, iRelDec\n    \n    aOsc poscil kEnv, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\ninstr 3\n    ; adsr opcode: kres adsr iatt, idec, islev, irel\n    ; adsr generates Attack-Decay-Sustain-Release envelope\n    ; iatt - attack time\n    ; idec - decay time\n    ; islev - sustain level (0-1)\n    ; irel - release time\n    \n    iFreq = p4\n    iAtt = 0.05\n    iDec = 0.1\n    iSus = 0.7\n    iRel = 0.2\n    \n    kEnv adsr iAtt, iDec, iSus, iRel\n    \n    aOsc poscil kEnv*0.5, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\ninstr 4\n    ; madsr opcode: kres madsr iatt, idec, islev, irel\n    ; madsr is MIDI-aware ADSR\n    ; Similar to adsr but responds to MIDI note-off\n    \n    iFreq = p4\n    iAtt = 0.02\n    iDec = 0.15\n    iSus = 0.6\n    iRel = 0.3\n    \n    kEnv madsr iAtt, iDec, iSus, iRel\n    \n    aOsc poscil kEnv*0.5, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\ninstr 5\n    ; mxadsr opcode: kres mxadsr iatt, idec, islev, irel, idel, iatt2, isus2, irel2\n    ; mxadsr is extended ADSR with additional stages\n    ; idel - delay before attack\n    ; iatt2 - secondary attack\n    ; isus2 - secondary sustain level\n    ; irel2 - secondary release\n    \n    iFreq = p4\n    iDel = 0\n    iAtt = 0.05\n    iDec = 0.1\n    iSus = 0.7\n    iRel = 0.2\n    iAtt2 = 0.03\n    iSus2 = 0.8\n    iRel2 = 0.15\n    \n    kEnv mxadsr iAtt, iDec, iSus, iRel, iDel, iAtt2, iSus2, iRel2\n    \n    aOsc poscil kEnv*0.5, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\ninstr 6\n    ; expseg opcode: kres expseg ia, idur1, ib [, idur2, ic] [...]\n    ; expseg generates exponential line segments\n    ; ia, ib, ic - values (must be non-zero)\n    ; idur1, idur2 - durations\n    \n    iFreq = p4\n    \n    ; Exponential envelope\n    kEnv expseg 0.01, 0.05, 1, p3-0.25, 0.5, 0.2, 0.01\n    \n    aOsc poscil kEnv*0.5, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\ninstr 7\n    ; linseg opcode: kres linseg ia, idur1, ib [, idur2, ic] [...]\n    ; linseg generates linear line segments\n    ; ia, ib, ic - values\n    ; idur1, idur2 - durations\n    \n    iFreq = p4\n    \n    ; Linear envelope\n    kEnv linseg 0, 0.1, 1, p3-0.3, 0.8, 0.2, 0\n    \n    aOsc poscil kEnv*0.5, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play linen\ni1 0 2 440\n\n; Play linenr\ni2 3 2 523\n\n; Play adsr\ni3 6 2 330\ni3 8 2 392\n\n; Play madsr\ni4 11 2 294\n\n; Play mxadsr\ni5 14 2 440\n\n; Play expseg\ni6 17 2 523\n\n; Play linseg\ni7 20 2 392\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced envelope techniques", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSine ftgen 1, 0, 16384, 10, 1\ngiSaw ftgen 2, 0, 16384, 10, 1, 0.5, 0.3, 0.25, 0.2\n\ninstr 1\n    ; Multiple parameter envelopes\n    iBaseFreq = p4\n    \n    ; Amplitude envelope\n    kAmpEnv madsr 0.01, 0.1, 0.7, 0.3\n    \n    ; Filter envelope\n    kFiltEnv expseg 0.01, 0.05, 1, 0.2, 0.3, p3-0.25, 0.1\n    kCutoff = 500 + kFiltEnv * 4000\n    \n    ; Pitch envelope\n    kPitchEnv linseg 0, 0.02, 20, 0.05, 0, p3-0.07, 0\n    kFreq = iBaseFreq + kPitchEnv\n    \n    aOsc poscil kAmpEnv*0.5, kFreq, giSaw\n    aFilt butterlp aOsc, kCutoff\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; Complex multi-stage envelope\n    iFreq = p4\n    \n    ; 5-stage amplitude envelope\n    kEnv linseg 0, 0.01, 0.3, 0.05, 1, 0.1, 0.7, p3-0.36, 0.6, 0.2, 0\n    \n    aOsc poscil kEnv*0.5, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\ninstr 3\n    ; Looping envelope (for rhythmic effects)\n    iFreq = p4\n    \n    ; Base amplitude\n    kBaseEnv madsr 0.01, 0.1, 0.8, 0.2\n    \n    ; Rhythmic modulation\n    kMod lfo 0.4, 4, 2\n    kMod = 0.6 + kMod\n    \n    kFinalEnv = kBaseEnv * kMod\n    \n    aOsc poscil kFinalEnv*0.5, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play multi-parameter envelopes\ni1 0 2 330\ni1 2 2 440\n\n; Play complex multi-stage\ni2 5 3 294\n\n; Play looping envelope\ni3 9 4 523\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
