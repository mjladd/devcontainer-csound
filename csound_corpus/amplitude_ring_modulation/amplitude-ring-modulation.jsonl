{"instruction": "Write a CSound instrument that demonstrates ring modulation", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSine ftgen 1, 0, 16384, 10, 1\ngiSaw ftgen 2, 0, 16384, 10, 1, 0.5, 0.3, 0.25, 0.2\n\ninstr 1\n    ; Basic ring modulation (simple multiplication)\n    ; Ring modulation creates sum and difference frequencies\n    \n    iAmp = 0.4\n    iCarrier = p4\n    iModulator = p5\n    \n    ; Carrier signal\n    aCarrier poscil 1, iCarrier, giSine\n    \n    ; Modulator signal\n    aModulator poscil 1, iModulator, giSine\n    \n    ; Ring modulation (multiplication)\n    aRing = aCarrier * aModulator * iAmp\n    \n    outs aRing, aRing\nendin\n\ninstr 2\n    ; Ring modulation with complex waveforms\n    iAmp = 0.35\n    iCarrier = p4\n    iModulator = p5\n    \n    ; Carrier (sawtooth)\n    aCarrier poscil 1, iCarrier, giSaw\n    \n    ; Modulator (sine)\n    aModulator poscil 1, iModulator, giSine\n    \n    ; Ring mod\n    aRing = aCarrier * aModulator * iAmp\n    \n    outs aRing, aRing\nendin\n\ninstr 3\n    ; Variable modulation depth\n    iAmp = 0.4\n    iCarrier = p4\n    iModulator = p5\n    \n    aCarrier poscil 1, iCarrier, giSine\n    aModulator poscil 1, iModulator, giSine\n    \n    ; Depth control (0 to 1)\n    kDepth linseg 0, p3*0.3, 1, p3*0.7, 0\n    \n    ; Mix dry and ring modulated\n    aRing = aCarrier * (1 - kDepth) + (aCarrier * aModulator * kDepth)\n    \n    outs aRing*iAmp, aRing*iAmp\nendin\n\ninstr 4\n    ; Time-varying modulator frequency\n    iAmp = 0.4\n    iCarrier = p4\n    \n    aCarrier poscil 1, iCarrier, giSine\n    \n    ; Sweeping modulator\n    kModFreq expseg 50, p3, 500\n    aModulator poscil 1, kModFreq, giSine\n    \n    aRing = aCarrier * aModulator * iAmp\n    \n    outs aRing, aRing\nendin\n\ninstr 5\n    ; ampmidid opcode: iout ampmidid iscal, ifn\n    ; ampmidid converts MIDI velocity to amplitude with dynamic scaling\n    ; iscal - scaling factor\n    ; ifn - function table for mapping\n    \n    ; Note: This is typically used with MIDI input\n    ; Demonstrating with fixed values\n    \n    iVel = p4  ; MIDI velocity (0-127)\n    iScal = 1\n    iAmp ampmidid iScal, 0\n    \n    iFreq = 440\n    \n    aOsc poscil iAmp*0.5, iFreq, giSine\n    \n    outs aOsc, aOsc\nendin\n\ninstr 6\n    ; Multiple modulator ring mod\n    iAmp = 0.3\n    iCarrier = p4\n    \n    aCarrier poscil 1, iCarrier, giSine\n    \n    ; Two modulators\n    aMod1 poscil 1, iCarrier*0.5, giSine\n    aMod2 poscil 1, iCarrier*1.5, giSine\n    \n    ; Ring mod with both\n    aRing1 = aCarrier * aMod1\n    aRing2 = aCarrier * aMod2\n    \n    aMix = (aRing1 + aRing2) * iAmp * 0.5\n    \n    outs aMix, aMix\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic ring mod\n; Format: start dur carrier modulator\ni1 0 2 440 100\ni1 2.5 2 440 300\n\n; Play complex waveforms\ni2 5.5 2 330 150\n\n; Play variable depth\ni3 8.5 3 523 200\n\n; Play sweeping modulator\ni4 12.5 4 392\n\n; Play with MIDI velocity\ni5 17.5 2 80\ni5 19.5 2 100\ni5 21.5 2 120\n\n; Play multiple modulators\ni6 24.5 3 294\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
