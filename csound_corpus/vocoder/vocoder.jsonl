{"instruction": "Write a CSound instrument that demonstrates the vocoder opcode", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSine ftgen 1, 0, 16384, 10, 1\ngiSaw ftgen 2, 0, 16384, 10, 1, 0.5, 0.3, 0.25, 0.2, 0.16\n\ninstr 1\n    ; vocoder opcode: ares vocoder asource, aexcite, kbwratio, kfratio [, isize] [, ioverlap] [, iwin] [, itype]\n    ; vocoder performs channel vocoding\n    ; asource - source signal (modulator)\n    ; aexcite - excitation signal (carrier)\n    ; kbwratio - bandwidth ratio\n    ; kfratio - frequency ratio\n    ; isize - FFT size\n    ; ioverlap - overlap size\n    \n    iFreq = p4\n    \n    ; Source signal (modulator) - complex tone\n    aSource poscil 0.5, iFreq, giSaw\n    \n    ; Excitation signal (carrier) - rich harmonic content\n    aExcite poscil 0.5, iFreq*2, giSaw\n    \n    ; Vocoder parameters\n    kBWRatio = 0.5\n    kFRatio = 1\n    iSize = 2048\n    iOverlap = 256\n    \n    aVocoded vocoder aSource, aExcite, kBWRatio, kFRatio, iSize, iOverlap\n    \n    outs aVocoded*0.7, aVocoded*0.7\nendin\n\ninstr 2\n    ; Vocoder with noise carrier\n    iFreq = p4\n    \n    ; Source - pitched tone\n    aSource poscil 0.5, iFreq, giSaw\n    \n    ; Carrier - filtered noise\n    aNoise noise 0.5, 0\n    aCarrier butterbp aNoise, 1000, 500\n    \n    kBWRatio = 0.7\n    kFRatio = 1\n    \n    aVocoded vocoder aSource, aCarrier, kBWRatio, kFRatio\n    \n    outs aVocoded*0.7, aVocoded*0.7\nendin\n\ninstr 3\n    ; Dynamic vocoder with morphing\n    iFreq = p4\n    \n    ; Source - evolving tone\n    kSourceFreq linseg iFreq, p3, iFreq*2\n    aSource poscil 0.5, kSourceFreq, giSaw\n    \n    ; Carrier - detuned sawtooth\n    aExcite poscil 0.5, iFreq*1.5, giSaw\n    \n    ; Morphing bandwidth\n    kBWRatio linseg 0.3, p3, 0.9\n    kFRatio = 1\n    \n    aVocoded vocoder aSource, aExcite, kBWRatio, kFRatio\n    \n    outs aVocoded*0.7, aVocoded*0.7\nendin\n\ninstr 4\n    ; Vocoder with frequency shift\n    iFreq = p4\n    \n    ; Source signal\n    aSource poscil 0.5, iFreq, giSaw\n    \n    ; Carrier signal\n    aExcite poscil 0.5, iFreq*1.2, giSaw\n    \n    ; Frequency ratio changes\n    kFRatio linseg 0.8, p3, 1.5\n    kBWRatio = 0.6\n    \n    aVocoded vocoder aSource, aExcite, kBWRatio, kFRatio\n    \n    outs aVocoded*0.7, aVocoded*0.7\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic vocoder\ni1 0 3 220\ni1 3.5 3 330\n\n; Play vocoder with noise\ni2 7.5 3 294\n\n; Play dynamic vocoder\ni3 11.5 4 440\n\n; Play vocoder with frequency shift\ni4 16.5 4 196\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced vocoder techniques", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSine ftgen 1, 0, 16384, 10, 1\ngiSaw ftgen 2, 0, 16384, 10, 1, 0.5, 0.3, 0.25, 0.2, 0.16\n\ninstr 1\n    ; Multi-carrier vocoder\n    iFreq = p4\n    \n    ; Source (modulator)\n    aSource poscil 0.4, iFreq, giSaw\n    \n    ; Multiple carriers\n    aCarrier1 poscil 0.3, iFreq*1.5, giSaw\n    aCarrier2 poscil 0.3, iFreq*2, giSaw\n    aCarrier3 poscil 0.3, iFreq*0.75, giSaw\n    \n    ; Vocode with each carrier\n    kBWRatio = 0.6\n    kFRatio = 1\n    \n    aVoc1 vocoder aSource, aCarrier1, kBWRatio, kFRatio\n    aVoc2 vocoder aSource, aCarrier2, kBWRatio, kFRatio\n    aVoc3 vocoder aSource, aCarrier3, kBWRatio, kFRatio\n    \n    ; Mix\n    aMix = (aVoc1 + aVoc2*0.7 + aVoc3*0.5) * 0.4\n    \n    outs aMix, aMix\nendin\n\ninstr 2\n    ; Vocoder with formant-like source\n    iFreq = p4\n    \n    ; Source with multiple formants\n    aF1 poscil 0.3, iFreq, giSine\n    aF2 poscil 0.2, iFreq*2.5, giSine\n    aF3 poscil 0.15, iFreq*4, giSine\n    aSource = aF1 + aF2 + aF3\n    \n    ; Rich carrier\n    aCarrier poscil 0.5, iFreq*1.5, giSaw\n    \n    kBWRatio = 0.5\n    kFRatio = 1\n    \n    aVocoded vocoder aSource, aCarrier, kBWRatio, kFRatio\n    \n    outs aVocoded*0.6, aVocoded*0.6\nendin\n\ninstr 3\n    ; Stereo vocoder with panning\n    iFreq = p4\n    \n    ; Source\n    aSource poscil 0.5, iFreq, giSaw\n    \n    ; Two carriers with different frequencies\n    aCarrierL poscil 0.5, iFreq*1.3, giSaw\n    aCarrierR poscil 0.5, iFreq*1.7, giSaw\n    \n    kBWRatio = 0.6\n    kFRatio = 1\n    \n    aVocodedL vocoder aSource, aCarrierL, kBWRatio, kFRatio\n    aVocodedR vocoder aSource, aCarrierR, kBWRatio, kFRatio\n    \n    outs aVocodedL*0.7, aVocodedR*0.7\nendin\n\ninstr 4\n    ; Rhythmic vocoder\n    iFreq = p4\n    \n    ; Pulsing source\n    kPulse lfo 0.4, 4, 2\n    kPulse = 0.3 + kPulse\n    aSource poscil kPulse, iFreq, giSaw\n    \n    ; Sustained carrier\n    aCarrier poscil 0.5, iFreq*2, giSaw\n    \n    ; Dynamic parameters\n    kBWRatio lfo 0.3, 0.5, 0\n    kBWRatio = 0.5 + kBWRatio\n    kFRatio = 1\n    \n    aVocoded vocoder aSource, aCarrier, kBWRatio, kFRatio\n    \n    outs aVocoded*0.7, aVocoded*0.7\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play multi-carrier vocoder\ni1 0 4 220\n\n; Play formant vocoder\ni2 5 4 165\n\n; Play stereo vocoder\ni3 10 4 330\n\n; Play rhythmic vocoder\ni4 15 5 294\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
