{"instruction": "Write a CSound instrument that demonstrates the FOF formant synthesis opcode", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSine ftgen 1, 0, 8192, 10, 1\ngiSigmoid ftgen 2, 0, 8192, 19, 0.5, 0.5, 270, 0.5\n\ninstr 1\n    ; fof opcode: ares fof xamp, xfund, xform, koct, kband, kris, kdur, kdec, iolaps, \n    ;                  ifna, ifnb, itotdur [, iphs] [, ifmode] [, iskip]\n    ; fof generates formant waveforms (FOF synthesis)\n    ; xamp - amplitude\n    ; xfund - fundamental frequency\n    ; xform - formant frequency\n    ; koct - octaviation index\n    ; kband - bandwidth\n    ; kris - rise time\n    ; kdur - overall duration\n    ; kdec - decay time\n    ; iolaps - number of overlaps\n    ; ifna, ifnb - function tables for grain shape\n    \n    iAmp = 0.4\n    iFund = p4\n    iForm = p5\n    \n    kOct = 0\n    kBand = 50\n    kRis = 0.003\n    kDur = 0.02\n    kDec = 0.007\n    iOlaps = 100\n    \n    ; Single formant\n    aFof fof iAmp, iFund, iForm, kOct, kBand, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    \n    outs aFof, aFof\nendin\n\ninstr 2\n    ; Multiple formants for vowel synthesis\n    iAmp = 0.25\n    iFund = p4\n    \n    ; Formant frequencies for \"ah\" vowel\n    iForm1 = 800\n    iForm2 = 1200\n    iForm3 = 2600\n    \n    kOct = 0\n    kBand1 = 80\n    kBand2 = 90\n    kBand3 = 120\n    kRis = 0.003\n    kDur = 0.02\n    kDec = 0.007\n    iOlaps = 100\n    \n    ; Three formants\n    aFof1 fof iAmp, iFund, iForm1, kOct, kBand1, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    aFof2 fof iAmp*0.7, iFund, iForm2, kOct, kBand2, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    aFof3 fof iAmp*0.5, iFund, iForm3, kOct, kBand3, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    \n    aMix = aFof1 + aFof2 + aFof3\n    \n    outs aMix, aMix\nendin\n\ninstr 3\n    ; Morphing vowels\n    iAmp = 0.25\n    iFund = p4\n    \n    ; Morph from \"ee\" to \"oo\"\n    ; \"ee\" formants: 270, 2300, 3000\n    ; \"oo\" formants: 300, 870, 2250\n    \n    kForm1 linseg 270, p3, 300\n    kForm2 linseg 2300, p3, 870\n    kForm3 linseg 3000, p3, 2250\n    \n    kOct = 0\n    kBand = 70\n    kRis = 0.003\n    kDur = 0.02\n    kDec = 0.007\n    iOlaps = 100\n    \n    aFof1 fof iAmp, iFund, kForm1, kOct, kBand, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    aFof2 fof iAmp*0.7, iFund, kForm2, kOct, kBand*1.2, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    aFof3 fof iAmp*0.5, iFund, kForm3, kOct, kBand*1.5, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    \n    aMix = aFof1 + aFof2 + aFof3\n    \n    outs aMix, aMix\nendin\n\ninstr 4\n    ; fog opcode: ares fog xamp, xdens, xtrans, aspd, koct, kband, kris, kdur, kdec, \n    ;                  iolaps, ifna, ifnb, itotdur [, iphs] [, itmode] [, iskip]\n    ; fog is similar to fof but for granular textures\n    ; xdens - density (grains per second)\n    ; xtrans - transposition\n    ; aspd - speed (frequency multiplication)\n    \n    ; Note: fog is less common, demonstrating basic fof concepts\n    \n    iAmp = 0.4\n    iFund = p4\n    iForm = 1000\n    \n    kOct = 0\n    kBand = 60\n    kRis = 0.003\n    kDur = 0.02\n    kDec = 0.007\n    iOlaps = 100\n    \n    aFof fof iAmp, iFund, iForm, kOct, kBand, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    \n    outs aFof, aFof\nendin\n\ninstr 5\n    ; voc opcode: (synthesis opcode for voice simulation)\n    ; Note: voc is not a standard Csound opcode\n    ; Demonstrating vocal synthesis with fof\n    \n    iAmp = 0.25\n    iFund = p4\n    \n    ; \"ah\" vowel formants\n    iForm1 = 800\n    iForm2 = 1200\n    iForm3 = 2600\n    iForm4 = 3500\n    \n    kOct = 0\n    kRis = 0.003\n    kDur = 0.02\n    kDec = 0.007\n    iOlaps = 100\n    \n    ; Four formants with different bandwidths\n    aFof1 fof iAmp, iFund, iForm1, kOct, 80, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    aFof2 fof iAmp*0.7, iFund, iForm2, kOct, 90, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    aFof3 fof iAmp*0.5, iFund, iForm3, kOct, 120, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    aFof4 fof iAmp*0.3, iFund, iForm4, kOct, 150, kRis, kDur, kDec, iOlaps, giSine, giSigmoid, p3\n    \n    aMix = aFof1 + aFof2 + aFof3 + aFof4\n    \n    outs aMix, aMix\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play single formant\n; Format: start dur fundamental formant\ni1 0 2 220 800\ni1 2.5 2 220 1200\n\n; Play vowel (ah)\ni2 5.5 3 165\ni2 8.5 3 220\n\n; Play morphing vowels\ni3 12.5 4 196\n\n; Play fog-like\ni4 17.5 3 330\n\n; Play multi-formant vocal\ni5 21.5 3 147\ni5 24.5 3 196\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
