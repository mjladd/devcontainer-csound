{"instruction": "Write a CSound instrument that demonstrates vector processing opcodes: vadd, smult, port, vpow", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; vadd opcode: vadd ifn1, ifn2, ielements [, idstoffset] [, isrcoffset]\n    ; Adds elements of two tables and stores result in first table\n    ; ifn1 - destination table (will be modified)\n    ; ifn2 - source table to add\n    ; ielements - number of elements to process\n    ; idstoffset - offset in destination table (optional)\n    ; isrcoffset - offset in source table (optional)\n    \n    ; Create two tables with different waveforms\n    ifn1 ftgen 1, 0, 1024, 10, 1, 0.5, 0.3, 0.2  ; Harmonic series\n    ifn2 ftgen 2, 0, 1024, 10, 0.5, 0.3, 0.2, 0.1  ; Different harmonic series\n    \n    ; Add the tables together\n    vadd 1, 2, 1024\n    \n    ; Use the combined table for oscillator\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    aOsc oscili kAmp*0.3, 220, 1\n    \n    outs aOsc, aOsc\nendin\n\ninstr 2\n    ; smult opcode: smult ifn, ival, ielements [, idstoffset]\n    ; Multiplies all elements in a table by a scalar value\n    ; ifn - table to modify\n    ; ival - scalar multiplier\n    ; ielements - number of elements to process\n    ; idstoffset - offset in table (optional)\n    \n    ; Create a table\n    ifn ftgen 3, 0, 1024, 10, 1, 0.8, 0.6, 0.4, 0.2\n    \n    ; Scale the table by 0.5\n    smult 3, 0.5, 1024\n    \n    kAmp madsr 0.02, 0.08, 0.6, 0.3\n    aOsc oscili kAmp*0.4, 165, 3\n    \n    outs aOsc, aOsc\nendin\n\ninstr 3\n    ; port opcode: kres port ksig, khtim [, isig]\n    ; Portamento (glissando) on k-rate signals\n    ; ksig - input signal\n    ; khtim - half-time of the function (seconds)\n    ; isig - initial value (optional)\n    \n    ; Target frequency jumps between values\n    kTrig metro 2\n    kTarget randomh 200, 800, 2\n    \n    ; Apply portamento with 0.2 second half-time\n    kFreq port kTarget, 0.2\n    \n    kAmp madsr 0.005, 0.02, 0.9, 0.1\n    aOsc oscili kAmp*0.25, kFreq, -1, 0\n    \n    outs aOsc, aOsc\nendin\n\ninstr 4\n    ; Multiple port operations with different times\n    kTrig metro 1.5\n    kTarget1 randomh 150, 600, 1.5\n    kTarget2 randomh 300, 1200, 1.5\n    \n    ; Fast portamento\n    kFreq1 port kTarget1, 0.05\n    ; Slow portamento\n    kFreq2 port kTarget2, 0.4\n    \n    kAmp madsr 0.01, 0.05, 0.8, 0.2\n    aOsc1 oscili kAmp*0.15, kFreq1, -1, 0\n    aOsc2 oscili kAmp*0.15, kFreq2, -1, 0\n    \n    outs aOsc1, aOsc2\nendin\n\ninstr 5\n    ; vpow opcode: vpow ifn, ipow, ielements [, idstoffset]\n    ; Raises each element of a table to a power\n    ; ifn - table to modify\n    ; ipow - power exponent\n    ; ielements - number of elements to process\n    ; idstoffset - offset in table (optional)\n    \n    ; Create a sine table\n    ifn ftgen 4, 0, 1024, 10, 1\n    \n    ; Raise all values to power of 3 (waveshaping)\n    vpow 4, 3, 1024\n    \n    kAmp madsr 0.015, 0.1, 0.65, 0.25\n    aOsc oscili kAmp*0.35, 330, 4\n    \n    outs aOsc, aOsc\nendin\n\ninstr 6\n    ; Combined vector operations\n    ; Create base table\n    ifn1 ftgen 5, 0, 1024, 10, 1, 0.5, 0.25\n    ifn2 ftgen 6, 0, 1024, 10, 0.3, 0.4, 0.2\n    \n    ; Add tables\n    vadd 5, 6, 1024\n    ; Scale result\n    smult 5, 0.7, 1024\n    ; Apply waveshaping\n    vpow 5, 2, 1024\n    \n    ; Use portamento on frequency\n    kTarget randomi 100, 400, 0.5\n    kFreq port kTarget, 0.15\n    \n    kAmp madsr 0.02, 0.12, 0.7, 0.3\n    aOsc oscili kAmp*0.3, kFreq, 5\n    \n    outs aOsc, aOsc\nendin\n\n</CsInstruments>\n<CsScore>\n\n; vadd - add tables\ni1 0 3\n\n; smult - scale table\ni2 3.5 3\n\n; port - basic portamento\ni3 7 4\n\n; port - multiple portamento\ni4 11.5 4\n\n; vpow - table power operation\ni5 16 3\n\n; Combined operations\ni6 19.5 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
