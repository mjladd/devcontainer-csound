{"instruction": "Write a CSound instrument that demonstrates linear prediction opcodes: lpread, lpreson, lpfreson", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; lpread opcode: krmsr, krmso, kerr, kcps lpread ktimpt, ifilcod [, inpoles] [, ifrmrate]\n    ; Read linear prediction coefficients from analysis file\n    ; ktimpt - time pointer (seconds)\n    ; ifilcod - analysis file name\n    ; inpoles - number of poles\n    ; ifrmrate - frame rate\n    \n    ; Note: Requires LP analysis file\n    ; This example simulates with formant synthesis\n    \n    ; Excitation (pulse train)\n    kFreq = 110\n    aBuzz buzz 0.3, kFreq, int(sr/(2*kFreq)), -1\n    \n    ; Simulate formant filtering (LP-like)\n    aF1 butterbp aBuzz, 800, 80   ; First formant\n    aF2 butterbp aBuzz, 1200, 100 ; Second formant\n    aF3 butterbp aBuzz, 2500, 120 ; Third formant\n    \n    aOut = aBuzz*0.3 + aF1 + aF2*0.8 + aF3*0.6\n    aOut *= 0.4\n    \n    outs aOut, aOut\nendin\n\ninstr 2\n    ; lpreson opcode: ares lpreson asig\n    ; Resynthesis using LP coefficients\n    ; Must be preceded by lpread\n    \n    ; Excitation signal (can be impulse, noise, or buzz)\n    aNoise rand 0.3\n    \n    ; Simulate LP resynthesis with formant filtering\n    ; Moving formants\n    kF1 linseg 600, p3*0.5, 900, p3*0.5, 700\n    kF2 linseg 1000, p3*0.5, 1400, p3*0.5, 1200\n    kF3 = 2500\n    \n    aF1 butterbp aNoise, kF1, kF1*0.1\n    aF2 butterbp aNoise, kF2, kF2*0.1\n    aF3 butterbp aNoise, kF3, 200\n    \n    aOut = aF1 + aF2*0.8 + aF3*0.5\n    aOut *= 0.5\n    \n    outs aOut, aOut\nendin\n\ninstr 3\n    ; lpfreson opcode: ares lpfreson asig, kfrqratio\n    ; Formant synthesis using LP data\n    ; kfrqratio - frequency scaling ratio\n    \n    ; Excitation (voiced)\n    kPitch linseg 100, p3*0.5, 200, p3*0.5, 150\n    aBuzz buzz 0.3, kPitch, int(sr/(2*kPitch)), -1\n    \n    ; Frequency ratio for formant scaling\n    kRatio linseg 1, p3*0.5, 1.5, p3*0.5, 0.8\n    \n    ; Simulate formant synthesis with scaled frequencies\n    aF1 butterbp aBuzz, 700*kRatio, 80\n    aF2 butterbp aBuzz, 1200*kRatio, 100\n    aF3 butterbp aBuzz, 2600*kRatio, 150\n    \n    aOut = aF1 + aF2*0.7 + aF3*0.5\n    aOut *= 0.5\n    \n    outs aOut, aOut\nendin\n\ninstr 4\n    ; Vowel synthesis using LP-like formants\n    ; /a/ vowel\n    kPitch = 110\n    aBuzz buzz 0.3, kPitch, int(sr/(2*kPitch)), -1\n    \n    ; /a/ formants: F1=730, F2=1090, F3=2440\n    aF1 butterbp aBuzz, 730, 80\n    aF2 butterbp aBuzz, 1090, 120\n    aF3 butterbp aBuzz, 2440, 180\n    \n    aVowel = aF1 + aF2*0.8 + aF3*0.6\n    aVowel *= 0.4\n    \n    outs aVowel, aVowel\nendin\n\ninstr 5\n    ; Morphing between vowels\n    kPitch = 130\n    aBuzz buzz 0.3, kPitch, int(sr/(2*kPitch)), -1\n    \n    ; Morph from /i/ to /a/ to /u/\n    ; /i/: F1=270, F2=2290, F3=3010\n    ; /a/: F1=730, F2=1090, F3=2440\n    ; /u/: F1=300, F2=870, F3=2240\n    \n    kF1 linseg 270, p3*0.33, 730, p3*0.33, 300, p3*0.34, 270\n    kF2 linseg 2290, p3*0.33, 1090, p3*0.33, 870, p3*0.34, 2290\n    kF3 linseg 3010, p3*0.33, 2440, p3*0.33, 2240, p3*0.34, 3010\n    \n    aF1 butterbp aBuzz, kF1, kF1*0.1\n    aF2 butterbp aBuzz, kF2, kF2*0.1\n    aF3 butterbp aBuzz, kF3, 200\n    \n    aOut = aF1 + aF2*0.7 + aF3*0.5\n    aOut *= 0.4\n    \n    outs aOut, aOut\nendin\n\ninstr 6\n    ; Unvoiced synthesis (whispered speech)\n    ; Using noise excitation\n    \n    aNoise rand 0.4\n    \n    ; /s/ sound formants\n    aF1 butterbp aNoise, 4000, 1000\n    aF2 butterbp aNoise, 6000, 1500\n    aF3 butterhp aNoise, 7000\n    \n    aOut = (aF1 + aF2*0.8 + aF3*0.5) * 0.3\n    \n    outs aOut, aOut\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 2\ni2 3 3\ni3 7 4\ni4 12 2\ni5 15 5\ni6 21 2\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
