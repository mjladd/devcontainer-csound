{"instruction": "Write a CSound instrument that demonstrates equalization opcodes: rbjeq, pareq, lowshelf, highshelf", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; rbjeq opcode: ares rbjeq asig, kfco, klvl, kQ, kS [, imode]\n    ; Robert Bristow-Johnson's EQ filter collection\n    ; asig - input signal\n    ; kfco - cutoff/center frequency (Hz)\n    ; klvl - level/gain (dB for shelf/peak, linear for others)\n    ; kQ - Q factor (bandwidth)\n    ; kS - shelf slope (0.5-2, used for shelving filters)\n    ; imode - filter type: 0=lowpass, 1=highpass, 2=bandpass, 3=bandreject,\n    ;                      4=peaking, 5=lowshelf, 6=highshelf, 7=allpass\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Rich sawtooth\n    aSaw vco2 kAmp*0.3, 110, 0\n    \n    ; Lowpass mode\n    kFreq expseg 300, p3*0.5, 2500, p3*0.5, 500\n    kQ = 2\n    iMode = 0  ; Lowpass\n    \n    aFilt rbjeq aSaw, kFreq, 1, kQ, 1, iMode\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; rbjeq - peaking EQ\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 165, 2, 0.4\n    \n    ; Peak at 1000 Hz with gain boost\n    kCenter = 1000\n    kGain = 12  ; dB boost\n    kQ = 4  ; Narrow peak\n    iMode = 4  ; Peaking\n    \n    aFilt rbjeq aPulse, kCenter, kGain, kQ, 1, iMode\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; pareq opcode: ares pareq asig, kc, kv, kq [, imode, iskip]\n    ; Parametric equalizer\n    ; asig - input signal\n    ; kc - center frequency (Hz)\n    ; kv - gain at center (linear, 1=unity)\n    ; kq - Q value\n    ; imode - 0=constant-Q, 1=constant bandwidth (default 0)\n    ; iskip - skip initialization\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.3, 220, 0\n    \n    ; Boost at 800 Hz\n    kCenter = 800\n    kGain = 3  ; 3x = ~9.5 dB\n    kQ = 5\n    \n    aFilt pareq aSaw, kCenter, kGain, kQ\n    \n    outs aFilt, aFilt\nendin\n\ninstr 4\n    ; lowshelf opcode: ares lowshelf asig, kfc, kgain [, istor]\n    ; Low-frequency shelving filter\n    ; asig - input signal\n    ; kfc - corner frequency (Hz)\n    ; kgain - gain (linear, >1 boost, <1 cut)\n    ; istor - skip initialization\n    \n    kAmp madsr 0.01, 0.1, 0.65, 0.25\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 110, 2, 0.3\n    \n    ; Boost low frequencies\n    kCorner = 400\n    kGain = 2.5  ; Boost\n    \n    aFilt lowshelf aPulse, kCorner, kGain\n    \n    outs aFilt, aFilt\nendin\n\ninstr 5\n    ; highshelf opcode: ares highshelf asig, kfc, kgain [, istor]\n    ; High-frequency shelving filter\n    ; asig - input signal\n    ; kfc - corner frequency (Hz)\n    ; kgain - gain (linear)\n    ; istor - skip initialization\n    \n    kAmp madsr 0.015, 0.08, 0.7, 0.2\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.3, 165, 0\n    \n    ; Boost high frequencies\n    kCorner = 1500\n    kGain = 3  ; Significant boost\n    \n    aFilt highshelf aSaw, kCorner, kGain\n    \n    outs aFilt, aFilt\nendin\n\ninstr 6\n    ; Combined EQ: low shelf + peak + high shelf\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; Square wave\n    aSq vco2 kAmp*0.25, 220, 2\n    \n    ; Low shelf boost\n    aEQ1 lowshelf aSq, 300, 1.8\n    \n    ; Mid peak\n    aEQ2 pareq aEQ1, 1200, 2, 4\n    \n    ; High shelf cut\n    aEQ3 highshelf aEQ2, 3000, 0.6\n    \n    outs aEQ3, aEQ3\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 3\ni2 3.5 3\ni3 7 3\ni4 10.5 3\ni5 14 3\ni6 17.5 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the peakq opcode for resonant peaking EQ", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; peakq opcode: ares peakq asig, kfc, kq, kgain [, istor]\n    ; Resonant peaking EQ filter\n    ; asig - input signal\n    ; kfc - center frequency (Hz)\n    ; kq - Q value (0.5-100+, higher = narrower)\n    ; kgain - gain (linear, >1 boost, <1 cut)\n    ; istor - skip initialization\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Sawtooth with rich harmonics\n    aSaw vco2 kAmp*0.3, 110, 0\n    \n    ; Wide boost at 800 Hz\n    kCenter = 800\n    kQ = 2  ; Wide\n    kGain = 4  ; 12 dB boost\n    \n    aFilt peakq aSaw, kCenter, kQ, kGain\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; Narrow resonant peak\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Noise source\n    aNoise noise kAmp*0.4, 0\n    \n    ; Very narrow peak (resonator-like)\n    kCenter expseg 400, p3*0.5, 2000, p3*0.5, 600\n    kQ = 20  ; Very narrow\n    kGain = 8\n    \n    aFilt peakq aNoise, kCenter, kQ, kGain\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Multiple peaking filters\n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.25, 165, 2, 0.4\n    \n    ; Three formant-like peaks\n    aFilt1 peakq aPulse, 600, 8, 3\n    aFilt2 peakq aFilt1, 1200, 10, 2.5\n    aFilt3 peakq aFilt2, 2400, 6, 2\n    \n    outs aFilt3, aFilt3\nendin\n\ninstr 4\n    ; Notch (cut instead of boost)\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.3, 220, 0\n    \n    ; Notch at 880 Hz\n    kCenter = 880\n    kQ = 10\n    kGain = 0.1  ; Cut\n    \n    aFilt peakq aSaw, kCenter, kQ, kGain\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 3\ni2 3.5 4\ni3 8 3\ni4 11.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the hilbert and hilbert2 opcodes for Hilbert transforms", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; hilbert opcode: ar1, ar2 hilbert asig [, ifftsize]\n    ; Hilbert transform - creates two signals 90 degrees out of phase\n    ; asig - input signal\n    ; ifftsize - FFT size (default 512)\n    ; Returns: ar1 (real), ar2 (imaginary/90 degrees shifted)\n    ; Used for frequency shifting, SSB modulation\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Oscillator\n    aOsc oscili kAmp*0.3, 440, -1, 0\n    \n    ; Hilbert transform\n    aReal, aImag hilbert aOsc\n    \n    ; Frequency shift up by 200 Hz\n    ; Shift oscillator\n    aShift1 oscili 1, 200, -1, 0\n    aShift2 oscili 1, 200, -1, 0.25  ; 90 degrees\n    \n    ; Single sideband: upper\n    aSSB = aReal * aShift1 - aImag * aShift2\n    \n    outs aSSB, aSSB\nendin\n\ninstr 2\n    ; Frequency shifting down\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Higher frequency source\n    aOsc oscili kAmp*0.3, 660, -1, 0\n    \n    ; Hilbert transform\n    aReal, aImag hilbert aOsc\n    \n    ; Shift down by 150 Hz\n    aShift1 oscili 1, -150, -1, 0\n    aShift2 oscili 1, -150, -1, 0.25\n    \n    ; Lower sideband\n    aSSB = aReal * aShift1 - aImag * aShift2\n    \n    outs aSSB, aSSB\nendin\n\ninstr 3\n    ; Dynamic frequency shifting\n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.25, 330, 0\n    \n    ; Hilbert transform\n    aReal, aImag hilbert aSaw\n    \n    ; Sweep shift amount\n    kShiftFreq linseg -200, p3*0.5, 200, p3*0.5, -200\n    \n    aShift1 oscili 1, kShiftFreq, -1, 0\n    aShift2 oscili 1, kShiftFreq, -1, 0.25\n    \n    aSSB = aReal * aShift1 - aImag * aShift2\n    \n    outs aSSB, aSSB\nendin\n\ninstr 4\n    ; hilbert2 opcode: ar1, ar2 hilbert2 asig, ifreq1, ifreq2 [, iq]\n    ; More efficient Hilbert transformer with specific frequency range\n    ; asig - input signal\n    ; ifreq1 - lower frequency limit (Hz)\n    ; ifreq2 - upper frequency limit (Hz)\n    ; iq - number of filter sections (default 10)\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 220, 2, 0.4\n    \n    ; Hilbert transform for specific range\n    aReal, aImag hilbert2 aPulse, 100, 5000, 12\n    \n    ; Ring modulation effect\n    kModFreq = 150\n    aShift1 oscili 1, kModFreq, -1, 0\n    aShift2 oscili 1, kModFreq, -1, 0.25\n    \n    aSSB = aReal * aShift1 - aImag * aShift2\n    \n    outs aSSB, aSSB\nendin\n\ninstr 5\n    ; Stereo frequency shifter\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Square wave\n    aSq vco2 kAmp*0.3, 165, 2\n    \n    ; Hilbert transform\n    aReal, aImag hilbert aSq\n    \n    ; Different shifts for L/R\n    aShiftL1 oscili 1, 100, -1, 0\n    aShiftL2 oscili 1, 100, -1, 0.25\n    \n    aShiftR1 oscili 1, -100, -1, 0\n    aShiftR2 oscili 1, -100, -1, 0.25\n    \n    aL = aReal * aShiftL1 - aImag * aShiftL2\n    aR = aReal * aShiftR1 - aImag * aShiftR2\n    \n    outs aL, aR\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 3\ni2 3.5 3\ni3 7 4\ni4 11.5 3\ni5 15 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
