{"instruction": "Write a CSound instrument that demonstrates vocoder opcodes: pvsvoc, vocoder, pvscross", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; pvsvoc opcode: fsig pvsvoc famp, ffr, kdepth [, kgain] [,kcoefs]\n    ; Phase vocoder cross-synthesis\n    ; famp - amplitude spectrum source (modulator)\n    ; ffr - frequency spectrum source (carrier)\n    ; kdepth - vocoding depth (0-1)\n    \n    ; Modulator (speech-like)\n    aMod buzz 0.3, 110, 20, -1\n    aMod *= linseg(1, 0.1, 0.3, 0.15, 1, 0.2, 0.5, p3-0.45, 0.5)\n    kModFreq linseg 110, p3*0.5, 220, p3*0.5, 165\n    aMod = butlp(aMod, kModFreq*8)\n    \n    ; Carrier (pitched)\n    aCarr vco2 0.3, 220, 0\n    \n    ; Analyze both signals\n    fMod pvsanal aMod, 1024, 256, 1024, 1\n    fCarr pvsanal aCarr, 1024, 256, 1024, 1\n    \n    ; Vocoding\n    kDepth = 0.9\n    fvoc pvsvoc fMod, fCarr, kDepth\n    \n    ; Synthesize\n    aOut pvsynth fvoc\n    \n    outs aMod*0.4, aOut*0.6\nendin\n\ninstr 2\n    ; Vocoder with variable depth\n    ; Modulator (noise burst)\n    aMod rand 0.3\n    aMod *= linseg(1, 0.05, 0.2, 0.1, 1, 0.15, 0.3, p3-0.3, 0.1)\n    aMod butterlp aMod, 2000\n    \n    ; Carrier (harmonic)\n    aCarr buzz 0.3, 165, 30, -1\n    \n    ; Analyze\n    fMod pvsanal aMod, 1024, 256, 1024, 1\n    fCarr pvsanal aCarr, 1024, 256, 1024, 1\n    \n    ; Variable vocoding depth\n    kDepth linseg 0, p3*0.3, 1, p3*0.4, 1, p3*0.3, 0\n    fvoc pvsvoc fMod, fCarr, kDepth\n    \n    aOut pvsynth fvoc\n    \n    outs aCarr*0.3, aOut*0.7\nendin\n\ninstr 3\n    ; pvscross opcode: fsig pvscross fsrc, fdest, kamp1, kamp2\n    ; Spectral cross-synthesis/morphing\n    ; kamp1 - amplitude of source\n    ; kamp2 - amplitude of destination\n    \n    ; Source 1\n    aSrc1 buzz 0.3, 220, 15, -1\n    \n    ; Source 2\n    aSrc2 vco2 0.3, 330, 10\n    \n    ; Analyze\n    fSrc1 pvsanal aSrc1, 1024, 256, 1024, 1\n    fSrc2 pvsanal aSrc2, 1024, 256, 1024, 1\n    \n    ; Morph between sources\n    kMorph linseg 0, p3*0.5, 1, p3*0.5, 0\n    kAmp1 = 1 - kMorph\n    kAmp2 = kMorph\n    \n    fcross pvscross fSrc1, fSrc2, kAmp1, kAmp2\n    \n    aOut pvsynth fcross\n    \n    outs aOut, aOut\nendin\n\ninstr 4\n    ; Multi-band vocoder simulation\n    ; Using filter banks\n    \n    ; Modulator\n    aMod rand 0.4\n    aMod *= linseg(1, 0.1, 0.4, 0.2, 1, p3-0.3, 0.5)\n    \n    ; Carrier\n    aCarr vco2 0.4, 110, 0\n    \n    ; Band 1: Low (100-300 Hz)\n    aModB1 butterbp aMod, 200, 150\n    aCarrB1 butterbp aCarr, 200, 150\n    aEnv1 follow2 aModB1, 0.005, 0.05\n    aOut1 = aCarrB1 * aEnv1 * 3\n    \n    ; Band 2: Low-mid (300-800 Hz)\n    aModB2 butterbp aMod, 550, 400\n    aCarrB2 butterbp aCarr, 550, 400\n    aEnv2 follow2 aModB2, 0.005, 0.05\n    aOut2 = aCarrB2 * aEnv2 * 3\n    \n    ; Band 3: Mid (800-2000 Hz)\n    aModB3 butterbp aMod, 1400, 900\n    aCarrB3 butterbp aCarr, 1400, 900\n    aEnv3 follow2 aModB3, 0.005, 0.05\n    aOut3 = aCarrB3 * aEnv3 * 3\n    \n    ; Band 4: High (2000-5000 Hz)\n    aModB4 butterbp aMod, 3500, 2500\n    aCarrB4 butterbp aCarr, 3500, 2500\n    aEnv4 follow2 aModB4, 0.005, 0.05\n    aOut4 = aCarrB4 * aEnv4 * 3\n    \n    ; Mix bands\n    aOut = (aOut1 + aOut2 + aOut3 + aOut4) * 0.4\n    \n    outs aOut, aOut\nendin\n\ninstr 5\n    ; Formant vocoder\n    ; Emphasis on formant regions\n    \n    ; Modulator with formant structure\n    aMod buzz 0.3, 110, 40, -1\n    aMod *= linseg(1, 0.1, 0.5, 0.15, 1, p3-0.25, 0.7)\n    \n    ; Add formants to modulator\n    aF1 butterbp aMod, 800, 100\n    aF2 butterbp aMod, 1200, 120\n    aF3 butterbp aMod, 2500, 200\n    aMod = aMod*0.3 + aF1 + aF2*0.8 + aF3*0.6\n    \n    ; Carrier\n    aCarr vco2 0.3, 165, 0\n    \n    ; Vocode\n    fMod pvsanal aMod, 1024, 256, 1024, 1\n    fCarr pvsanal aCarr, 1024, 256, 1024, 1\n    \n    fvoc pvsvoc fMod, fCarr, 0.95\n    \n    aOut pvsynth fvoc\n    \n    outs aMod*0.3, aOut*0.7\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 5 4\ni3 10 4\ni4 15 3\ni5 19 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
