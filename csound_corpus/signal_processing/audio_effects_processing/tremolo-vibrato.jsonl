{"instruction": "Write a CSound instrument that demonstrates tremolo and vibrato effects using vdelay, vibration, vibrato opcodes", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; Simple tremolo (amplitude modulation)\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Oscillator\n    aOsc oscili kAmp*0.3, 440, -1, 0\n    \n    ; Tremolo LFO\n    kTrem oscili 0.5, 5, -1, 0  ; 5 Hz\n    kMod = 0.5 + kTrem\n    \n    aTrem = aOsc * kMod\n    \n    outs aTrem, aTrem\nendin\n\ninstr 2\n    ; vibrato opcode: ares vibrato asig, kfreq, kdepth [, itype]\n    ; Vibrato effect (frequency modulation)\n    ; asig - input signal\n    ; kfreq - vibrato rate (Hz)\n    ; kdepth - vibrato depth (cents, typically 5-50)\n    ; itype - LFO type (optional)\n    \n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Oscillator\n    aOsc oscili kAmp*0.3, 330, -1, 0\n    \n    ; Apply vibrato\n    kRate = 5\n    kDepth = 20  ; cents\n    \n    aVib vibrato aOsc, kRate, kDepth\n    \n    outs aVib, aVib\nendin\n\ninstr 3\n    ; Manual vibrato using vdelay\n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.3, 220, 0\n    \n    ; LFO for vibrato (delay modulation)\n    kLFO oscili 3, 6, -1, 0  ; Â±3ms at 6Hz\n    kDelTime = 15 + kLFO\n    \n    ; Variable delay for vibrato\n    aVib vdelay aSaw, kDelTime, 25\n    \n    outs aVib, aVib\nendin\n\ninstr 4\n    ; vibration opcode: kres vibration kpitch, kamp, kfreq [, itype] [, istart]\n    ; Generate vibrato modulation signal\n    ; kpitch - base pitch (Hz)\n    ; kamp - vibrato depth (Hz)\n    ; kfreq - vibrato rate (Hz)\n    ; itype - waveform type\n    ; istart - starting phase\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Generate vibrato modulation\n    kBasePitch = 440\n    kVibDepth = 8  ; Hz\n    kVibRate = 5.5\n    kModPitch vibration kBasePitch, kVibDepth, kVibRate\n    \n    ; Apply to oscillator\n    aOsc oscili kAmp*0.3, kModPitch, -1, 0\n    \n    outs aOsc, aOsc\nendin\n\ninstr 5\n    ; Combined tremolo and vibrato\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 165, 2, 0.4\n    \n    ; Vibrato\n    kVibRate = 5.5\n    kVibDepth = 15\n    aVib vibrato aPulse, kVibRate, kVibDepth\n    \n    ; Tremolo\n    kTremRate = 3.7\n    kTrem oscili 0.4, kTremRate, -1, 0\n    kTremMod = 0.6 + kTrem\n    \n    aOut = aVib * kTremMod\n    \n    outs aOut, aOut\nendin\n\ninstr 6\n    ; Stereo tremolo/vibrato\n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Two oscillators\n    aOsc1 oscili kAmp*0.15, 220, -1, 0\n    aOsc2 oscili kAmp*0.15, 220.5, -1, 0\n    \n    ; Different tremolo rates L/R\n    kTremL oscili 0.5, 4, -1, 0\n    kTremR oscili 0.5, 3, -1, 0.25\n    \n    kModL = 0.5 + kTremL\n    kModR = 0.5 + kTremR\n    \n    ; Apply tremolo\n    aL = aOsc1 * kModL\n    aR = aOsc2 * kModR\n    \n    ; Add vibrato\n    aVibL vibrato aL, 5, 12\n    aVibR vibrato aR, 5.3, 12\n    \n    outs aVibL, aVibR\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 4.5 4\ni3 9 4\ni4 13.5 4\ni5 18 4\ni6 22.5 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
