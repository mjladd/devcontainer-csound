{"instruction": "Write a CSound instrument that demonstrates lo-fi effects: bit reduction, sample rate reduction, aliasing", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; Bit reduction (bit crushing)\n    ; Reduces bit depth for lo-fi effect\n    \n    aIn vco2 0.4, 220, 0\n    \n    ; Bit depth parameter (bits)\n    kBits linseg 16, p3*0.5, 4, p3*0.5, 8\n    \n    ; Calculate step size\n    kSteps = 2^kBits\n    kStepSize = 2 / kSteps\n    \n    ; Quantize signal\n    aCrushed = floor(aIn / kStepSize + 0.5) * kStepSize\n    \n    outs aIn*0.5, aCrushed*0.5\nendin\n\ninstr 2\n    ; Sample rate reduction\n    ; Creates aliasing artifacts\n    \n    aIn buzz 0.4, 330, 20, -1\n    \n    ; Target sample rate\n    kSampleRate linseg 44100, p3*0.5, 4000, p3*0.5, 12000\n    \n    ; Sample and hold at reduced rate\n    kPeriod = sr / kSampleRate\n    aSH samphold aIn, kPeriod\n    \n    outs aIn*0.5, aSH*0.5\nendin\n\ninstr 3\n    ; Combined bit and sample rate reduction\n    aIn vco2 0.4, 165, 10\n    \n    ; Reduce sample rate\n    kSR = 8000\n    kPeriod = sr / kSR\n    aSH samphold aIn, kPeriod\n    \n    ; Reduce bit depth\n    kBits = 6\n    kSteps = 2^kBits\n    kStepSize = 2 / kSteps\n    aLoFi = floor(aSH / kStepSize + 0.5) * kStepSize\n    \n    outs aIn*0.5, aLoFi*0.5\nendin\n\ninstr 4\n    ; Variable lo-fi intensity\n    aIn buzz 0.4, 220, 25, -1\n    \n    ; Sweep through lo-fi intensity\n    kLoFi linseg 0, p3*0.33, 1, p3*0.33, 1, p3*0.34, 0\n    \n    ; Bit depth (16 to 3 bits)\n    kBits = 16 - kLoFi*13\n    kSteps = 2^kBits\n    kStepSize = 2 / kSteps\n    aBitReduced = floor(aIn / kStepSize + 0.5) * kStepSize\n    \n    ; Sample rate (44100 to 4000 Hz)\n    kSR = 44100 - kLoFi*40100\n    kPeriod = sr / kSR\n    aLoFi samphold aBitReduced, kPeriod\n    \n    outs aIn*0.5, aLoFi*0.5\nendin\n\ninstr 5\n    ; Lo-fi with filtering\n    ; Add characteristic lo-fi tone\n    \n    aIn vco2 0.4, 110, 0\n    \n    ; Bit crush\n    kBits = 5\n    kSteps = 2^kBits\n    kStepSize = 2 / kSteps\n    aCrushed = floor(aIn / kStepSize + 0.5) * kStepSize\n    \n    ; Sample rate reduce\n    kSR = 6000\n    kPeriod = sr / kSR\n    aLoFi samphold aCrushed, kPeriod\n    \n    ; Add lo-fi character with filtering\n    aFiltered butterlp aLoFi, 3000\n    aFiltered butterhp aFiltered, 80\n    \n    outs aIn*0.4, aFiltered*0.6\nendin\n\ninstr 6\n    ; Aliasing effect\n    ; Intentional aliasing for texture\n    \n    aIn buzz 0.4, 440, 30, -1\n    \n    ; Very low sample rate for strong aliasing\n    kSR linseg 22050, p3*0.5, 2000, p3*0.5, 8000\n    kPeriod = sr / kSR\n    aAlias samphold aIn, kPeriod\n    \n    ; Mix with noise for texture\n    aNoise rand 0.05\n    aOut = aAlias + aNoise\n    \n    outs aIn*0.4, aOut*0.6\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 5 4\ni3 10 3\ni4 14 4\ni5 19 3\ni6 23 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
