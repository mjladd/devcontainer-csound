{"instruction": "Write a CSound instrument that demonstrates HRTF spatialization opcodes: hrtfmove, hrtfmove2, hrtfstat, hrtfer", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; hrtfstat opcode: aleft, aright hrtfstat asrc, iAz, iElev, ifilel, ifiler [, iradius, isr]\n    ; Static HRTF processing\n    ; asrc - input signal\n    ; iAz - azimuth angle (degrees, -180 to 180)\n    ; iElev - elevation angle (degrees, -40 to 90)\n    ; ifilel, ifiler - HRTF data files for left/right\n    ; iradius - head radius (optional)\n    ; isr - sample rate (optional)\n    ; Note: Requires HRTF data files\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Oscillator\n    aOsc oscili kAmp*0.3, 440, -1, 0\n    \n    ; Simulated HRTF with simple panning and filtering\n    iAz = 45  ; 45 degrees right\n    iElev = 0\n    \n    ; Pan based on azimuth\n    kPan = (iAz + 180) / 360\n    aL, aR pan aOsc, kPan\n    \n    ; Simple high-frequency boost for elevation simulation\n    if iElev > 0 then\n        aL buttone aL, 8000\n        aR butthp aR, 8000\n    endif\n    \n    outs aL, aR\nendin\n\ninstr 2\n    ; hrtfmove opcode: aleft, aright hrtfmove asrc, kAz, kElev, ifilel, ifiler [, imode, ifade, isr]\n    ; Moving HRTF processing\n    ; asrc - input signal\n    ; kAz - azimuth (k-rate, degrees)\n    ; kElev - elevation (k-rate, degrees)\n    ; ifilel, ifiler - HRTF files\n    ; imode - processing mode\n    ; ifade - crossfade time\n    ; Note: Requires HRTF data files\n    \n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 330, 2, 0.4\n    \n    ; Sweep azimuth\n    kAz linseg -90, p3*0.5, 90, p3*0.5, -90\n    kElev = 0\n    \n    ; Simulated with dynamic panning\n    kPan = (kAz + 180) / 360\n    aL, aR pan aPulse, kPan\n    \n    ; Add distance cues\n    kDist = abs(kAz) / 90\n    kAtten = 1 - kDist*0.3\n    \n    outs aL*kAtten, aR*kAtten\nendin\n\ninstr 3\n    ; hrtfmove2 opcode: aleft, aright hrtfmove2 asrc, iAz, iElev, ifilel, ifiler [, iradius, isr]\n    ; Interpolated HRTF\n    ; Similar to hrtfstat but with interpolation\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.25, 220, 0\n    \n    ; Fixed position\n    iAz = -60  ; Left front\n    iElev = 20  ; Slightly elevated\n    \n    ; Simulated positioning\n    kPan = (iAz + 180) / 360\n    aL, aR pan aSaw, kPan\n    \n    ; Elevation filtering\n    aL butthp aL, 5000\n    aR butthp aR, 5000\n    \n    outs aL, aR\nendin\n\ninstr 4\n    ; hrtfer opcode: aleft, aright hrtfer asrc, iAz, iElev, ifname [, iradius, isr]\n    ; HRTF from single data file\n    ; ifname - combined HRTF data file\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Square wave\n    aSq vco2 kAmp*0.3, 165, 2\n    \n    ; Position\n    iAz = 30\n    iElev = -15  ; Below horizon\n    \n    ; Simulated\n    kPan = (iAz + 180) / 360\n    aL, aR pan aSq, kPan\n    \n    ; Simulate below-horizon with low-pass\n    if iElev < 0 then\n        aL butlp aL, 4000\n        aR butlp aR, 4000\n    endif\n    \n    outs aL, aR\nendin\n\ninstr 5\n    ; Circular HRTF motion\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Impulse train\n    aImp mpulse kAmp*0.4, 1.5\n    \n    ; Circular motion\n    kAngle linseg 0, p3, 6.283*3\n    kAz = sin(kAngle) * 180\n    kElev = cos(kAngle*2) * 30\n    \n    ; Dynamic panning\n    kPan = (kAz + 180) / 360\n    aL, aR pan aImp, kPan\n    \n    ; Elevation filtering\n    kCutoff = 3000 + kElev*50\n    aL butlp aL, kCutoff\n    aR butlp aR, kCutoff\n    \n    outs aL, aR\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 3\ni2 3.5 5\ni3 9 3\ni4 12.5 3\ni5 16 6\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
