{"instruction": "Write a CSound instrument that demonstrates panning opcodes: pan, pan2, space, spsend, spat3d, spat3di, spat3dt", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; pan opcode: a1, a2 pan asig, kpan [, itype]\n    ; Simple stereo panning\n    ; asig - input signal\n    ; kpan - pan position (0=left, 1=right)\n    ; itype - pan law (0=equal power, 1=linear, default 0)\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Oscillator\n    aOsc oscili kAmp*0.3, 440, -1, 0\n    \n    ; Sweep pan\n    kPan linseg 0, p3*0.5, 1, p3*0.5, 0\n    \n    aL, aR pan aOsc, kPan\n    \n    outs aL, aR\nendin\n\ninstr 2\n    ; pan2 opcode: a1, a2, a3, a4 pan2 asig, xp, yp [, imode]\n    ; Quadraphonic panning\n    ; asig - input signal\n    ; xp, yp - x and y position (-1 to 1)\n    ; imode - mode (optional)\n    \n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 330, 2, 0.4\n    \n    ; Circular motion\n    kAngle linseg 0, p3, 6.283\n    kX = cos(kAngle)\n    kY = sin(kAngle)\n    \n    a1, a2, a3, a4 pan2 aPulse, kX, kY\n    \n    ; Output to stereo (mix quad channels)\n    aL = a1 + a3\n    aR = a2 + a4\n    \n    outs aL, aR\nendin\n\ninstr 3\n    ; space opcode: a1, a2, a3, a4 space asig, ifn, kx, ky, kz [, inum]\n    ; 3D spatialization using HRTF-like approach\n    ; asig - input signal\n    ; ifn - function table for spatial info\n    ; kx, ky, kz - 3D position\n    ; inum - number of outputs (default 4)\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.25, 220, 0\n    \n    ; 3D motion\n    kAngle linseg 0, p3, 6.283\n    kX = cos(kAngle) * 0.8\n    kY = sin(kAngle) * 0.8\n    kZ = 0\n    \n    ; Simulated with pan\n    kPan = (kX + 1) * 0.5\n    aL, aR pan aSaw, kPan\n    \n    outs aL, aR\nendin\n\ninstr 4\n    ; spsend opcode: spsend\n    ; Send signal to space (used with space opcode)\n    ; Simplified example with pan\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Square wave\n    aSq vco2 kAmp*0.3, 165, 2\n    \n    ; Dynamic panning\n    kLFO oscili 0.5, 0.4, -1, 0\n    kPan = 0.5 + kLFO\n    \n    aL, aR pan aSq, kPan\n    \n    outs aL, aR\nendin\n\ninstr 5\n    ; spat3d opcode: a1, a2, a3, a4 spat3d asig, xdist, ycoord, zcoord, \\ \n    ;                idist, ift, imode, imdel, iovr [, istor]\n    ; 3D spatialization with distance attenuation\n    ; asig - input signal\n    ; xdist - x distance\n    ; ycoord - y coordinate\n    ; zcoord - z coordinate\n    ; idist - distance units\n    ; ift - function table\n    ; imode - mode\n    ; imdel - max delay\n    ; iovr - overlap\n    \n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Impulse train\n    aImp mpulse kAmp*0.5, 1.5\n    \n    ; Moving source\n    kX linseg -1, p3, 1\n    kY = 0\n    \n    ; Distance attenuation\n    kDist = sqrt(kX*kX + kY*kY + 1)\n    kAtten = 1 / (kDist + 0.5)\n    \n    ; Pan based on position\n    kPan = (kX + 1) * 0.5\n    aL, aR pan aImp*kAtten, kPan\n    \n    outs aL, aR\nendin\n\ninstr 6\n    ; Multiple moving sources\n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Three oscillators\n    aOsc1 oscili kAmp*0.15, 220, -1, 0\n    aOsc2 oscili kAmp*0.15, 330, -1, 0\n    aOsc3 oscili kAmp*0.15, 440, -1, 0\n    \n    ; Different pan movements\n    kPan1 linseg 0, p3, 1\n    kPan2 linseg 1, p3, 0\n    kPan3 linseg 0.5, p3*0.5, 0, p3*0.5, 1\n    \n    aL1, aR1 pan aOsc1, kPan1\n    aL2, aR2 pan aOsc2, kPan2\n    aL3, aR3 pan aOsc3, kPan3\n    \n    aL = aL1 + aL2 + aL3\n    aR = aR1 + aR2 + aR3\n    \n    outs aL, aR\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 4.5 4\ni3 9 4\ni4 13.5 4\ni5 18 4\ni6 22.5 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
