{"instruction": "Write a CSound instrument that demonstrates basic delay opcodes: delay, delay1, delayk", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; delay opcode: ares delay asig, idlt [, iskip]\n    ; Simple delay line with fixed delay time\n    ; asig - input signal\n    ; idlt - delay time (seconds)\n    ; iskip - skip initialization (optional)\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Short pluck\n    aPluck pluck kAmp*0.4, 440, 440, 0, 1\n    \n    ; Add echo at 0.3 seconds\n    aEcho delay aPluck, 0.3\n    \n    ; Mix dry and delayed\n    aMix = aPluck + aEcho*0.6\n    \n    outs aMix, aMix\nendin\n\ninstr 2\n    ; Multiple delays for rhythmic echo\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Impulse source\n    aImp mpulse kAmp*0.5, 2\n    \n    ; Three delays\n    aD1 delay aImp, 0.15\n    aD2 delay aImp, 0.3\n    aD3 delay aImp, 0.45\n    \n    ; Mix with decay\n    aMix = aImp + aD1*0.7 + aD2*0.5 + aD3*0.3\n    \n    outs aMix, aMix\nendin\n\ninstr 3\n    ; delay1 opcode: ares delay1 asig [, iskip]\n    ; Single-sample delay (1/sr seconds)\n    ; asig - input signal\n    ; iskip - skip initialization\n    ; Useful for feedback loops and basic filters\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Oscillator\n    aOsc oscili kAmp*0.3, 220, -1, 0\n    \n    ; Create feedback with single-sample delay\n    aDelayed delay1 aOsc\n    aFeedback = aOsc + aDelayed*0.5\n    \n    outs aFeedback, aFeedback\nendin\n\ninstr 4\n    ; delayk opcode: kr delayk ksig, idel [, imode]\n    ; Delay for k-rate signals\n    ; ksig - input k-rate signal\n    ; idel - delay time (seconds)\n    ; imode - 0=clip to valid range, 1=wrap (default 0)\n    \n    ; Fast-changing k-rate signal\n    kRaw linseg 200, p3, 800\n    \n    ; Delayed version\n    kDelayed delayk kRaw, 0.5\n    \n    ; Use both for two oscillators\n    kAmp madsr 0.01, 0.08, 0.7, 0.2\n    aOsc1 oscili kAmp*0.15, kRaw, -1, 0\n    aOsc2 oscili kAmp*0.15, kDelayed, -1, 0\n    \n    outs aOsc1, aOsc2\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 2\ni2 2.5 3\ni3 6 3\ni4 9.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates delay line read/write opcodes: delayr, delayw, deltap, deltapi, deltap3", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; delayr/delayw opcodes: create delay line\n    ; ares delayr idlt [, iskip]\n    ; delayw asig\n    ; deltap opcode: ares deltap kdlt\n    ; Read from delay line at k-rate time\n    ; idlt - maximum delay time\n    ; kdlt - tap time (seconds, 0 to idlt)\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Impulse train\n    aImp mpulse kAmp*0.4, 1.5\n    \n    ; Create delay line (max 1 second)\n    aBuf delayr 1.0\n    \n    ; Tap at 0.25 seconds\n    aTap deltap 0.25\n    \n    ; Write to delay\n    delayw aImp\n    \n    ; Mix\n    aMix = aImp + aTap*0.6\n    \n    outs aMix, aMix\nendin\n\ninstr 2\n    ; Multiple taps from one delay line\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Pluck sound\n    aPluck pluck kAmp*0.4, 330, 330, 0, 1\n    \n    ; Delay line\n    aBuf delayr 0.8\n    \n    ; Multiple taps at different times\n    aTap1 deltap 0.15\n    aTap2 deltap 0.3\n    aTap3 deltap 0.6\n    \n    delayw aPluck\n    \n    ; Mix with decreasing gains\n    aMix = aPluck + aTap1*0.6 + aTap2*0.4 + aTap3*0.2\n    \n    outs aMix, aMix\nendin\n\ninstr 3\n    ; deltapi opcode: ares deltapi xdlt\n    ; Linear interpolated delay tap (for smooth varying delays)\n    ; xdlt - delay time (can be k-rate or a-rate)\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Continuous sound\n    aOsc oscili kAmp*0.3, 440, -1, 0\n    \n    ; Delay line\n    aBuf delayr 0.5\n    \n    ; Varying tap time\n    kTapTime linseg 0.05, p3*0.5, 0.4, p3*0.5, 0.1\n    aTap deltapi kTapTime\n    \n    delayw aOsc\n    \n    ; Mix\n    aMix = aOsc*0.5 + aTap*0.5\n    \n    outs aMix, aMix\nendin\n\ninstr 4\n    ; deltap3 opcode: ares deltap3 xdlt\n    ; Cubic interpolated delay tap (higher quality)\n    ; xdlt - delay time\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.25, 220, 0\n    \n    ; Delay line\n    aBuf delayr 0.6\n    \n    ; LFO-modulated tap time for chorus\n    kLFO oscili 0.02, 0.3, -1, 0\n    kTapTime = 0.03 + kLFO\n    aTap deltap3 kTapTime\n    \n    delayw aSaw\n    \n    ; Stereo output\n    outs aSaw, aTap\nendin\n\ninstr 5\n    ; Feedback delay using delayr/delayw\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Impulse\n    aImp mpulse kAmp*0.5, 3\n    \n    ; Delay with feedback\n    aBuf delayr 0.3\n    aTap deltap 0.3\n    \n    ; Add feedback\n    aFeedback = aImp + aTap*0.6\n    \n    delayw aFeedback\n    \n    outs aFeedback, aFeedback\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 3\ni2 3.5 2\ni3 6 4\ni4 10.5 4\ni5 15 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced delay tap opcodes: deltapn, deltapx, deltapxw", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; deltapn opcode: ares deltapn xnumsamps\n    ; Tap delay line by number of samples (not seconds)\n    ; xnumsamps - delay in samples\n    ; More precise for short delays\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Impulse train\n    aImp mpulse kAmp*0.4, 2\n    \n    ; Delay line\n    aBuf delayr 0.1\n    \n    ; Tap at specific sample count (e.g., 2205 samples = 0.05 sec at 44100 Hz)\n    iSamps = 2205\n    aTap deltapn iSamps\n    \n    delayw aImp\n    \n    aMix = aImp + aTap*0.6\n    \n    outs aMix, aMix\nendin\n\ninstr 2\n    ; deltapx opcode: aout1 [, aout2, ...] deltapx adel, [, j]\n    ; Multiple interpolated taps at a-rate delay time\n    ; adel - a-rate delay time\n    ; j - number of taps (1-8, default 4)\n    \n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.25, 165, 0\n    \n    ; Delay line\n    aBuf delayr 0.5\n    \n    ; A-rate modulated delay time\n    aLFO oscili 0.015, 0.4, -1, 0\n    aDelTime = 0.05 + aLFO\n    \n    ; Four taps with deltapx\n    aTap1, aTap2, aTap3, aTap4 deltapx aDelTime, 4\n    \n    delayw aSaw\n    \n    ; Mix taps\n    aMix = (aTap1 + aTap2 + aTap3 + aTap4) * 0.2\n    \n    outs aMix, aMix\nendin\n\ninstr 3\n    ; deltapxw opcode: deltapxw ain, adel, [, j]\n    ; Write to delay and tap simultaneously with a-rate delay\n    ; ain - input signal to write\n    ; adel - a-rate delay time\n    ; j - number of taps (1-8)\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 220, 2, 0.4\n    \n    ; Delay line\n    aBuf delayr 0.4\n    \n    ; Varying delay time\n    aLFO oscili 0.02, 0.6, -1, 0\n    aDelTime = 0.1 + aLFO\n    \n    ; Write and tap\n    aTap1, aTap2 deltapxw aPulse, aDelTime, 2\n    \n    ; Mix\n    aL = aPulse + aTap1*0.5\n    aR = aPulse + aTap2*0.5\n    \n    outs aL, aR\nendin\n\ninstr 4\n    ; Complex multi-tap delay with deltapn\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Pluck\n    aPluck pluck kAmp*0.4, 330, 330, 0, 1\n    \n    ; Delay line\n    aBuf delayr 1.0\n    \n    ; Multiple taps at specific sample counts\n    aTap1 deltapn 4410   ; 0.1 sec\n    aTap2 deltapn 8820   ; 0.2 sec\n    aTap3 deltapn 17640  ; 0.4 sec\n    aTap4 deltapn 35280  ; 0.8 sec\n    \n    delayw aPluck\n    \n    ; Exponential decay mix\n    aMix = aPluck + aTap1*0.6 + aTap2*0.4 + aTap3*0.25 + aTap4*0.15\n    \n    outs aMix, aMix\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 3\ni2 3.5 4\ni3 8 4\ni4 12.5 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
