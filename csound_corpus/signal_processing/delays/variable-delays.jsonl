{"instruction": "Write a CSound instrument that demonstrates variable delay opcodes: vdelay, vdelay3", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; vdelay opcode: ares vdelay asig, adel, imaxdel [, iskip]\n    ; Variable delay with linear interpolation\n    ; asig - input signal\n    ; adel - delay time (can be a-rate or k-rate, milliseconds)\n    ; imaxdel - maximum delay time (milliseconds)\n    ; iskip - skip initialization\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Oscillator\n    aOsc oscili kAmp*0.3, 440, -1, 0\n    \n    ; Varying delay time (in milliseconds)\n    kDelTime linseg 10, p3*0.5, 100, p3*0.5, 20\n    \n    ; Variable delay\n    aDelayed vdelay aOsc, kDelTime, 150\n    \n    ; Mix\n    aMix = aOsc*0.5 + aDelayed*0.5\n    \n    outs aMix, aMix\nendin\n\ninstr 2\n    ; Vibrato using vdelay\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.3, 330, 0\n    \n    ; LFO for vibrato\n    kLFO oscili 5, 5, -1, 0  ; Â±5ms at 5 Hz\n    kDelTime = 15 + kLFO\n    \n    aVibrato vdelay aSaw, kDelTime, 25\n    \n    outs aVibrato, aVibrato\nendin\n\ninstr 3\n    ; vdelay3 opcode: ares vdelay3 asig, adel, imaxdel [, iskip]\n    ; Variable delay with cubic interpolation (higher quality)\n    ; Same parameters as vdelay but smoother interpolation\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 220, 2, 0.4\n    \n    ; Smooth delay modulation\n    kLFO oscili 30, 0.3, -1, 0\n    kDelTime = 50 + kLFO\n    \n    ; High-quality variable delay\n    aDelayed vdelay3 aPulse, kDelTime, 100\n    \n    outs aDelayed, aDelayed\nendin\n\ninstr 4\n    ; Chorus effect with vdelay3\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Square wave\n    aSq vco2 kAmp*0.25, 165, 2\n    \n    ; Two delayed copies with different LFOs\n    kLFO1 oscili 3, 0.7, -1, 0\n    kLFO2 oscili 4, 0.53, -1, 0.3\n    \n    kDel1 = 25 + kLFO1\n    kDel2 = 30 + kLFO2\n    \n    aChorus1 vdelay3 aSq, kDel1, 35\n    aChorus2 vdelay3 aSq, kDel2, 40\n    \n    ; Stereo output\n    aL = aSq*0.4 + aChorus1*0.3\n    aR = aSq*0.4 + aChorus2*0.3\n    \n    outs aL, aR\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 4.5 4\ni3 9 4\ni4 13.5 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced variable delay opcodes: vdelayxw, vdelayxq, vdelayxs", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; vdelayxw opcode: aout1 [, aout2, ...] vdelayxw ain, adl, imd, iws [, ist]\n    ; Variable delay with multi-tap and write\n    ; ain - input signal\n    ; adl - delay time (a-rate, milliseconds)\n    ; imd - maximum delay (milliseconds)\n    ; iws - window size for interpolation (4-128, default 4)\n    ; ist - skip initialization\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Oscillator\n    aOsc oscili kAmp*0.3, 440, -1, 0\n    \n    ; A-rate delay modulation\n    aLFO oscili 15, 0.4, -1, 0\n    aDelTime = 30 + aLFO\n    \n    ; Variable delay with high-quality interpolation\n    aDelayed vdelayxw aOsc, aDelTime, 60, 16\n    \n    ; Mix\n    aMix = aOsc*0.5 + aDelayed*0.5\n    \n    outs aMix, aMix\nendin\n\ninstr 2\n    ; vdelayxq opcode: aout1, aout2, aout3, aout4 vdelayxq ain, adl, imd, iws [, ist]\n    ; Variable delay with 4 taps (quadruple)\n    ; Returns 4 delayed signals\n    \n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.25, 220, 0\n    \n    ; Modulated delay\n    aLFO oscili 20, 0.6, -1, 0\n    aDelTime = 40 + aLFO\n    \n    ; Four taps\n    aTap1, aTap2, aTap3, aTap4 vdelayxq aSaw, aDelTime, 80, 8\n    \n    ; Mix taps\n    aL = aTap1*0.3 + aTap3*0.2\n    aR = aTap2*0.3 + aTap4*0.2\n    \n    outs aL, aR\nendin\n\ninstr 3\n    ; vdelayxs opcode: aout1, aout2 vdelayxs ain, adl, imd, iws [, ist]\n    ; Variable delay with 2 taps (stereo)\n    ; Returns 2 delayed signals\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 165, 2, 0.4\n    \n    ; Two LFOs for independent modulation\n    aLFO1 oscili 10, 0.5, -1, 0\n    aLFO2 oscili 12, 0.37, -1, 0.25\n    \n    aDelTime1 = 25 + aLFO1\n    aDelTime2 = 30 + aLFO2\n    \n    ; Average delay for vdelayxs\n    aDelTimeAvg = (aDelTime1 + aDelTime2) * 0.5\n    \n    ; Stereo taps\n    aL, aR vdelayxs aPulse, aDelTimeAvg, 50, 12\n    \n    ; Mix with dry\n    aOutL = aPulse*0.4 + aL*0.3\n    aOutR = aPulse*0.4 + aR*0.3\n    \n    outs aOutL, aOutR\nendin\n\ninstr 4\n    ; Complex modulation with vdelayxw\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Rich source\n    aSaw1 vco2 kAmp*0.15, 110, 0\n    aSaw2 vco2 kAmp*0.15, 110.5, 0\n    aSrc = aSaw1 + aSaw2\n    \n    ; Complex modulation\n    aLFO1 oscili 8, 0.7, -1, 0\n    aLFO2 oscili 5, 1.3, -1, 0.33\n    aDelTime = 35 + aLFO1 + aLFO2\n    \n    ; High-quality delay\n    aDelayed vdelayxw aSrc, aDelTime, 60, 32\n    \n    outs aSrc*0.6, aDelayed*0.6\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 4.5 4\ni3 9 4\ni4 13.5 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates variable delay write opcodes: vdelaywq, vdelayws", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; vdelaywq opcode: a1, a2, a3, a4 vdelaywq ain, adl, imd, iws [, ist]\n    ; Variable delay write with 4 read taps (quadruple)\n    ; ain - input to write to delay line\n    ; adl - delay time (a-rate, milliseconds)\n    ; imd - maximum delay (milliseconds)\n    ; iws - window size (4-128)\n    ; ist - skip initialization\n    ; Returns 4 taps at different positions\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Impulse train\n    aImp mpulse kAmp*0.4, 1.5\n    \n    ; Modulated delay\n    aLFO oscili 15, 0.4, -1, 0\n    aDelTime = 40 + aLFO\n    \n    ; Write and read 4 taps\n    aTap1, aTap2, aTap3, aTap4 vdelaywq aImp, aDelTime, 80, 8\n    \n    ; Mix all taps with decay\n    aMix = aImp + aTap1*0.6 + aTap2*0.4 + aTap3*0.3 + aTap4*0.2\n    \n    outs aMix, aMix\nendin\n\ninstr 2\n    ; vdelayws opcode: a1, a2 vdelayws ain, adl, imd, iws [, ist]\n    ; Variable delay write with 2 read taps (stereo)\n    ; ain - input to write\n    ; adl - delay time (a-rate, milliseconds)\n    ; imd - maximum delay (milliseconds)\n    ; iws - window size\n    ; ist - skip initialization\n    ; Returns 2 taps for stereo processing\n    \n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Pluck sound\n    aPluck pluck kAmp*0.4, 330, 330, 0, 1\n    \n    ; Delay modulation\n    aLFO oscili 10, 0.5, -1, 0\n    aDelTime = 35 + aLFO\n    \n    ; Stereo taps\n    aL, aR vdelayws aPluck, aDelTime, 60, 12\n    \n    ; Mix with dry signal\n    aOutL = aPluck*0.5 + aL*0.4\n    aOutR = aPluck*0.5 + aR*0.4\n    \n    outs aOutL, aOutR\nendin\n\ninstr 3\n    ; Feedback delay with vdelaywq\n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.25, 220, 0\n    \n    ; Initialize feedback\n    aFeedback init 0\n    \n    ; Add input and feedback\n    aInput = aSaw + aFeedback*0.5\n    \n    ; Delay with feedback\n    aLFO oscili 8, 0.6, -1, 0\n    aDelTime = 45 + aLFO\n    \n    aTap1, aTap2, aTap3, aTap4 vdelaywq aInput, aDelTime, 70, 10\n    \n    ; Use first tap for feedback\n    aFeedback = aTap1\n    \n    ; Mix outputs\n    aL = aTap2*0.4 + aTap4*0.3\n    aR = aTap3*0.4 + aTap1*0.3\n    \n    outs aL, aR\nendin\n\ninstr 4\n    ; Stereo chorus with vdelayws\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 165, 2, 0.3\n    \n    ; Two independent LFOs\n    aLFO1 oscili 6, 0.7, -1, 0\n    aLFO2 oscili 7, 0.53, -1, 0.3\n    \n    ; First chorus pair\n    aDelTime1 = 28 + aLFO1\n    aChorus1L, aChorus1R vdelayws aPulse, aDelTime1, 45, 16\n    \n    ; Second chorus pair\n    aDelTime2 = 35 + aLFO2\n    aChorus2L, aChorus2R vdelayws aPulse, aDelTime2, 50, 16\n    \n    ; Mix\n    aL = aPulse*0.3 + aChorus1L*0.25 + aChorus2L*0.2\n    aR = aPulse*0.3 + aChorus1R*0.25 + aChorus2R*0.2\n    \n    outs aL, aR\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 4.5 3\ni3 8 4\ni4 12.5 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
