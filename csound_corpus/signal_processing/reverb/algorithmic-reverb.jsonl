{"instruction": "Write a CSound instrument that demonstrates algorithmic reverb opcodes: reverb, reverb2", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; reverb opcode: ares reverb asig, krvt [, iskip]\n    ; Simple reverb with reverb time parameter\n    ; asig - input signal\n    ; krvt - reverb time (seconds)\n    ; iskip - skip initialization\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Short pluck\n    aPluck pluck kAmp*0.4, 440, 440, 0, 1\n    \n    ; Add reverb\n    kRvtTime = 2.5\n    aReverb reverb aPluck, kRvtTime\n    \n    ; Mix dry and wet\n    aMix = aPluck*0.3 + aReverb*0.7\n    \n    outs aMix, aMix\nendin\n\ninstr 2\n    ; Variable reverb time\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 330, 2, 0.4\n    aEnv expon 1, 0.2, 0.01\n    aSound = aPulse * aEnv\n    \n    ; Sweep reverb time\n    kRvtTime linseg 0.5, p3, 4.0\n    aReverb reverb aSound, kRvtTime\n    \n    outs aReverb, aReverb\nendin\n\ninstr 3\n    ; reverb2 opcode: aoutL, aoutR reverb2 asigL, asigR, ktime, khdif [, iskip]\n    ; Stereo reverb with high-frequency diffusion\n    ; asigL, asigR - stereo input\n    ; ktime - reverb time (seconds)\n    ; khdif - high-frequency diffusion (0-1, default 0.5)\n    ; iskip - skip initialization\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.3, 220, 0\n    aEnv expon 1, 0.15, 0.01\n    aSound = aSaw * aEnv\n    \n    ; Stereo reverb\n    kTime = 3.0\n    kHdif = 0.6\n    aRevL, aRevR reverb2 aSound, aSound, kTime, kHdif\n    \n    ; Mix\n    aL = aSound*0.2 + aRevL*0.8\n    aR = aSound*0.2 + aRevR*0.8\n    \n    outs aL, aR\nendin\n\ninstr 4\n    ; Dynamic reverb parameters\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Impulse train\n    aImp mpulse kAmp*0.5, 1.5\n    \n    ; Varying parameters\n    kTime linseg 1.0, p3*0.5, 4.0, p3*0.5, 1.5\n    kHdif linseg 0.3, p3, 0.9\n    \n    aRevL, aRevR reverb2 aImp, aImp, kTime, kHdif\n    \n    outs aRevL, aRevR\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 4.5 4\ni3 9 4\ni4 13.5 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the freeverb opcode for Freeverb algorithm", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; freeverb opcode: aoutL, aoutR freeverb ainL, ainR, kRoomSize, kHFDamp [, iSRate, iSkip]\n    ; Freeverb stereo reverb algorithm\n    ; ainL, ainR - stereo input\n    ; kRoomSize - room size (0-1, default 0.5)\n    ; kHFDamp - high-frequency damping (0-1, default 0.5)\n    ; iSRate - sample rate (optional)\n    ; iSkip - skip initialization\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Pluck sound\n    aPluck pluck kAmp*0.4, 330, 330, 0, 1\n    \n    ; Apply freeverb\n    kRoomSize = 0.8\n    kHFDamp = 0.5\n    \n    aRevL, aRevR freeverb aPluck, aPluck, kRoomSize, kHFDamp\n    \n    ; Mix\n    aL = aPluck*0.2 + aRevL*0.8\n    aR = aPluck*0.2 + aRevR*0.8\n    \n    outs aL, aR\nendin\n\ninstr 2\n    ; Small room\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 220, 2, 0.4\n    aEnv expon 1, 0.2, 0.01\n    aSound = aPulse * aEnv\n    \n    ; Small room, bright\n    kRoomSize = 0.3\n    kHFDamp = 0.2\n    \n    aRevL, aRevR freeverb aSound, aSound, kRoomSize, kHFDamp\n    \n    outs aRevL, aRevR\nendin\n\ninstr 3\n    ; Large hall\n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.25, 165, 0\n    aEnv expon 1, 0.15, 0.01\n    aSound = aSaw * aEnv\n    \n    ; Large room, damped\n    kRoomSize = 0.95\n    kHFDamp = 0.8\n    \n    aRevL, aRevR freeverb aSound, aSound, kRoomSize, kHFDamp\n    \n    outs aRevL, aRevR\nendin\n\ninstr 4\n    ; Dynamic room size\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Impulse\n    aImp mpulse kAmp*0.5, 2\n    \n    ; Sweep room size\n    kRoomSize linseg 0.2, p3*0.5, 0.95, p3*0.5, 0.4\n    kHFDamp = 0.6\n    \n    aRevL, aRevR freeverb aImp, aImp, kRoomSize, kHFDamp\n    \n    ; Mix\n    aL = aImp*0.3 + aRevL*0.7\n    aR = aImp*0.3 + aRevR*0.7\n    \n    outs aL, aR\nendin\n\ninstr 5\n    ; Dynamic damping\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Square wave\n    aSq vco2 kAmp*0.3, 110, 2\n    aEnv expon 1, 0.18, 0.01\n    aSound = aSq * aEnv\n    \n    ; Fixed room, varying damping\n    kRoomSize = 0.75\n    kHFDamp linseg 0.1, p3*0.5, 0.9, p3*0.5, 0.3\n    \n    aRevL, aRevR freeverb aSound, aSound, kRoomSize, kHFDamp\n    \n    outs aRevL, aRevR\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 4.5 3\ni3 8 4\ni4 12.5 5\ni5 18 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
