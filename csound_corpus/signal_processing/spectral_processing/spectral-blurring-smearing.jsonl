{"instruction": "Write a CSound instrument that demonstrates spectral blurring and smearing opcodes: pvsblur, pvsmooth, pvsmorph", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; pvsblur opcode: fsig pvsblur fsigin, kblurtime, imaxdel\n    ; Temporal spectral blurring\n    ; kblurtime - amount of blur (seconds)\n    ; imaxdel - maximum delay time for blur buffer\n    \n    aIn buzz 0.3, 220, 20, -1\n    aIn *= linseg(1, 0.05, 0.3, 0.15, 1, 0.2, 0.5, p3-0.4, 0.5)\n    \n    ; Analyze\n    fsig pvsanal aIn, 1024, 256, 1024, 1\n    \n    ; Apply increasing blur\n    kBlur linseg 0, p3*0.5, 1, p3*0.5, 0.1\n    fblurred pvsblur fsig, kBlur, 2\n    \n    ; Synthesize\n    aOut pvsynth fblurred\n    \n    outs aIn*0.4, aOut*0.6\nendin\n\ninstr 2\n    ; Heavy blur for ambient textures\n    aIn vco2 0.3, 165, 0\n    aIn *= expseg(1, 0.01, 0.5, 0.2, 1, p3-0.21, 0.3)\n    \n    ; Analyze\n    fsig pvsanal aIn, 2048, 512, 2048, 1\n    \n    ; Long blur time\n    kBlur = 2.5\n    fblurred pvsblur fsig, kBlur, 5\n    \n    ; Synthesize\n    aOut pvsynth fblurred\n    \n    outs aIn*0.3, aOut*0.7\nendin\n\ninstr 3\n    ; pvsmooth opcode: fsig pvsmooth fsigin, kacf, kfcf\n    ; Smooth spectral evolution\n    ; kacf - amplitude coefficient smoothing (0-1)\n    ; kfcf - frequency coefficient smoothing (0-1)\n    \n    aIn buzz 0.3, 330, 25, -1\n    aIn *= linseg(0.5, 0.1, 1, 0.2, 0.3, p3-0.3, 0.6)\n    \n    ; Analyze\n    fsig pvsanal aIn, 1024, 256, 1024, 1\n    \n    ; Smooth amplitudes and frequencies\n    kAcf linseg 0, p3*0.5, 0.9, p3*0.5, 0.2\n    kFcf = 0.5\n    fsmooth pvsmooth fsig, kAcf, kFcf\n    \n    ; Synthesize\n    aOut pvsynth fsmooth\n    \n    outs aIn*0.4, aOut*0.6\nendin\n\ninstr 4\n    ; pvsmorph opcode: fsig pvsmorph fsig1, fsig2, kampint, kfrqint\n    ; Morph between two spectra\n    ; kampint - amplitude interpolation (0-1)\n    ; kfrqint - frequency interpolation (0-1)\n    \n    ; Two sources\n    aIn1 oscili 0.25, 220, -1\n    aIn2 vco2 0.25, 330, 10\n    \n    ; Analyze\n    fsig1 pvsanal aIn1, 1024, 256, 1024, 1\n    fsig2 pvsanal aIn2, 1024, 256, 1024, 1\n    \n    ; Morph between them\n    kMorph linseg 0, p3*0.5, 1, p3*0.5, 0\n    fmorph pvsmorph fsig1, fsig2, kMorph, kMorph\n    \n    ; Synthesize\n    aOut pvsynth fmorph\n    \n    outs aOut, aOut\nendin\n\ninstr 5\n    ; Frequency smearing\n    ; Blur creates temporal smearing\n    \n    aIn vco2 0.3, 110, 2, 0.5\n    aIn *= linseg(1, 0.1, 0.4, 0.15, 1, p3-0.25, 0.6)\n    \n    ; Analyze\n    fsig pvsanal aIn, 1024, 256, 1024, 1\n    \n    ; Extreme blur for smearing effect\n    fsmeared pvsblur fsig, 1.5, 3\n    \n    ; Also smooth\n    fsmooth pvsmooth fsmeared, 0.7, 0.8\n    \n    ; Synthesize\n    aOut pvsynth fsmooth\n    \n    outs aIn*0.3, aOut*0.7\nendin\n\ninstr 6\n    ; Spectral freezing with blur\n    ; Combination of freeze and blur for textural effects\n    \n    aIn buzz 0.3, 165, 30, -1\n    \n    ; Analyze\n    fsig pvsanal aIn, 1024, 256, 1024, 1\n    \n    ; Freeze spectrum periodically\n    kFreeze linseg 0, p3*0.25, 0, 0.01, 1, p3*0.5, 1, 0.01, 0, p3*0.25-0.02, 0\n    ffrz pvsfreeze fsig, kFreeze, kFreeze\n    \n    ; Blur the frozen spectrum\n    fblurred pvsblur ffrz, 0.8, 2\n    \n    ; Synthesize\n    aOut pvsynth fblurred\n    \n    outs aIn*0.3, aOut*0.7\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 5 5\ni3 11 4\ni4 16 4\ni5 21 4\ni6 26 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
