{"instruction": "Write a CSound instrument that demonstrates flanging opcodes: flanger, wguide1, wguide2", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; flanger opcode: ares flanger asig, adel, kfeedback [, imaxd]\n    ; Classic flanger effect\n    ; asig - input signal\n    ; adel - delay time (a-rate, seconds)\n    ; kfeedback - feedback amount (0-1)\n    ; imaxd - maximum delay time (optional)\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.3, 220, 0\n    \n    ; LFO for flanger\n    kLFO oscili 0.003, 0.4, -1, 0\n    aDelTime = 0.005 + kLFO\n    \n    ; Apply flanger\n    kFeedback = 0.7\n    aFlange flanger aSaw, aDelTime, kFeedback, 0.01\n    \n    outs aFlange, aFlange\nendin\n\ninstr 2\n    ; Jet flanger (negative feedback)\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Pulse wave\n    aPulse vco2 kAmp*0.3, 165, 2, 0.4\n    \n    ; Fast LFO\n    kLFO oscili 0.004, 1.2, -1, 0\n    aDelTime = 0.002 + kLFO\n    \n    ; Negative feedback for jet effect\n    kFeedback = -0.8\n    aFlange flanger aPulse, aDelTime, kFeedback, 0.008\n    \n    outs aFlange, aFlange\nendin\n\ninstr 3\n    ; wguide1 opcode: ares wguide1 asig, xfreq, kcutoff, kfeedback\n    ; Waveguide-based flanger/chorus\n    ; asig - input signal\n    ; xfreq - frequency (Hz, can be k or a-rate)\n    ; kcutoff - lowpass cutoff (Hz)\n    ; kfeedback - feedback amount\n    \n    kAmp madsr 0.02, 0.12, 0.6, 0.3\n    \n    ; Square wave\n    aSq vco2 kAmp*0.3, 110, 2\n    \n    ; Varying frequency\n    kFreq linseg 100, p3*0.5, 800, p3*0.5, 200\n    kCutoff = 3000\n    kFeedback = 0.6\n    \n    aWG wguide1 aSq, kFreq, kCutoff, kFeedback\n    \n    outs aWG, aWG\nendin\n\ninstr 4\n    ; wguide2 opcode: ares wguide2 asig, xfreq, kcutoff, kfeedback\n    ; Similar to wguide1 but different algorithm\n    \n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Sawtooth\n    aSaw vco2 kAmp*0.25, 165, 0\n    \n    ; LFO-modulated frequency\n    kLFO oscili 200, 0.3, -1, 0\n    kFreq = 400 + kLFO\n    kCutoff = 4000\n    kFeedback = 0.7\n    \n    aWG wguide2 aSaw, kFreq, kCutoff, kFeedback\n    \n    outs aWG, aWG\nendin\n\ninstr 5\n    ; Stereo flanger\n    kAmp madsr 0.015, 0.08, 0.65, 0.25\n    \n    ; Rich source\n    aSaw1 vco2 kAmp*0.15, 110, 0\n    aSaw2 vco2 kAmp*0.15, 110.3, 0\n    aSrc = aSaw1 + aSaw2\n    \n    ; Different LFOs for L/R\n    kLFO1 oscili 0.004, 0.5, -1, 0\n    kLFO2 oscili 0.003, 0.37, -1, 0.3\n    \n    aDelL = 0.004 + kLFO1\n    aDelR = 0.005 + kLFO2\n    \n    kFeedback = 0.65\n    aFlangeL flanger aSrc, aDelL, kFeedback, 0.012\n    aFlangeR flanger aSrc, aDelR, kFeedback, 0.012\n    \n    outs aFlangeL, aFlangeR\nendin\n\n</CsInstruments>\n<CsScore>\n\ni1 0 4\ni2 4.5 4\ni3 9 4\ni4 13.5 4\ni5 18 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
