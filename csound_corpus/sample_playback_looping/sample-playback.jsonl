{"instruction": "Write a CSound instrument that demonstrates basic sample playback with loscil", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Load a sample (you would use actual file path)\n; giSample ftgen 1, 0, 0, 1, \"sample.wav\", 0, 0, 0\n; Using a generated waveform for demonstration\ngiSample ftgen 1, 0, 65536, 10, 1, 0.5, 0.3, 0.2\n\ninstr 1\n    ; loscil opcode: ar1 [, ar2] loscil xamp, kcps, ifn [, ibas] [, imod1] [, ibeg] [, iend]\n    ; loscil reads a sample with pitch shifting\n    ; xamp - amplitude\n    ; kcps - playback frequency\n    ; ifn - function table number\n    ; ibas - base frequency (original sample pitch)\n    ; imod1 - loop mode (0=no loop, 1=forward loop, 2=backward loop, 3=bidirectional)\n    \n    iAmp = 0.5\n    iFreq = p4\n    iBasFreq = 440  ; Original sample pitch\n    \n    ; Basic playback\n    aSamp loscil iAmp, iFreq, giSample, iBasFreq\n    \n    outs aSamp, aSamp\nendin\n\ninstr 2\n    ; Looping sample\n    iAmp = 0.5\n    iFreq = p4\n    iBasFreq = 440\n    \n    ; Loop mode 1 (forward loop)\n    aSamp loscil iAmp, iFreq, giSample, iBasFreq, 1\n    \n    outs aSamp, aSamp\nendin\n\ninstr 3\n    ; Pitch sweep\n    iAmp = 0.5\n    iBasFreq = 440\n    \n    ; Frequency changes\n    kFreq expseg 220, p3, 880\n    \n    aSamp loscil iAmp, kFreq, giSample, iBasFreq\n    \n    outs aSamp, aSamp\nendin\n\ninstr 4\n    ; lphasor opcode: ares lphasor xtrns [, ilps] [, ilpe] [, imode] [, istrt] [, istor]\n    ; lphasor generates normalized loop phase (0-1)\n    ; xtrns - transposition ratio\n    ; ilps - loop start (samples)\n    ; ilpe - loop end (samples)\n    ; imode - loop mode\n    \n    iAmp = 0.5\n    iRatio = p4 / 440  ; Transposition ratio\n    \n    ; Generate phase\n    aPhase lphasor iRatio\n    \n    ; Read table with phase\n    aSamp tablei aPhase * ftlen(giSample), giSample\n    \n    outs aSamp*iAmp, aSamp*iAmp\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic sample\ni1 0 2 440\ni1 2.5 2 523\n\n; Play looping\ni2 5.5 3 330\n\n; Play pitch sweep\ni3 9.5 3 0\n\n; Play with lphasor\ni4 13.5 2 392\ni4 15.5 2 294\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates loscil3 for high-quality sample playback", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Sample tables\ngiSample1 ftgen 1, 0, 65536, 10, 1, 0.5, 0.3, 0.2, 0.15\ngiSample2 ftgen 2, 0, 65536, 10, 1, 0, 0.3, 0, 0.2, 0, 0.14\n\ninstr 1\n    ; loscil3 opcode: ar1 [, ar2] loscil3 xamp, kcps, ifn [, ibas] [, imod1] [, ibeg] [, iend]\n    ; loscil3 is like loscil but uses cubic interpolation for better quality\n    ; xamp - amplitude\n    ; kcps - playback frequency\n    ; ifn - function table number\n    ; ibas - base frequency\n    \n    iAmp = 0.5\n    iFreq = p4\n    iBasFreq = 440\n    \n    ; High-quality playback with cubic interpolation\n    aSamp loscil3 iAmp, iFreq, giSample1, iBasFreq\n    \n    outs aSamp, aSamp\nendin\n\ninstr 2\n    ; Extreme pitch shifting\n    iAmp = 0.5\n    iBasFreq = 440\n    \n    ; Very low pitch\n    iFreq = p4\n    \n    aSamp loscil3 iAmp, iFreq, giSample1, iBasFreq\n    \n    outs aSamp, aSamp\nendin\n\ninstr 3\n    ; Vibrato on sample\n    iAmp = 0.5\n    iFreq = p4\n    iBasFreq = 440\n    \n    ; Add vibrato\n    kVib poscil 8, 5, giSample2\n    kFreq = iFreq + kVib\n    \n    aSamp loscil3 iAmp, kFreq, giSample1, iBasFreq\n    \n    outs aSamp, aSamp\nendin\n\ninstr 4\n    ; Glissando\n    iAmp = 0.5\n    iStart = p4\n    iEnd = p5\n    iBasFreq = 440\n    \n    ; Smooth pitch slide\n    kFreq linseg iStart, p3, iEnd\n    \n    aSamp loscil3 iAmp, kFreq, giSample1, iBasFreq\n    \n    outs aSamp, aSamp\nendin\n\ninstr 5\n    ; Looped playback with envelope\n    iFreq = p4\n    iBasFreq = 440\n    \n    ; ADSR envelope\n    kEnv madsr 0.1, 0.2, 0.7, 0.3\n    \n    ; Looping\n    aSamp loscil3 kEnv, iFreq, giSample1, iBasFreq, 1\n    \n    outs aSamp, aSamp\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play high quality\ni1 0 2 440\ni1 2.5 2 523\n\n; Play extreme pitch shift\ni2 5.5 2 110\ni2 7.5 2 880\n\n; Play with vibrato\ni3 10.5 3 330\n\n; Play glissando\n; Format: start dur freq_start freq_end\ni4 14.5 2 220 660\ni4 16.5 2 660 220\n\n; Play looped with envelope\ni5 19.5 3 392\ni5 22.5 3 294\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates flooper for flexible sample looping", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Sample table\ngiSample ftgen 1, 0, 131072, 10, 1, 0.5, 0.3, 0.25, 0.2, 0.16, 0.14, 0.12\n\ninstr 1\n    ; flooper opcode: asig flooper kamp, kpitch, kloopstart, kloopend, kcrossfade, ifn [, istartpos, ioffset, iskip]\n    ; flooper provides crossfaded looping sample playback\n    ; kamp - amplitude\n    ; kpitch - pitch transposition (1=original, 2=octave up, 0.5=octave down)\n    ; kloopstart - loop start point in seconds\n    ; kloopend - loop end point in seconds\n    ; kcrossfade - crossfade duration in seconds\n    ; ifn - function table number\n    \n    iAmp = 0.5\n    kPitch = 1\n    kLoopStart = 0\n    kLoopEnd = 1\n    kXFade = 0.05\n    \n    ; Basic looping\n    aSamp flooper iAmp, kPitch, kLoopStart, kLoopEnd, kXFade, giSample\n    \n    outs aSamp, aSamp\nendin\n\ninstr 2\n    ; Variable pitch\n    iAmp = 0.5\n    kLoopStart = 0\n    kLoopEnd = 1\n    kXFade = 0.05\n    \n    ; Pitch changes\n    kPitch linseg 0.5, p3, 2\n    \n    aSamp flooper iAmp, kPitch, kLoopStart, kLoopEnd, kXFade, giSample\n    \n    outs aSamp, aSamp\nendin\n\ninstr 3\n    ; Moving loop points\n    iAmp = 0.5\n    kPitch = 1\n    kXFade = 0.02\n    \n    ; Loop points shift\n    kLoopStart linseg 0, p3, 0.5\n    kLoopEnd linseg 1, p3, 0.7\n    \n    aSamp flooper iAmp, kPitch, kLoopStart, kLoopEnd, kXFade, giSample\n    \n    outs aSamp, aSamp\nendin\n\ninstr 4\n    ; Granular-like texture\n    iAmp = 0.4\n    kXFade = 0.01\n    \n    ; Rapid pitch variation\n    kPitch randomi 0.8, 1.2, 5\n    \n    ; Short loop\n    kLoopStart = 0.1\n    kLoopEnd = 0.3\n    \n    aSamp flooper iAmp, kPitch, kLoopStart, kLoopEnd, kXFade, giSample\n    \n    outs aSamp, aSamp\nendin\n\ninstr 5\n    ; flooper2 opcode: asig flooper2 kamp, kpitch, kloopstart, kloopend, kcrossfade, ifn [, istartpos, ioffset, iskip]\n    ; flooper2 is similar to flooper with different crossfading algorithm\n    \n    iAmp = 0.5\n    kPitch = p4 / 440\n    kLoopStart = 0\n    kLoopEnd = 0.8\n    kXFade = 0.03\n    \n    aSamp flooper2 iAmp, kPitch, kLoopStart, kLoopEnd, kXFade, giSample\n    \n    outs aSamp, aSamp\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic loop\ni1 0 3\n\n; Play variable pitch\ni2 4 4\n\n; Play moving loop points\ni3 9 4\n\n; Play granular texture\ni4 14 4\n\n; Play flooper2\ni5 19 2 440\ni5 21 2 330\ni5 23 2 523\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced sample playback techniques", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Multiple samples\ngiSample1 ftgen 1, 0, 65536, 10, 1, 0.5, 0.3, 0.2\ngiSample2 ftgen 2, 0, 65536, 10, 1, 0, 0.3, 0, 0.2\ngiSine ftgen 3, 0, 16384, 10, 1\n\ninstr 1\n    ; Time-stretching with pitch preservation\n    iAmp = 0.5\n    iFreq = p4\n    iBasFreq = 440\n    iStretch = p5\n    \n    ; Read sample slower (time-stretch) but maintain pitch\n    aSamp loscil3 iAmp, iFreq, giSample1, iBasFreq\n    \n    outs aSamp, aSamp\nendin\n\ninstr 2\n    ; Scrubbing effect\n    iAmp = 0.5\n    iBasFreq = 440\n    \n    ; LFO controls playback speed\n    kSpeed poscil 2, 0.5, giSine\n    kFreq = iBasFreq * (1 + kSpeed)\n    \n    aSamp loscil3 iAmp, kFreq, giSample1, iBasFreq\n    \n    outs aSamp, aSamp\nendin\n\ninstr 3\n    ; Sample layering\n    iAmp = 0.35\n    iFreq = p4\n    iBasFreq = 440\n    \n    ; Layer two samples\n    aSamp1 loscil3 iAmp, iFreq, giSample1, iBasFreq\n    aSamp2 loscil3 iAmp*0.7, iFreq*1.005, giSample2, iBasFreq\n    \n    aMix = aSamp1 + aSamp2\n    \n    outs aMix, aMix\nendin\n\ninstr 4\n    ; Reverse playback\n    iAmp = 0.5\n    iBasFreq = 440\n    \n    ; Negative frequency for reverse\n    iFreq = -p4\n    \n    aSamp loscil iAmp, iFreq, giSample1, iBasFreq\n    \n    outs aSamp, aSamp\nendin\n\ninstr 5\n    ; Granular sampler with lphasor\n    iAmp = 0.3\n    iFreq = p4\n    \n    ; Multiple grain playheads\n    aPhase1 lphasor iFreq/440\n    aPhase2 lphasor iFreq/440, 0, ftlen(giSample1), 0, ftlen(giSample1)*0.25\n    aPhase3 lphasor iFreq/440, 0, ftlen(giSample1), 0, ftlen(giSample1)*0.5\n    \n    ; Read at different positions\n    aSamp1 tablei aPhase1, giSample1\n    aSamp2 tablei aPhase2, giSample1\n    aSamp3 tablei aPhase3, giSample1\n    \n    ; Window each grain\n    aWin1 poscil 0.4, iFreq/440, giSine\n    aWin2 poscil 0.3, iFreq/440, giSine, 0.25\n    aWin3 poscil 0.3, iFreq/440, giSine, 0.5\n    \n    aMix = (aSamp1*aWin1 + aSamp2*aWin2 + aSamp3*aWin3) * iAmp\n    \n    outs aMix, aMix\nendin\n\ninstr 6\n    ; Sample and hold scanning\n    iAmp = 0.4\n    \n    ; Random position jumps\n    kPos randomh 0, 1, 8\n    \n    ; Calculate sample position\n    iLen = ftlen(giSample1)\n    kSampPos = kPos * iLen\n    \n    ; Read at position\n    aSamp table kSampPos, giSample1\n    \n    outs aSamp*iAmp, aSamp*iAmp\nendin\n\ninstr 7\n    ; Formant-preserving pitch shift\n    iAmp = 0.4\n    iFreq = p4\n    iTargetFreq = p5\n    iBasFreq = 440\n    \n    ; Play at target pitch\n    aSamp loscil3 1, iTargetFreq, giSample1, iBasFreq\n    \n    ; Formant shift by filtering\n    kRatio = iFreq / iTargetFreq\n    kFormant1 = 800 * kRatio\n    kFormant2 = 1200 * kRatio\n    \n    aForm1 butterbp aSamp, kFormant1, kFormant1*0.1\n    aForm2 butterbp aSamp, kFormant2, kFormant2*0.1\n    \n    aMix = (aForm1 + aForm2) * iAmp * 2\n    \n    outs aMix, aMix\nendin\n\ninstr 8\n    ; Multi-tap delay sampler\n    iAmp = 0.3\n    iFreq = p4\n    iBasFreq = 440\n    \n    ; Main sample\n    aSamp loscil3 iAmp, iFreq, giSample1, iBasFreq\n    \n    ; Multiple delayed taps\n    aTap1 delay aSamp, 0.1\n    aTap2 delay aSamp, 0.2\n    aTap3 delay aSamp, 0.3\n    \n    ; Stereo spread\n    aLeft = aSamp + aTap1*0.6 + aTap3*0.3\n    aRight = aSamp + aTap2*0.6 + aTap3*0.3\n    \n    outs aLeft, aRight\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play time-stretch\n; Format: start dur freq stretch\ni1 0 3 440 1\ni1 3.5 3 440 1.5\n\n; Play scrubbing\ni2 7.5 4 0\n\n; Play layered\ni3 12.5 2 330\ni3 14.5 2 523\n\n; Play reverse\ni4 17.5 2 440\n\n; Play granular\ni5 20.5 3 220\n\n; Play sample and hold\ni6 24.5 3 0\n\n; Play formant-preserving\n; Format: start dur base_freq target_freq\ni7 28.5 2 440 220\ni7 30.5 2 440 880\n\n; Play multi-tap\ni8 33.5 3 392\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
