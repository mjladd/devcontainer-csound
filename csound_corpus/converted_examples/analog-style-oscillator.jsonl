{"instruction": "Write a Csound instrument for idur   =         p3            ; Duration using snare drum and analog-style oscillator and Moog VCF filter", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac -d\n</CsOptions>\n<CsInstruments>\n; Converted from newsnare.orc and newsnare.sco\n; Original files preserved in same directory\n\nsr      =        44100                      ; Sample rate\nkr      =        44100                      ; Kontrol rate\nksmps   =        1                          ; Samples/Kontrol period\nnchnls  =        2                          ; Normal stereo\n\n\n;---------------------------------------------------------\n; Electric Snare\n;---------------------------------------------------------\n       instr     25\n\nidur   =         p3            ; Duration\niamp   =         p4            ; Amplitude\nifqc   =         cpspch(p5)    ; Pitch to frequency\nipanl  =         sqrt(p6)      ; Pan left\nipanr  =         sqrt(1-p6)    ; Pan right\nirez   =         .9+p7*.1      ; Tone\nispdec =         p8            ; Spring decay\nispton =         p9            ; Spring tone\nispmix =         p10           ; Spring mix\nispq   =         p11           ; Spring Q\n\nkdclk  linseg    1, idur-.002, 1, .002, 0                ; Declick envelope\naamp   linseg    1, .2/ifqc, 1, .2/ifqc, 0, idur-.002, 0 ; An amplitude pulse\naampr  expseg    .1, .002, 1, .2*ispdec, .005            ; Noise envelope\n\narnd   rand      1, .5, 1                     ; High quality noise\narnd    =        (arnd-.5)*2*aampr            ; Make it positive and negative\n\nahp1    rezzy    arnd, 2700*ispton, 5*ispq, 1 ; High pass rezzy based at 2700\nahp2    butterbp arnd, 2000*ispton, 500/ispq  ; Generate an undertone\nahp3    butterbp arnd, 5400*ispton, 500/ispq  ; Generate an overtone\nahp     pareq    ahp1+ahp2*.7+ahp3*.3, 15000, .1, .707, 2 ; Attenuate the highs a bit\n\naosc1   vco      1, 400, 2, 1, 1, 1 ; Use a pulse of the vco to stimulate the filters\naosc    =        -aosc1*aamp        ; Multiply by the envelope pulse\naosc2   butterlp aosc, 12000        ; Lowpass at 12K to take the edge off\n\nasig1   moogvcf  aosc,    ifqc, .9*irez      ; Moof filter with high resonance for basic drum tone\nasig2   moogvcf  aosc*.5, ifqc*2.1, .75*irez ; Sweeten with an overtone\n\n; Mix drum tones, pulse and noise signal & declick\naout   =         (asig1+asig2+aosc2*.1+ahp*ispmix)*iamp*kdclk*2\n\n       outs      aout*ipanl, aout*ipanr              ; Output the sound\n\n       endin\n\n</CsInstruments>\n<CsScore>\nf1 0 65536 10 1\n\n; Electric Snare\n;    Sta     Dur  Amp    Pitch  Pan  HitQ  SprDec SprTone SprMix SprQ\ni25  0.000   .25  25000  7.02   .5   1.3   1      1       1      1\ni25  +       .    .      .      .    .     .5     2       .      .\ni25  .       .    .      .      .    .     2      .5      .      .\ni25  .       .    .      .      .    .     1      1       .      2\ni25  .       .    .      .      .    .     .      .       .      0.5\ni25  .       .    .      .      .    .     .      .       .      1.5\ni25  .       .    .      .      .    .     2      .5      .      1\ni25  .       .    .      .      .    .     1      1       .      .\ni25  .       .    .      .      .    .     .      .       .      .\ni25  .       .    .      7.00   .    1.5   .      .       .      .\ns\n;    Sta     Dur   Amp    Pitch  Pan  HitQ  SprDec SprTone SprMix SprQ\ni25  0.000   .125  25000  7.02   0    1.3   .5     1       .8     1\ni25  +       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .0625 .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .0625 .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .     .      .      <    .     .      .       .      .\ni25  .       .25   .      .      1    1.5   2      .       .8     .\n\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a Csound instrument for idur   =         p3            ; Duration using analog-style oscillator and Butterworth lowpass filter and Butterworth bandpass filter", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac -d\n</CsOptions>\n<CsInstruments>\n; Converted from newcymbal.orc and newcymbal.sco\n; Original files preserved in same directory\n\nsr      =        44100                      ; Sample rate\nkr      =        44100                      ; Kontrol rate\nksmps   =        1                          ; Samples/Kontrol period\nnchnls  =        2                          ; Normal stereo\n\n; Mikelson Cymbal ORCHESTRA\n\n;---------------------------------------------------------\n; Cymbal\n;---------------------------------------------------------\n       instr     17\n\nidur   =         p3            ; Duration\niamp   =         p4/(1+sqrt(p3))*.3*sqrt(p8) ; Amplitude\nifqc   =         cpspch(p5)\nipanl  =         sqrt(p6)      ; Pan left\nipanr  =         sqrt(1-p6)    ; Pan right\niqfqc  =         p7            ; Primary resonance\niqq    =         p8            ; Resonance Q\niqact  =         p9*.02        ; Resonance accent\niotfqc =         p10           ; Overtone frequency\niotq   =         p10*.25       ; Overtone bandwidth\niotact =         .02           ; Overtone accent\nilpfco =         p10*1.25      ; Lowpass\niaact  =         p11*.001      ; Amplitude accent\nipbend =         p12\niptim  =         p13\n\nadclck linseg    0, .002, 1, idur-.004, 1, .002, 0 ; Declick envelope\nkamp   expseg    1, idur, iaact\nkamp2  expseg    2, idur, iqact\nkamp3  expseg    1, idur, iotact\nkptch  expseg    ipbend, iptim, 1, idur-iptim, 1\n\narnd   rand      kamp2\n\nasig1  vco       1, ifqc*kptch,     2, .5, 1, 2/ifqc     ; Genrate impulse\nasig2  vco       1, ifqc*1.3*kptch, 2, .5, 1, 2/ifqc     ; Genrate impulse\n;asig3  vco       1, ifqc*.573, 2, .5, 1, 2/ifqc     ; Genrate impulse\nasig   =         (asig1*asig2*(1+arnd))*iamp*adclck*kamp\n\naout1  rezzy    asig, iqfqc, iqq, 1  ; Apply amp envelope and declick\naout2  butterbp aout1*kamp3, iotfqc, iotq   ; Apply amp envelope and declick\naout   butterlp aout1+aout2*4, ilpfco       ; Apply amp envelope and declick\n\n       outs      aout*ipanl, aout*ipanr            ; Output the sound\n\n       endin\n\n</CsInstruments>\n<CsScore>\n; SCORE\nf1 0 65536 10 1\n\n;    Sta   Dur   Amp    Pitch  Pan  QFqc  QQ  QAcct  OTFqc  Accent PBend PBTime\ni17  0.0   0.15  30000  10.00  .5   7000  15  1      14000  1      1.02  .05\ni17  .5    0.15  30000  10.00  .5   .     .   .      .      .      .     .\ni17  1     0.15  30000  10.00  .5   .     .   .      .      .      .     .\ni17  1.5   0.15  30000  10.00  .5   .     .   .      .      .      .     .\ni17  2     2.0   30000  10.00  .5   .     .   .      .      .      .     .\ni17  +     2.0   30000  9.00   .5   .     .   .      .      .      .     .\ns\n\n;    Sta   Dur   Amp    Pitch  Pan  QFqc  QQ  QAcct  OTFqc\ni17  0.0   0.15  20000  10.00  .5   7000  35  1      14000  1      1.02  .05\ni17  .5    0.15  30000  10.00  .5   .     15  .      .      .      .     .\ni17  1     0.15  30000  10.00  .5   .     5   .      .      .      .     .\ni17  1.5   0.15  30000  10.00  .5   .     2   .      .      .      .     .\ni17  2     1.0   25000  10.00  .5   .     25  .      .      .      .     .\ni17  +     1.0   30000  10.00  .5   .     5   .      .      .      .     .\ns\n\n;    Sta   Dur   Amp    Pitch  Pan  QFqc  QQ  QAcct  OTFqc\ni17  0.0   0.15  30000  6.00  .5   7000  15  1      14000  1      1.02  .05\ni17  .5    0.15  30000  6.00  .5   6000  .   .      .      .      .     .\ni17  1     0.15  30000  5.00  .5   5000  .   .      .      .      .     .\ni17  1.5   0.15  30000  8.00  .5   8000  .   .      .      .      .     .\ni17  2     2.0   30000  5.00  .5   5000  .   .      10000  10     .     .\ni17  +     2.0   30000  4.00  .5   4000  .   .      .      .      .     .\ni17  .     2.0   30000  3.00  .5   4000  15  .      .      .      .     .\ni17  .     2.0   30000  4.00  .5   2000  .   100    5000   100    .     .\ni17  .     2.0   20000  3.00  .5   4000  .   .      .      .      .     .\ni17  .     2.0   30000  3.00  .5   2000  .   10     3000   10     .     .\ni17  .     4.0   30000  3.00  .5   2000  .   .      .      .      .     .\ni17  .     4.0   15000  2.00  .5   4500  .   20     10000   200   1.5   .5\ns\n\n;    Sta   Dur   Amp    Pitch  Pan  QFqc  QQ  QAcct  OTFqc\ni17  0.0   0.15  30000  6.00  .5   7000  15  1      14000  1      1.02  .05\ni17  .5    0.15  30000  6.00  .5   6000  .   .      .      .      .     .\ni17  1     0.15  30000  5.00  .5   5000  .   .      .      .      .     .\ni17  1.5   0.15  30000  8.00  .5   8000  .   .      .      .      .     .\ni17  2     2.0   30000  9.00  .5   5000  .   .      .      .      .     .\ni17  +     2.0   30000  9.00  .5   4000  .   .      .      .      .     .\ni17  .     2.0   40000  10.00  .5  4000  15  10     .      10     .     .\ni17  .     2.0   40000  10.00  .5  2000  15  1      .      1      .     .\ni17  .     2.0   40000  10.00  .5  3000  15  10     .      10     .8    .2\ni17  .     2.0   40000  11.00  .5  1500  15  .      .      .      1.04  .\ns\n\n;    Sta   Dur   Amp    Pitch  Pan  QFqc  QQ  QAcct   OTFqc\ni17  0.0   0.15  30000  10.00  .5   8000  10  1      14000  1      1.02  .05\ni17  +     0.15  30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.15  30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.15  30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.15  30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.15  30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     0.1   30000  10.00  .5   <     .   .      .      .      .     .\ni17  .     1.0   30000  10.00  .5   6000  .   .      .      .      .     .\n\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a Csound instrument for insnd     =         p4 using analog-style oscillator and Moog VCF filter and Butterworth lowpass filter", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac -d\n</CsOptions>\n<CsInstruments>\n; Converted from nestedap.orc and nestedap.sco\n; Original files preserved in same directory\n\nsr        =         44100\nkr        =         4410\nksmps     =         10\nnchnls    =         2\n\n\n\n          instr     5\n\ninsnd     =         p4\n\ngasig     diskin    insnd, 1\n\n          endin\n\n          instr     10\n\nimax      =          1\nidel1     =          p4\nigain1    =         p5\nidel2     =         p6\nigain2    =         p7\nidel3     =         p8\nigain3    =         p9\nidel4     =         p10\nigain4    =         p11\nidel5     =         p12\nigain5    =         p13\nidel6     =         p14\nigain6    =         p15\n\nafdbk     init      0\n\naout1     nestedap  gasig+afdbk*.4, 3, imax, idel1, igain1, idel2, igain2, idel3, igain3\naout2     nestedap  aout1, 2, imax, idel4, igain4, idel5, igain5\naout      nestedap  aout2, 1, imax, idel6, igain6\nafdbk     butterlp  aout, 1000\n\n          outs      gasig+(aout+aout1)/2, gasig-(aout+aout1)/2\ngasig     =         0\n\n\n          endin\n\n          instr     20\n\nksv       =         p4\nkrv       =         p5\nkbv       =         p6\n\nax, ay, az lorenz ksv, krv, kbv, .01, .6, .6, .6, 1\n\n          outs      ax*1000, ay*1000\n\n          endin\n\n          instr     30\n\niamp      =         p4\nifqc      =         cpspch(p5)\n\nkfco      linseg    300, .1, 2000, .2, 700, p3-.3, 600\n\nax        vco       1, ifqc, 2, 1, 1, 2/ifqc\nay        moogvcf   ax, kfco, 2, 2\n\n          outs      ay*iamp, ay*iamp\n\n          endin\n\n\n\n</CsInstruments>\n<CsScore>\nf1 0 8192 10 1\n\n; DISKIN\n;   Sta  Dur  Soundin\n;i5  0    3    1\n\n; REVERB\n;   Sta  Dur  Del1 Gain1 Del2 Gain2  Del3 Gain3 Del4 Gain4 Del5 Gain5 Del6 Gain6\n;i10 0    4    97   .11   23   .07    43   .09   72   .2    53   .2    119  .3\n\n; LORENZ SYSTEM\n;   Sta  Dur  S   R  V\n;i20 0    1    10  28  2.667\n\n; MOOGVCF WITH DISTORTION\ni30  0   1   20000   7.00\n\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a Csound instrument for idur      =         p3 using test/demonstration and analog-style oscillator and buzz/pulse generator", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac -d\n</CsOptions>\n<CsInstruments>\n; Converted from test2.orc and test2.sco\n; Original files preserved in same directory\n\nsr        =         44100\nkr        =         4410\nksmps     =         10\nnchnls    =         2\n\n;---------------------------------------------------------------------------------\n; A SET OF BAND LIMITED INSTRUMENTS WITH RESONANT FILTER\n; BY HANS MIKELSON 11/20/97\n; PARTIALLY DERIVED FROM CODE BY JOSEP MÂª COMAJUNCOSAS-CSOUND & TIM STILSON-CCRMA\n;---------------------------------------------------------------------------------\n          zakinit   30, 30\n\n;---------------------------------------------------------------------------------\n; SAW WITH MIKELSON REZZY FILTER\n;---------------------------------------------------------------------------------\n          instr     10\n\nidur      =         p3\niamp      =         p4\nifqc      =         cpspch(p5)*1.33\nifco      =         p6\nia2       =         1\nkrez      init      p7\n\nkfco      expseg    100+.01*ifco, .2*idur, ifco+100, .5*idur, ifco*.1+100, .3*idur, .001*ifco+100\nkamp      linseg    0, .002, iamp, .2, iamp*.8, p3-.222, iamp*.5, .02, 0\n\naxn       vco       ia2, ifqc, 1, .5, 1, 1\nayn       rezzy     axn,  kfco, krez\n\n          outs      ayn*kamp, ayn*kamp\n          endin\n\n;---------------------------------------------------------------------------------\n; SAW WITH STILSON/SMITH/COMAJUNCOSAS MOOG FILTER\n;---------------------------------------------------------------------------------\n          instr     11\n\nidur      =         p3\niamp      =         p4\nifqc      =         cpspch(p5)\nifco      =         p6\nkrez      init      p7\n\nkfco      linseg    100+.01*ifco, .2*idur, ifco+100, .5*idur, ifco*.1+100, .3*idur, .01*ifco+100\n\napulse1   buzz      1,ifqc, sr/2/ifqc, 1          ; AVOID ALIASING\nasaw      integ     apulse1\nax        =         (asaw-.5)*2\nayn       moogvcf   ax, kfco, krez, 1\n\n          outs      ayn*iamp, ayn*iamp\n          endin\n\n;---------------------------------------------------------------------------------\n; SAW WITH CHAMBERLIN REZZY FILTER\n;---------------------------------------------------------------------------------\n          instr     14\n\nidur      =         p3\niamp      =         p4\nifqc      =         cpspch(p5)\nifco      =         p6\nkrez      init      p7\n\nkfco      expseg    100+.01*ifco, .2*idur, ifco+100, .5*idur, ifco*.1+100, .3*idur, .001*ifco+100\n\napulse1   buzz      1,ifqc, sr/2/ifqc, 1          ; AVOID ALIASING\nasaw      integ     apulse1\naxn       =         asaw-.5\n\nkfcon     =         2*3.14159265*kfco/sr\n\nkalpha    =         1-2*krez*cos(kfcon)*cos(kfcon)+krez*krez*cos(2*kfcon)\nkbeta     =         krez*krez*sin(2*kfcon)-2*krez*cos(kfcon)*sin(kfcon)\nkgama     =         1+cos(kfcon)\nkm1       =         kalpha*kgama+kbeta*sin(kfcon)\nkm2       =         kalpha*kgama-kbeta*sin(kfcon)\nkden      =         sqrt(km1*km1+km2*km2)\n\nkb0       =         1.5*(kalpha*kalpha+kbeta*kbeta)/kden\nkb1       =         kb0\nkb2       =         0\n\nka0       =         1\nka1       =         -2*krez*cos(kfcon)\nka2       =         krez*krez\n\nayn       biquad    axn, kb0, kb1, kb2, ka0, ka1, ka2\n\n          outs      ayn*iamp/2, ayn*iamp/2\n          endin\n\n\n;---------------------------------------------------------------------------------\n; SAW WITH MIKELSON REZZY FILTER\n;---------------------------------------------------------------------------------\n          instr     15\n\nidur      =         p3\niamp      =         p4\nifqc      =         cpspch(p5)*1.33\nifco      =         p6\nia2       =         1\nkrez      init      p7\n\nkfco      expseg    100+.01*ifco, .2*idur, ifco+100, .5*idur, ifco*.1+100, .3*idur, .001*ifco+100\nkamp    linseg  0, .002, iamp, .2, iamp*.8, p3-.222, iamp*.5, .02, 0\n\n; axn     moogvco   ia2, ifqc, 1, 1\napulse    buzz      1,ifqc, sr/2/ifqc, 1               ; AVOID ALIASING\nasaw      biquad    apulse, 1, 0, 0, 1, -.999, 0       ; BIQUAD USED AS A LEAKY INTEGRATOR\n\n; SET UP FOR HIGH PASS VERSION OF REZZY.\nkt        =         .75/sqrt(1+krez)\nkc        =         sr/kfco/2/3.14159265\nkq        =         krez/(1+sqrt(sqrt(1/kc)))\nkb0       =         (kc/kq+kc*kc)*kt\nkb1       =         (-kc/kq-2*kc*kc)*kt\nkb2       =         kc*kc*kt\nka0       =         kc/kq+kc*kc\nka1       =         -kc/kq-2*kc*kc+1\nka2       =         kc*kc\n\nayn       biquad    asaw,  kb0, kb1, kb2, ka0, ka1, ka2     ; BIQUAD USED FOR HIGH PASS REZZY\n\n          outs      ayn*kamp, ayn*kamp\n          endin\n\n\n</CsInstruments>\n<CsScore>\nf1 0 16384 10 1                               ; Sine\n\n; SAW MIKELSON\n;    Sta  Dur  Amp    Pitch  Fco   Rez\n;i15  0.0  2    40000  7.05   1000  10\n;i15  +    .    40000  6.03   2000  20\n;i15  .    .    40000  6.10   4000  40\n;i15  .    .    40000  7.05   8000  80\n\n; SAW MOOG/SMITH/STILSON C\n;    Sta  Dur  Amp    Pitch  Fco   Rez\ni11  0.0  1.0  20000  6.00   1000  .7\ni11  +    1.0  20000  6.03   2000  .8\ni11  .    1.0  20000  6.10   3000  .98\ni11  .    1.0  20000  7.05   4000  2\n\n; SAW CHAMBERLIN BIQUAD\n;    Sta  Dur  Amp    Pitch  Fco   Rez\n;i14  8.0  1.0  20000  6.00   1000  .8\n;i14  +    1.0  20000  6.03   2000  .95\n;i14  .    1.0  20000  6.10   3000  .98\n;i14  .    1.0  20000  7.05   4000  .99\n\n\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a Csound instrument for idur   =      p3            ; Duration using analog-style oscillator and panning and linear segments", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac -d\n</CsOptions>\n<CsInstruments>\n; Converted from mikelruttamoog.orc and mikelruttamoog.sco\n; Original files preserved in same directory\n\nsr      =        44100                      ; Sample rate\nkr      =        44100                      ; Kontrol rate\nksmps   =        1                          ; Samples/Kontrol period\nnchnls  =        2                          ; Normal stereo\n\n; ORCHESTRA\n;---------------------------------------------------------\n; Runge-Kutta Mass Spring Stimulated by an oscillator\n; Coded by Hans Mikelson April, 2000\n;---------------------------------------------------------\n\n;---------------------------------------------------------\n; Runge-Kutta Implementation of Moog VCF\n;---------------------------------------------------------\n        instr  6\n\nidur   =      p3            ; Duration\niamp   =      p4            ; Amplitude\nifco   =      p5            ; Spring/Mass constant\niq     =      p6            ; Damping factor\nih     =      p7            ; Diff eq step size\nipanl  =      sqrt(p8)      ; Pan left\nipanr  =      sqrt(1-p8)    ; Pan right\nifqc   =      cpspch(p9)    ; Pitch to frequency\n\nkdclck linseg 0, .02, 1, idur-.04, 1, .02, 0 ; Declick envelope\nkfco   expseg ifco, idur, ifco*.1\nkq     =      iq*kfco^1.2*.1\nkfc    =      kfco/8/sr*44100\n\nay     init   0\nay1    init   0\nay2    init   0\nay3    init   0                      ; No history to start with\nax     vco   1, ifqc, 2, 1, 1, 1        ; Square wave\n\n   ; R-K Section 1\n   afdbk =      kq*tanh(ay)\n   ak11  =      ih*((ax-ay1)*kfc-afdbk)\n   ak21  =      ih*((ax-(ay1+.5*ak11))*kfc-afdbk)\n   ak31  =      ih*((ax-(ay1+.5*ak21))*kfc-afdbk)\n   ak41  =      ih*((ax-(ay1+ak31))*kfc-afdbk)\n   ay1   =      ay1+(ak11+2*ak21+2*ak31+ak41)/6\n\n   ; R-K Section 2\n   ak12  =      ih*((ay1-ay2)*kfc)\n   ak22  =      ih*((ay1-(ay2+.5*ak12))*kfc)\n   ak32  =      ih*((ay1-(ay2+.5*ak22))*kfc)\n   ak42  =      ih*((ay1-(ay2+ak32))*kfc)\n   ay2   =      ay2+(ak12+2*ak22+2*ak32+ak42)/6\n\n   ; R-K Section 3\n   ak13  =      ih*((ay2-ay3)*kfc)\n   ak23  =      ih*((ay2-(ay3+.5*ak13))*kfc)\n   ak33  =      ih*((ay2-(ay3+.5*ak23))*kfc)\n   ak43  =      ih*((ay2-(ay3+ak33))*kfc)\n   ay3   =      ay3+(ak13+2*ak23+2*ak33+ak43)/6\n\n   ; R-K Section 4\n   ak14  =      ih*((ay3-ay)*kfc)\n   ak24  =      ih*((ay3-(ay+.5*ak14))*kfc)\n   ak34  =      ih*((ay3-(ay+.5*ak24))*kfc)\n   ak44  =      ih*((ay3-(ay+ak34))*kfc)\n   ay    =      ay+(ak14+2*ak24+2*ak34+ak44)/6\n\naout   =      ay*iamp*kdclck*1.5/(1+iq) ; Apply amp envelope and declick\n\n        outs   aout*ipanl, aout*ipanr  ; Output the sound\n\n        endin\n\n;---------------------------------------------------------\n; Runge-Kutta Modified Moog VCF to only oscillate positive\n;---------------------------------------------------------\n        instr  7\n\nidur   =      p3            ; Duration\niamp   =      p4            ; Amplitude\nifco   =      p5            ; Spring/Mass constant\niq     =      p6            ; Damping factor\nih     =      p7            ; Diff eq step size\nipanl  =      sqrt(p8)      ; Pan left\nipanr  =      sqrt(1-p8)    ; Pan right\nifqc   =      cpspch(p9)    ; Pitch to frequency\n\nkdclck linseg 0, .02, 1, idur-.04, 1, .02, 0 ; Declick envelope\nkfco   expseg ifco, idur, ifco*.1\nkq     =      iq*kfco^1.2*.1\nkfc    =      kfco/8/sr*44100\n\nay     init   0\nay1    init   0\nay2    init   0\nay3    init   0                         ; No history to start with\nax     vco   1, ifqc, 2, 1, 1, 1        ; Square wave\n\n   ; R-K Section 1\n   afdbk =      kq*ay/(1+exp(-ay*3))             ; Only oscillate in \none direction\n   ak11  =      ih*((ax-ay1)*kfc-afdbk)\n   ak21  =      ih*((ax-(ay1+.5*ak11))*kfc-afdbk)\n   ak31  =      ih*((ax-(ay1+.5*ak21))*kfc-afdbk)\n   ak41  =      ih*((ax-(ay1+ak31))*kfc-afdbk)\n   ay1   =      ay1+(ak11+2*ak21+2*ak31+ak41)/6\n\n   ; R-K Section 2\n   ak12  =      ih*((ay1-ay2)*kfc)\n   ak22  =      ih*((ay1-(ay2+.5*ak12))*kfc)\n   ak32  =      ih*((ay1-(ay2+.5*ak22))*kfc)\n   ak42  =      ih*((ay1-(ay2+ak32))*kfc)\n   ay2   =      ay2+(ak12+2*ak22+2*ak32+ak42)/6\n\n   ; R-K Section 3\n   ak13  =      ih*((ay2-ay3)*kfc)\n   ak23  =      ih*((ay2-(ay3+.5*ak13))*kfc)\n   ak33  =      ih*((ay2-(ay3+.5*ak23))*kfc)\n   ak43  =      ih*((ay2-(ay3+ak33))*kfc)\n   ay3   =      ay3+(ak13+2*ak23+2*ak33+ak43)/6\n\n   ; R-K Section 4\n   ak14  =      ih*((ay3-ay)*kfc)\n   ak24  =      ih*((ay3-(ay+.5*ak14))*kfc)\n   ak34  =      ih*((ay3-(ay+.5*ak24))*kfc)\n   ak44  =      ih*((ay3-(ay+ak34))*kfc)\n   ay    =      ay+(ak14+2*ak24+2*ak34+ak44)/6\n\naout   =      ay*iamp*kdclck*1.5 ; Apply amp envelope and declick\n\n        outs   aout*ipanl, aout*ipanr  ; Output the sound\n\n        endin\n\n</CsInstruments>\n<CsScore>\n; SCORE\nf1 0 65536 10 1\n\n; Runge-Kutta Implementation of Moog VCF\n;    Sta     Dur  Amp    Fco   Q    h      Pan  Pitch\ni6   0.000   .5   30000  1000  1    .001   .5   6.00\ni.   +       .    .      2000  .    .      .    .\ni.   .       .    .      4000  .    .      .    .\ni.   .       .    .      8000  .    .      .    .\ni.   .       .    .      1000  2    .      .    .\ni.   .       .    .      2000  .    .      .    .\ni.   .       .    .      4000  .    .      .    .\ni.   .       .    .      8000  .    .      .    .\ns\n;    Sta     Dur  Amp    Fco   Q    h      Pan  Pitch\ni7   0.000   .5   30000  1000  1    .001   .5   6.00\ni.   +       .    .      2000  .    .      .    .\ni.   .       .    .      4000  .    .      .    .\ni.   .       .    .      8000  .    .      .    .\ni.   .       .    .      1000  2    .      .    .\ni.   .       .    .      2000  .    .      .    .\ni.   .       .    .      4000  .    .      .    .\ni.   .       .    .      8000  .    .      .    .\n\n</CsScore>\n</CsoundSynthesizer>"}
