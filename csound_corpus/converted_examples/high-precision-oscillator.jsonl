{"instruction": "Write a Csound instrument for kratio =      p4    ; Ratio using high-precision oscillator and pitch detection", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac -d\n</CsOptions>\n<CsInstruments>\n; Converted from newport.orc and newport.sco\n; Original files preserved in same directory\n\nsr     =       44100  ; Sample rate\nkr     =       4410   ; Kontrol rate\nksmps  =       10     ; Samples per kontrol period\nnchnls =       2      ; Number of channels\n\n; ORCHESTRA\n       zakinit 50, 50 ; Initialize the zak system\n\n; Sends out a ratio signal on the appropriate channel\n       instr  1\n\nkratio =      p4    ; Ratio\nioutch =      p5    ; Output channel\n\n       zkw    kratio, ioutch  ; Write k-rate zak array\n\n       endin\n\n; Instrument 2 reads it's pitch from instrument 1 zak channel\n       instr 2\n\niamp   =      p4  ; Amplitude\nifqc   =      p5  ; Base frequency\nirt    =      p6  ; Initial ratio\niinch  =      p7  ; Input zak channel\n\nkrt1   zkr    iinch         ; Read the zak channel\nkrt    port   krt1, .2, irt ; Portamento glide for .2 seconds\n\naoutl  poscil iamp, ifqc*krt*1.002, 1 ; Run the oscillator\naoutr  poscil iamp, ifqc*krt*0.998, 1 ; How about some stereo?\n\n       outs  aoutl, aoutr\n\n       endin\n\n</CsInstruments>\n<CsScore>\n\n\n; SCORE\nf1      0       8192    9       1 1 0 2.5 .5 0 3.5 .333 0 4.5 .25 0 5.5 .20\n\n;inst   start   dur   ratio  OutCh\ni1      0       8     1.125  1\ni1      0       8     1.875  2\ni1      0       8     1.5    3\n;\ni1      8       8     1.2    1\ni1      8       8     1.7778 2\ni1      8       8     1.5    3\n;\ni1     16       8     1.125  1\ni1     16       8     1.875  2\ni1     16       8     1.5    3\n\n; Just turn on instr 2 and leave it on\n; use instr 1 to change the ratios.\n;inst   start   dur   amp     freq  InitRatio  InCh\ni2      0       24    10000   220   1.125      1\ni2      0       24    10000   110   1.875      2\ni2      0       24    10000   110   1.5        3\n\ne\n\n</CsScore>\n</CsoundSynthesizer>"}
