{"instruction": "Write a CSound instrument that demonstrates FM synthesis variations", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSine ftgen 1, 0, 16384, 10, 1\n\ninstr 1\n    ; fm opcode (basic FM synthesis)\n    ; Manual implementation using oscillators\n    \n    iAmp = 0.4\n    iCarrier = p4\n    iModRatio = p5\n    iIndex = p6\n    \n    ; Modulator\n    iModFreq = iCarrier * iModRatio\n    iModDepth = iModFreq * iIndex\n    aMod poscil iModDepth, iModFreq, giSine\n    \n    ; Carrier\n    aCarrier poscil iAmp, iCarrier + aMod, giSine\n    \n    outs aCarrier, aCarrier\nendin\n\ninstr 2\n    ; crossfmi opcode: a1, a2 crossfmi xfrq1, xfrq2, xndx1, xndx2, kcps, ifn1, ifn2 [, iphs1, iphs2]\n    ; crossfmi implements integer cross-FM\n    ; Similar to crossfm but with integer frequency ratios\n    \n    iAmp = 0.4\n    kCps = p4\n    kFreq1 = 1\n    kFreq2 = 2\n    kIndex1 = 4\n    kIndex2 = 2\n    \n    a1, a2 crossfmi kFreq1, kFreq2, kIndex1, kIndex2, kCps, giSine, giSine\n    \n    aMix = (a1 + a2) * iAmp\n    \n    outs aMix, aMix\nendin\n\ninstr 3\n    ; crosspm opcode: a1, a2 crosspm xfrq1, xfrq2, xndx1, xndx2, kcps, ifn1, ifn2 [, iphs1, iphs2]\n    ; crosspm implements cross-phase modulation\n    \n    iAmp = 0.4\n    kCps = p4\n    kFreq1 = 1\n    kFreq2 = 1.5\n    kIndex1 = 5\n    kIndex2 = 3\n    \n    a1, a2 crosspm kFreq1, kFreq2, kIndex1, kIndex2, kCps, giSine, giSine\n    \n    aMix = (a1 + a2) * iAmp\n    \n    outs aMix, aMix\nendin\n\ninstr 4\n    ; crosspmi opcode: a1, a2 crosspmi xfrq1, xfrq2, xndx1, xndx2, kcps, ifn1, ifn2 [, iphs1, iphs2]\n    ; crosspmi implements integer cross-PM\n    \n    iAmp = 0.4\n    kCps = p4\n    kFreq1 = 1\n    kFreq2 = 3\n    kIndex1 = 6\n    kIndex2 = 4\n    \n    a1, a2 crosspmi kFreq1, kFreq2, kIndex1, kIndex2, kCps, giSine, giSine\n    \n    aMix = (a1 + a2) * iAmp\n    \n    outs aMix, aMix\nendin\n\ninstr 5\n    ; Dynamic cross-FM\n    iAmp = 0.4\n    kCps = p4\n    kFreq1 = 1\n    kFreq2 = 1.618  ; Golden ratio\n    \n    ; Indices change\n    kIndex1 linseg 1, p3, 8\n    kIndex2 linseg 0.5, p3, 5\n    \n    a1, a2 crossfm kFreq1, kFreq2, kIndex1, kIndex2, kCps, giSine, giSine\n    \n    aMix = (a1 + a2) * iAmp\n    \n    outs aMix, aMix\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic FM\n; Format: start dur carrier mod_ratio index\ni1 0 2 220 2 5\ni1 2.5 2 220 3 3\n\n; Play crossfmi\ni2 5.5 2 330\n\n; Play crosspm\ni3 8.5 2 440\n\n; Play crosspmi\ni4 11.5 2 294\n\n; Play dynamic cross-FM\ni5 14.5 3 392\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
