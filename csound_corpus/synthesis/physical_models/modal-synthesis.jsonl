{"instruction": "Write a CSound instrument that demonstrates the mode opcode for modal resonance synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; mode opcode: ares mode asig, kfreq, kQ [, iskip]\n    ; mode is a resonant filter that models a single mode of vibration\n    ; asig - input signal (excitation)\n    ; kfreq - resonant frequency in Hz\n    ; kQ - quality factor (higher = longer decay, typically 10-1000)\n    ; iskip - skip initialization (0 = no, 1 = yes)\n    \n    ; Impulse excitation\n    aExcite mpulse 0.8, 0\n    \n    ; Single mode resonance\n    iFreq = p4\n    iQ = 100\n    \n    aMode mode aExcite, iFreq, iQ\n    \n    outs aMode, aMode\nendin\n\ninstr 2\n    ; Multiple modes for bell-like sound\n    aExcite mpulse 0.6, 0\n    \n    iFund = p4\n    \n    ; Create several modes at different frequencies and Q values\n    aMode1 mode aExcite, iFund, 200\n    aMode2 mode aExcite, iFund*2.76, 180\n    aMode3 mode aExcite, iFund*5.4, 150\n    aMode4 mode aExcite, iFund*8.93, 120\n    \n    ; Mix modes\n    aMix = aMode1*0.4 + aMode2*0.3 + aMode3*0.2 + aMode4*0.1\n    \n    outs aMix, aMix\nendin\n\ninstr 3\n    ; Wood block (short decay)\n    aExcite mpulse 0.7, 0\n    \n    iFreq = p4\n    \n    ; Lower Q for shorter decay\n    aMode1 mode aExcite, iFreq, 30\n    aMode2 mode aExcite, iFreq*2.3, 25\n    aMode3 mode aExcite, iFreq*4.1, 20\n    \n    aMix = aMode1*0.5 + aMode2*0.3 + aMode3*0.2\n    \n    outs aMix, aMix\nendin\n\ninstr 4\n    ; Metallic sound (long decay)\n    aExcite mpulse 0.5, 0\n    \n    iFreq = p4\n    \n    ; High Q for long decay\n    aMode1 mode aExcite, iFreq, 500\n    aMode2 mode aExcite, iFreq*1.618, 450\n    aMode3 mode aExcite, iFreq*2.718, 400\n    aMode4 mode aExcite, iFreq*4.236, 350\n    \n    aMix = aMode1*0.35 + aMode2*0.3 + aMode3*0.2 + aMode4*0.15\n    \n    outs aMix*0.7, aMix*0.7\nendin\n\ninstr 5\n    ; Swept resonance\n    ; Continuous excitation\n    aNoise noise 0.1, 0\n    \n    iFreqStart = p4\n    iFreqEnd = p5\n    \n    ; Sweep frequency\n    kFreq expseg iFreqStart, p3, iFreqEnd\n    \n    aMode mode aNoise, kFreq, 150\n    \n    outs aMode, aMode\nendin\n\ninstr 6\n    ; Inharmonic modes for complex timbre\n    aExcite mpulse 0.6, 0\n    \n    iFreq = p4\n    \n    ; Inharmonic ratios\n    aMode1 mode aExcite, iFreq, 180\n    aMode2 mode aExcite, iFreq*2.1, 160\n    aMode3 mode aExcite, iFreq*3.7, 140\n    aMode4 mode aExcite, iFreq*5.9, 120\n    aMode5 mode aExcite, iFreq*8.3, 100\n    \n    aMix = aMode1*0.3 + aMode2*0.25 + aMode3*0.2 + aMode4*0.15 + aMode5*0.1\n    \n    outs aMix, aMix\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play single mode\ni1 0 2 440\ni1 2.5 2 330\n\n; Play bell-like\ni2 5.5 3 523\ni2 9 3 440\n\n; Play wood block\ni3 13 1 800\ni3 14 1 1000\ni3 15 1 1200\n\n; Play metallic\ni4 17 4 660\n\n; Play swept resonance\n; Format: start dur freq_start freq_end\ni5 22 3 200 2000\n\n; Play inharmonic\ni6 26 3 220\ni6 29 3 330\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the streson opcode for string resonance", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; streson opcode: ares streson asig, kfr, kfdbgain\n    ; streson is a string resonator that models the resonance of a string\n    ; asig - input signal (excitation)\n    ; kfr - resonant frequency in Hz\n    ; kfdbgain - feedback gain (0-1, controls decay time)\n    \n    ; Impulse excitation\n    aExcite mpulse 0.5, 0\n    \n    iFreq = p4\n    kFdbk = 0.95\n    \n    ; String resonance\n    aStr streson aExcite, iFreq, kFdbk\n    \n    outs aStr, aStr\nendin\n\ninstr 2\n    ; Plucked string with decay\n    aExcite mpulse 0.4, 0\n    \n    iFreq = p4\n    \n    ; Feedback decreases over time\n    kFdbk linseg 0.98, p3, 0.7\n    \n    aStr streson aExcite, iFreq, kFdbk\n    \n    outs aStr, aStr\nendin\n\ninstr 3\n    ; Multiple strings (sympathetic resonance)\n    aExcite mpulse 0.35, 0\n    \n    ; Fundamental frequency\n    iFreq = p4\n    \n    ; Create several strings at harmonic frequencies\n    aStr1 streson aExcite, iFreq, 0.97\n    aStr2 streson aExcite, iFreq*2, 0.95\n    aStr3 streson aExcite, iFreq*3, 0.93\n    aStr4 streson aExcite, iFreq*4, 0.91\n    \n    ; Mix with decreasing amplitude\n    aMix = aStr1*0.4 + aStr2*0.3 + aStr3*0.2 + aStr4*0.1\n    \n    outs aMix, aMix\nendin\n\ninstr 4\n    ; Bowed string simulation\n    ; Continuous noise excitation\n    aNoise noise 0.05, 0\n    \n    iFreq = p4\n    kFdbk = 0.99  ; Very high feedback for sustained tone\n    \n    aStr streson aNoise, iFreq, kFdbk\n    \n    outs aStr*0.8, aStr*0.8\nendin\n\ninstr 5\n    ; Detuned string chorus\n    aExcite mpulse 0.3, 0\n    \n    iFreq = p4\n    \n    ; Three slightly detuned strings\n    aStr1 streson aExcite, iFreq*0.998, 0.96\n    aStr2 streson aExcite, iFreq, 0.96\n    aStr3 streson aExcite, iFreq*1.002, 0.96\n    \n    ; Stereo spread\n    aLeft = aStr1*0.5 + aStr2*0.3 + aStr3*0.2\n    aRight = aStr1*0.2 + aStr2*0.3 + aStr3*0.5\n    \n    outs aLeft, aRight\nendin\n\ninstr 6\n    ; Pitch glide on string\n    aExcite mpulse 0.4, 0\n    \n    iStart = p4\n    iEnd = p5\n    \n    ; Smooth frequency glide\n    kFreq expseg iStart, p3, iEnd\n    kFdbk = 0.96\n    \n    aStr streson aExcite, kFreq, kFdbk\n    \n    outs aStr, aStr\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic string resonance\ni1 0 3 440\ni1 3.5 3 330\n\n; Play with decay\ni2 7.5 3 523\n\n; Play sympathetic resonance\ni3 11.5 4 220\n\n; Play bowed simulation\ni4 16.5 4 330\n\n; Play chorus\ni5 21.5 3 392\n\n; Play pitch glide\n; Format: start dur freq_start freq_end\ni6 25.5 2 220 440\ni6 27.5 2 440 220\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the prepiano opcode for prepared piano synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; prepiano opcode: ares prepiano ifreq, iNS, iD, iK, iT30, iB, kbcl, kbcr, imass, ihvfreq, iinit, ipos, ivel, isfreq, isspread, irattles\n    ; prepiano implements a prepared piano physical model\n    ; ifreq - frequency in Hz\n    ; iNS - number of strings (1-3)\n    ; iD - detuning between strings (cents)\n    ; iK - stiffness parameter\n    ; iT30 - decay time\n    ; iB - brightness/high frequency loss\n    ; kbcl, kbcr - boundary conditions left/right\n    ; imass - mass parameter\n    ; ihvfreq - hammer velocity frequency\n    ; iinit - initialization flag\n    ; ipos - strike position (0-1)\n    ; ivel - strike velocity\n    ; isfreq - string frequency\n    ; isspread - string spread\n    ; irattles - number of rattles\n    \n    ; Basic prepared piano note\n    iFreq = p4\n    iVel = 0.8\n    \n    aPiano prepiano iFreq, 3, 1.5, 1, 5, 0.5, 0.5, 0.5, 1, 1, 1, 0.5, iVel, 0, 0, 0\n    \n    outs aPiano, aPiano\nendin\n\ninstr 2\n    ; Single string prepared piano\n    iFreq = p4\n    iVel = 0.7\n    \n    ; Single string (iNS = 1)\n    aPiano prepiano iFreq, 1, 0, 1, 4, 0.4, 0.5, 0.5, 1, 1, 1, 0.5, iVel, 0, 0, 0\n    \n    outs aPiano, aPiano\nendin\n\ninstr 3\n    ; Heavily detuned prepared piano\n    iFreq = p4\n    iVel = 0.8\n    \n    ; Three strings with heavy detuning (10 cents)\n    aPiano prepiano iFreq, 3, 10, 1, 6, 0.6, 0.5, 0.5, 1, 1, 1, 0.5, iVel, 0, 0, 0\n    \n    outs aPiano, aPiano\nendin\n\ninstr 4\n    ; Bright prepared piano\n    iFreq = p4\n    iVel = 0.75\n    \n    ; Lower B value for brightness\n    aPiano prepiano iFreq, 3, 1.5, 1, 5, 0.2, 0.5, 0.5, 1, 1, 1, 0.3, iVel, 0, 0, 0\n    \n    outs aPiano, aPiano\nendin\n\ninstr 5\n    ; Dark, mellow prepared piano\n    iFreq = p4\n    iVel = 0.7\n    \n    ; Higher B value for darkness\n    aPiano prepiano iFreq, 3, 1.5, 1, 7, 0.8, 0.5, 0.5, 1, 1, 1, 0.7, iVel, 0, 0, 0\n    \n    outs aPiano, aPiano\nendin\n\ninstr 6\n    ; Long decay prepared piano\n    iFreq = p4\n    iVel = 0.8\n    \n    ; Longer T30 for sustained tone\n    aPiano prepiano iFreq, 3, 1.5, 1, 12, 0.5, 0.5, 0.5, 1, 1, 1, 0.5, iVel, 0, 0, 0\n    \n    outs aPiano*0.8, aPiano*0.8\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic prepared piano\ni1 0 3 440\ni1 3.5 3 523\n\n; Play single string\ni2 7.5 3 330\n\n; Play detuned\ni3 11.5 3 392\n\n; Play bright\ni4 15.5 3 659\n\n; Play dark\ni5 19.5 3 294\n\n; Play long decay\ni6 24 5 220\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the marimba opcode for marimba synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; marimba opcode: ares marimba kamp, kfreq, ihrd, ipos, imp, kvibf, kvamp, ivibfn, idec\n    ; marimba implements a marimba physical model\n    ; kamp - amplitude\n    ; kfreq - frequency in Hz\n    ; ihrd - hardness of mallet (0-1, 0=soft, 1=hard)\n    ; ipos - strike position (0-1)\n    ; imp - method (1-4, strike method)\n    ; kvibf - vibrato frequency\n    ; kvamp - vibrato amplitude\n    ; ivibfn - vibrato function table\n    ; idec - decay time multiplier\n    \n    ; Amplitude envelope\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.5     ; Medium hardness\n    iPos = 0.5      ; Center strike\n    iMethod = 1\n    \n    aMarimba marimba kAmp*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    outs aMarimba, aMarimba\nendin\n\ninstr 2\n    ; Soft mallets\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.2     ; Soft mallets\n    iPos = 0.5\n    iMethod = 1\n    \n    aMarimba marimba kAmp*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    outs aMarimba, aMarimba\nendin\n\ninstr 3\n    ; Hard mallets\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.85    ; Hard mallets\n    iPos = 0.3\n    iMethod = 1\n    \n    aMarimba marimba kAmp*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    outs aMarimba, aMarimba\nendin\n\ninstr 4\n    ; Different strike positions\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.5\n    iPos = p5       ; Strike position from score\n    iMethod = 1\n    \n    aMarimba marimba kAmp*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    outs aMarimba, aMarimba\nendin\n\ninstr 5\n    ; Long decay marimba\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.5\n    iPos = 0.5\n    iMethod = 1\n    iDecay = 2      ; Longer decay\n    \n    aMarimba marimba kAmp*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, iDecay\n    \n    outs aMarimba, aMarimba\nendin\n\ninstr 6\n    ; Marimba roll (tremolo)\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.5\n    iPos = 0.5\n    iMethod = 1\n    \n    ; Tremolo effect\n    kTrem oscili 0.3, 10, giSine\n    kTrem = 0.7 + kTrem\n    \n    aMarimba marimba kAmp*kTrem*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    outs aMarimba, aMarimba\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic marimba\ni1 0 2 440\ni1 2.5 2 523\n\n; Play soft mallets\ni2 5.5 2 330\ni2 7.5 2 392\n\n; Play hard mallets\ni3 10.5 1.5 659\ni3 12 1.5 784\n\n; Play different strike positions\n; Format: start dur freq position\ni4 14.5 2 392 0.2   ; Near edge\ni4 16.5 2 392 0.5   ; Center\ni4 18.5 2 392 0.8   ; Far edge\n\n; Play long decay\ni5 21.5 3 294\n\n; Play roll\ni6 25.5 2 440\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the vibes opcode for vibraphone synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; vibes opcode: ares vibes kamp, kfreq, ihrd, ipos, imp, kvibf, kvamp, ivibfn, idec\n    ; vibes implements a vibraphone physical model\n    ; kamp - amplitude\n    ; kfreq - frequency in Hz\n    ; ihrd - hardness of mallet (0-1)\n    ; ipos - strike position (0-1)\n    ; imp - method (strike method)\n    ; kvibf - vibrato frequency (motor speed)\n    ; kvamp - vibrato amplitude\n    ; ivibfn - vibrato function table\n    ; idec - decay time multiplier\n    \n    ; Amplitude envelope\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.5\n    iPos = 0.5\n    iMethod = 1\n    kVibF = 6       ; Vibraphone motor at 6 Hz\n    kVibAmp = 0.1   ; Moderate vibrato depth\n    \n    aVibes vibes kAmp*0.5, iFreq, iHard, iPos, iMethod, kVibF, kVibAmp, giSine, 1\n    \n    outs aVibes, aVibes\nendin\n\ninstr 2\n    ; No motor (vibrato off)\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.5\n    iPos = 0.5\n    iMethod = 1\n    kVibF = 0       ; No vibrato\n    kVibAmp = 0\n    \n    aVibes vibes kAmp*0.5, iFreq, iHard, iPos, iMethod, kVibF, kVibAmp, giSine, 1\n    \n    outs aVibes, aVibes\nendin\n\ninstr 3\n    ; Fast motor\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.5\n    iPos = 0.5\n    iMethod = 1\n    kVibF = 10      ; Fast motor\n    kVibAmp = 0.15  ; Deep vibrato\n    \n    aVibes vibes kAmp*0.5, iFreq, iHard, iPos, iMethod, kVibF, kVibAmp, giSine, 1\n    \n    outs aVibes, aVibes\nendin\n\ninstr 4\n    ; Soft mallets with slow motor\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.2     ; Soft mallets\n    iPos = 0.5\n    iMethod = 1\n    kVibF = 4       ; Slow motor\n    kVibAmp = 0.08\n    \n    aVibes vibes kAmp*0.5, iFreq, iHard, iPos, iMethod, kVibF, kVibAmp, giSine, 1\n    \n    outs aVibes, aVibes\nendin\n\ninstr 5\n    ; Hard mallets bright tone\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.8     ; Hard mallets\n    iPos = 0.3\n    iMethod = 1\n    kVibF = 6\n    kVibAmp = 0.1\n    \n    aVibes vibes kAmp*0.5, iFreq, iHard, iPos, iMethod, kVibF, kVibAmp, giSine, 1\n    \n    outs aVibes, aVibes\nendin\n\ninstr 6\n    ; Chord (multiple bars)\n    kAmp linseg 1, p3, 0\n    \n    ; Root, third, fifth\n    iRoot = p4\n    i3rd = iRoot * 5/4\n    i5th = iRoot * 3/2\n    \n    iHard = 0.5\n    iPos = 0.5\n    iMethod = 1\n    kVibF = 6\n    kVibAmp = 0.1\n    \n    aVibes1 vibes kAmp*0.35, iRoot, iHard, iPos, iMethod, kVibF, kVibAmp, giSine, 1\n    aVibes2 vibes kAmp*0.35, i3rd, iHard, iPos, iMethod, kVibF*1.01, kVibAmp, giSine, 1\n    aVibes3 vibes kAmp*0.35, i5th, iHard, iPos, iMethod, kVibF*0.99, kVibAmp, giSine, 1\n    \n    aMix = aVibes1 + aVibes2 + aVibes3\n    \n    outs aMix*0.5, aMix*0.5\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play with motor\ni1 0 3 440\ni1 3.5 3 523\n\n; Play without motor\ni2 7.5 3 330\n\n; Play fast motor\ni3 11.5 3 659\n\n; Play soft mallets\ni4 15.5 3 392\n\n; Play hard mallets\ni5 19.5 2 784\n\n; Play chord\ni6 22.5 4 330\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the mandol opcode for mandolin synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; mandol opcode: ares mandol kamp, kfreq, kbody, kdetune, kdeclick\n    ; mandol implements a mandolin physical model\n    ; kamp - amplitude\n    ; kfreq - frequency in Hz\n    ; kbody - body size parameter (0-2, affects tone)\n    ; kdetune - detuning between string pairs (cents, typically 0-10)\n    ; kdeclick - declick time in seconds\n    \n    ; Amplitude envelope\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    kBody = 1       ; Standard body size\n    kDetune = 2     ; Slight detuning between pairs\n    kDeclick = 0.001\n    \n    aMandol mandol kAmp*0.5, iFreq, kBody, kDetune, kDeclick\n    \n    outs aMandol, aMandol\nendin\n\ninstr 2\n    ; Small body mandolin\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    kBody = 0.5     ; Small body\n    kDetune = 2\n    kDeclick = 0.001\n    \n    aMandol mandol kAmp*0.5, iFreq, kBody, kDetune, kDeclick\n    \n    outs aMandol, aMandol\nendin\n\ninstr 3\n    ; Large body mandolin\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    kBody = 1.8     ; Large body\n    kDetune = 2\n    kDeclick = 0.001\n    \n    aMandol mandol kAmp*0.5, iFreq, kBody, kDetune, kDeclick\n    \n    outs aMandol, aMandol\nendin\n\ninstr 4\n    ; Heavy detuning (chorus effect)\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    kBody = 1\n    kDetune = 8     ; Heavy detuning\n    kDeclick = 0.001\n    \n    aMandol mandol kAmp*0.5, iFreq, kBody, kDetune, kDeclick\n    \n    outs aMandol, aMandol\nendin\n\ninstr 5\n    ; Perfect unison (no detuning)\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    kBody = 1\n    kDetune = 0     ; No detuning\n    kDeclick = 0.001\n    \n    aMandol mandol kAmp*0.5, iFreq, kBody, kDetune, kDeclick\n    \n    outs aMandol, aMandol\nendin\n\ninstr 6\n    ; Tremolo (rapid re-attack)\n    kAmp linseg 1, p3, 0\n    \n    ; Tremolo modulation\n    kTrem oscili 0.4, 8, giSine\n    kTrem = 0.6 + kTrem\n    \n    iFreq = p4\n    kBody = 1\n    kDetune = 2\n    kDeclick = 0.001\n    \n    aMandol mandol kAmp*kTrem*0.5, iFreq, kBody, kDetune, kDeclick\n    \n    outs aMandol, aMandol\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play standard mandolin\ni1 0 2 440\ni1 2.5 2 523\n\n; Play small body\ni2 5.5 2 330\n\n; Play large body\ni3 8.5 2 294\n\n; Play heavy detuning\ni4 11.5 2 392\n\n; Play unison\ni5 14.5 2 523\n\n; Play tremolo\ni6 17.5 3 440\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the gogobel opcode for agogo bell synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; gogobel opcode: ares gogobel kamp, kfreq, ihrd, ipos, imp, kvibf, kvamp, ivibfn, idec\n    ; gogobel implements an agogo bell physical model\n    ; kamp - amplitude\n    ; kfreq - frequency in Hz\n    ; ihrd - hardness of beater (0-1)\n    ; ipos - strike position (0-1)\n    ; imp - method\n    ; kvibf - vibrato frequency\n    ; kvamp - vibrato amplitude\n    ; ivibfn - vibrato function table\n    ; idec - decay time multiplier\n    \n    ; Amplitude envelope\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.7     ; Hard beater for metallic sound\n    iPos = 0.3\n    iMethod = 1\n    \n    aGogo gogobel kAmp*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    outs aGogo, aGogo\nendin\n\ninstr 2\n    ; High agogo bell\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.8     ; Very hard for bright sound\n    iPos = 0.2\n    iMethod = 1\n    \n    aGogo gogobel kAmp*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    outs aGogo, aGogo\nendin\n\ninstr 3\n    ; Low agogo bell\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.65\n    iPos = 0.4\n    iMethod = 1\n    \n    aGogo gogobel kAmp*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    outs aGogo, aGogo\nendin\n\ninstr 4\n    ; Agogo pattern (alternating high and low)\n    kAmp linseg 1, p3, 0\n    \n    ; Two pitches\n    iFreq1 = p4     ; High bell\n    iFreq2 = p5     ; Low bell\n    \n    ; Alternate between pitches\n    kTime timeinsts\n    kBell = int(kTime * 4) % 2\n    kFreq = (kBell == 0 ? iFreq1 : iFreq2)\n    \n    iHard = 0.7\n    iPos = 0.3\n    iMethod = 1\n    \n    aGogo gogobel kAmp*0.5, kFreq, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    outs aGogo, aGogo\nendin\n\ninstr 5\n    ; Long decay bell\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    iHard = 0.7\n    iPos = 0.3\n    iMethod = 1\n    iDecay = 2.5    ; Longer decay\n    \n    aGogo gogobel kAmp*0.5, iFreq, iHard, iPos, iMethod, 0, 0, giSine, iDecay\n    \n    outs aGogo, aGogo\nendin\n\ninstr 6\n    ; Stereo agogo pair\n    kAmp linseg 1, p3, 0\n    \n    iFreq1 = p4     ; High bell\n    iFreq2 = p5     ; Low bell\n    \n    iHard = 0.7\n    iPos = 0.3\n    iMethod = 1\n    \n    ; Generate both bells\n    aGogoHigh gogobel kAmp*0.5, iFreq1, iHard, iPos, iMethod, 0, 0, giSine, 1\n    aGogoLow gogobel kAmp*0.5, iFreq2, iHard, iPos, iMethod, 0, 0, giSine, 1\n    \n    ; Pan left and right\n    outs aGogoHigh*0.8 + aGogoLow*0.2, aGogoHigh*0.2 + aGogoLow*0.8\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic agogo\ni1 0 1 880\ni1 1.5 1 660\n\n; Play high bell\ni2 3.5 1 1200\ni2 4.5 1 1100\n\n; Play low bell\ni3 6.5 1 700\ni3 7.5 1 600\n\n; Play alternating pattern\n; Format: start dur high_freq low_freq\ni4 9.5 2 1000 700\n\n; Play long decay\ni5 12.5 3 880\n\n; Play stereo pair\ni6 16.5 1.5 1100 750\ni6 18 1.5 1100 750\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced modal synthesis techniques and percussion ensembles", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; Gamelan-style ensemble using mode filters\n    aExcite mpulse 0.4, 0\n    \n    iFreq = p4\n    \n    ; Create multiple inharmonic modes (gamelan-like)\n    aMode1 mode aExcite, iFreq, 300\n    aMode2 mode aExcite, iFreq*2.14, 280\n    aMode3 mode aExcite, iFreq*3.76, 250\n    aMode4 mode aExcite, iFreq*5.42, 220\n    aMode5 mode aExcite, iFreq*7.13, 190\n    \n    aMix = aMode1*0.3 + aMode2*0.25 + aMode3*0.2 + aMode4*0.15 + aMode5*0.1\n    \n    outs aMix, aMix\nendin\n\ninstr 2\n    ; Mallet percussion section\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    \n    ; Marimba (low)\n    aMarimba marimba kAmp*0.3, iFreq, 0.5, 0.5, 1, 0, 0, giSine, 1\n    \n    ; Vibes (high with motor)\n    aVibes vibes kAmp*0.3, iFreq*2, 0.5, 0.5, 1, 6, 0.1, giSine, 1\n    \n    ; Mix with stereo spread\n    aLeft = aMarimba*0.7 + aVibes*0.3\n    aRight = aMarimba*0.3 + aVibes*0.7\n    \n    outs aLeft, aRight\nendin\n\ninstr 3\n    ; String ensemble with resonance\n    aExcite mpulse 0.3, 0\n    \n    ; Root, fifth, octave\n    iRoot = p4\n    i5th = iRoot * 3/2\n    i8ve = iRoot * 2\n    \n    ; String resonators\n    aStr1 streson aExcite, iRoot, 0.97\n    aStr2 streson aExcite, i5th, 0.96\n    aStr3 streson aExcite, i8ve, 0.95\n    \n    aMix = aStr1*0.4 + aStr2*0.35 + aStr3*0.25\n    \n    outs aMix, aMix\nendin\n\ninstr 4\n    ; Prepared piano with resonance\n    iFreq = p4\n    iVel = 0.75\n    \n    ; Prepared piano\n    aPiano prepiano iFreq, 3, 2, 1, 6, 0.5, 0.5, 0.5, 1, 1, 1, 0.5, iVel, 0, 0, 0\n    \n    ; Add string resonance for sympathetic vibration\n    aRes1 streson aPiano, iFreq*2, 0.93\n    aRes2 streson aPiano, iFreq*3, 0.91\n    \n    aMix = aPiano*0.6 + aRes1*0.2 + aRes2*0.2\n    \n    outs aMix, aMix\nendin\n\ninstr 5\n    ; Latin percussion ensemble\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    \n    ; Agogo bells pattern\n    kTime timeinsts\n    kBell = int(kTime * 6) % 3\n    \n    if kBell == 0 then\n        kGogoFreq = iFreq * 2\n    elseif kBell == 1 then\n        kGogoFreq = iFreq * 1.5\n    else\n        kGogoFreq = iFreq\n    endif\n    \n    aGogo gogobel kAmp*0.4, kGogoFreq, 0.7, 0.3, 1, 0, 0, giSine, 1\n    \n    ; Add marimba bass\n    aMarimba marimba kAmp*0.3, iFreq*0.5, 0.4, 0.6, 1, 0, 0, giSine, 1\n    \n    aMix = aGogo + aMarimba*0.6\n    \n    outs aMix*0.7, aMix*0.7\nendin\n\ninstr 6\n    ; Mandolin tremolo melody with bell accompaniment\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    \n    ; Mandolin with tremolo\n    kTrem oscili 0.4, 8, giSine\n    kTrem = 0.6 + kTrem\n    aMandol mandol kAmp*kTrem*0.35, iFreq, 1, 2, 0.001\n    \n    ; Bell harmony (third above)\n    aGogo gogobel kAmp*0.25, iFreq*1.25, 0.7, 0.3, 1, 0, 0, giSine, 1.5\n    \n    aMix = aMandol + aGogo*0.6\n    \n    outs aMix, aMix\nendin\n\ninstr 7\n    ; Modal synthesis texture (shimmer)\n    ; Continuous excitation with multiple modes\n    aNoise noise 0.02, 0\n    \n    iFreq = p4\n    \n    ; Multiple modes at different frequencies and decay times\n    aMode1 mode aNoise, iFreq, 400\n    aMode2 mode aNoise, iFreq*1.618, 380\n    aMode3 mode aNoise, iFreq*2.414, 350\n    aMode4 mode aNoise, iFreq*3.142, 320\n    aMode5 mode aNoise, iFreq*4.236, 300\n    aMode6 mode aNoise, iFreq*5.828, 280\n    \n    ; Mix with varying amplitudes\n    aMix = aMode1*0.25 + aMode2*0.2 + aMode3*0.18 + aMode4*0.15 + aMode5*0.12 + aMode6*0.1\n    \n    ; Add reverb for shimmer effect\n    aRvbL, aRvbR freeverb aMix, aMix, 0.9, 0.7\n    \n    outs aRvbL*0.5, aRvbR*0.5\nendin\n\ninstr 8\n    ; Full percussion orchestra hit\n    kAmp linseg 1, p3, 0\n    \n    iFreq = p4\n    \n    ; Marimba bass\n    aMarimba marimba kAmp*0.3, iFreq, 0.5, 0.5, 1, 0, 0, giSine, 1\n    \n    ; Vibes chord (root, 3rd, 5th)\n    aVibes1 vibes kAmp*0.25, iFreq*2, 0.5, 0.5, 1, 6, 0.1, giSine, 1\n    aVibes2 vibes kAmp*0.25, iFreq*2.5, 0.5, 0.5, 1, 6.1, 0.1, giSine, 1\n    aVibes3 vibes kAmp*0.25, iFreq*3, 0.5, 0.5, 1, 5.9, 0.1, giSine, 1\n    \n    ; Agogo accent\n    aGogo gogobel kAmp*0.3, iFreq*4, 0.8, 0.2, 1, 0, 0, giSine, 1\n    \n    ; Mix all\n    aMix = aMarimba + aVibes1*0.8 + aVibes2*0.8 + aVibes3*0.8 + aGogo*0.6\n    \n    ; Stereo spread\n    aLeft = aMix + aGogo*0.3\n    aRight = aMix + (aVibes1 + aVibes2 + aVibes3)*0.2\n    \n    outs aLeft*0.5, aRight*0.5\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play gamelan ensemble\ni1 0 3 220\ni1 3.5 3 247\n\n; Play mallet section\ni2 7.5 3 330\n\n; Play string ensemble\ni3 11.5 4 196\n\n; Play prepared piano\ni4 16.5 3 262\ni4 19.5 3 330\n\n; Play latin percussion\ni5 23.5 3 220\n\n; Play mandolin with bells\ni6 27.5 3 392\ni6 30.5 3 440\n\n; Play modal shimmer\ni7 34.5 8 165\n\n; Play orchestra hit\ni8 43.5 4 220\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
