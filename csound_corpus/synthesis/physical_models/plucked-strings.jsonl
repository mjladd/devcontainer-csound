{"instruction": "Write a CSound instrument that demonstrates the pluck opcode for Karplus-Strong plucked string synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; pluck opcode: ares pluck kamp, kcps, icps, ifn, imethod [, iparm1] [, iparm2]\n    ; pluck implements the Karplus-Strong plucked string algorithm\n    ; kamp - amplitude\n    ; kcps - pitch in Hz (can vary during note)\n    ; icps - pitch at initialization (sets delay line length)\n    ; ifn - table for initial excitation (0 = noise)\n    ; imethod - method of natural decay:\n    ;           1 = simple averaging\n    ;           2 = stretched averaging\n    ;           3 = simple drum\n    ;           4 = stretched drum\n    ;           5 = weighted averaging\n    ;           6 = 1st order recursive filter\n    ; iparm1, iparm2 - method-dependent parameters\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.001, 0.5, p3-0.001, 0\n    \n    ; Pitch from score\n    iFreq = p4\n    \n    ; Simple plucked string\n    aPluck pluck kAmp, iFreq, iFreq, 0, 1\n    \n    outs aPluck, aPluck\nendin\n\ninstr 2\n    ; Guitar-like plucked string with stretched averaging\n    kAmp linseg 0, 0.001, 0.4, p3-0.001, 0\n    \n    iFreq = p4\n    \n    ; Method 2: stretched averaging for more realistic decay\n    aPluck pluck kAmp, iFreq, iFreq, 0, 2, 0.5\n    \n    outs aPluck, aPluck\nendin\n\ninstr 3\n    ; Bass string with longer decay\n    kAmp linseg 0, 0.001, 0.5, p3-0.001, 0\n    \n    iFreq = p4\n    \n    ; Method 6: recursive filter for longer sustain\n    aPluck pluck kAmp, iFreq, iFreq, 0, 6, 0.9\n    \n    outs aPluck, aPluck\nendin\n\ninstr 4\n    ; Drum-like sound\n    kAmp linseg 0, 0.001, 0.6, p3-0.001, 0\n    \n    iFreq = p4\n    \n    ; Method 3: simple drum mode\n    aPluck pluck kAmp, iFreq, iFreq, 0, 3\n    \n    outs aPluck, aPluck\nendin\n\ninstr 5\n    ; Pitch bend on plucked string\n    kAmp linseg 0, 0.001, 0.4, p3-0.001, 0\n    \n    iFreq = p4\n    \n    ; Pitch bends down\n    kPitch linseg iFreq, p3, iFreq*0.8\n    \n    aPluck pluck kAmp, kPitch, iFreq, 0, 2, 0.5\n    \n    outs aPluck, aPluck\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play simple pluck\ni1 0 2 440\ni1 1 2 330\ni1 2 2 220\n\n; Play guitar-like\ni2 4.5 2 330\ni2 5.5 2 392\ni2 6.5 2 523\n\n; Play bass\ni3 9 3 110\ni3 10 3 165\n\n; Play drum-like\ni4 13.5 1 200\ni4 14.5 1 150\ni4 15.5 1 100\n\n; Play pitch bend\ni5 18 2 440\ni5 19 2 330\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the wgpluck opcode for waveguide plucked string synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; wgpluck opcode: ares wgpluck icps, iamp, kpick, iplk, idamp, ifilt, axcite\n    ; wgpluck is a more sophisticated waveguide plucked string model\n    ; icps - pitch in Hz\n    ; iamp - amplitude\n    ; kpick - pick position (0-1, 0.5 = center)\n    ; iplk - initial pluck position (0-1)\n    ; idamp - damping factor (0-1, higher = longer decay)\n    ; ifilt - filter cutoff factor (0-1, higher = brighter)\n    ; axcite - audio rate excitation signal\n    \n    ; Amplitude envelope for excitation\n    kAmp linseg 0, 0.001, 0.5, p3-0.001, 0\n    \n    ; Noise burst excitation\n    aExcite noise kAmp, 0\n    aExcite = aExcite * (1 - linseg(0, 0.01, 1, 0.001, 1))\n    \n    iFreq = p4\n    iAmp = 0.8\n    kPick = 0.1     ; Pick near bridge\n    iPlk = 0.5      ; Pluck at center\n    iDamp = 0.85    ; Good sustain\n    iFilt = 0.7     ; Moderate brightness\n    \n    aPluck wgpluck iFreq, iAmp, kPick, iPlk, iDamp, iFilt, aExcite\n    \n    outs aPluck*kAmp, aPluck*kAmp\nendin\n\ninstr 2\n    ; Guitar with different pick positions\n    kAmp linseg 0, 0.001, 0.4, p3-0.001, 0\n    \n    ; Impulse excitation\n    aExcite mpulse kAmp*0.5, 0\n    \n    iFreq = p4\n    iAmp = 0.8\n    kPick = p5      ; Pick position from score\n    iPlk = 0.5\n    iDamp = 0.9\n    iFilt = 0.8\n    \n    aPluck wgpluck iFreq, iAmp, kPick, iPlk, iDamp, iFilt, aExcite\n    \n    outs aPluck*kAmp, aPluck*kAmp\nendin\n\ninstr 3\n    ; Dark, muted string\n    kAmp linseg 0, 0.001, 0.35, p3-0.001, 0\n    \n    ; Filtered noise excitation\n    aNoise noise kAmp*0.4, 0\n    aExcite tone aNoise, 1000\n    aExcite = aExcite * (1 - linseg(0, 0.015, 1, 0.001, 1))\n    \n    iFreq = p4\n    iAmp = 0.8\n    kPick = 0.5\n    iPlk = 0.3\n    iDamp = 0.7     ; Shorter decay\n    iFilt = 0.3     ; Dark tone\n    \n    aPluck wgpluck iFreq, iAmp, kPick, iPlk, iDamp, iFilt, aExcite\n    \n    outs aPluck*kAmp, aPluck*kAmp\nendin\n\ninstr 4\n    ; Bright, sustained string\n    kAmp linseg 0, 0.001, 0.4, p3-0.001, 0\n    \n    ; Short impulse\n    aExcite mpulse kAmp*0.6, 0\n    \n    iFreq = p4\n    iAmp = 0.8\n    kPick = 0.05    ; Very close to bridge\n    iPlk = 0.7\n    iDamp = 0.95    ; Long decay\n    iFilt = 0.95    ; Very bright\n    \n    aPluck wgpluck iFreq, iAmp, kPick, iPlk, iDamp, iFilt, aExcite\n    \n    outs aPluck*kAmp, aPluck*kAmp\nendin\n\ninstr 5\n    ; Continuously excited string (bowed-like)\n    kAmp madsr 0.1, 0.2, 0.6, 0.3\n    \n    ; Continuous noise excitation\n    aExcite noise kAmp*0.05, 0\n    \n    iFreq = p4\n    iAmp = 0.8\n    kPick = 0.1\n    iPlk = 0.5\n    iDamp = 0.98\n    iFilt = 0.7\n    \n    aPluck wgpluck iFreq, iAmp, kPick, iPlk, iDamp, iFilt, aExcite\n    \n    outs aPluck*kAmp*0.5, aPluck*kAmp*0.5\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic wgpluck\ni1 0 2 440\ni1 1 2 330\ni1 2 2 220\n\n; Play different pick positions\n; Format: start dur freq pick_position\ni2 4.5 2 330 0.1   ; Near bridge\ni2 5.5 2 330 0.5   ; Center\ni2 6.5 2 330 0.9   ; Near neck\n\n; Play dark strings\ni3 9 2 220\ni3 10 2 165\n\n; Play bright strings\ni4 12.5 3 523\ni4 14 3 440\n\n; Play bowed-like\ni5 17 4 220\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the wgpluck2 opcode for enhanced waveguide plucked strings", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; wgpluck2 opcode: ares wgpluck2 iplk, kamp, icps, kpick, krefl\n    ; wgpluck2 is similar to wgpluck but with different control parameters\n    ; iplk - initial pluck position (0-0.999)\n    ; kamp - amplitude\n    ; icps - pitch in Hz\n    ; kpick - pick position (0-1)\n    ; krefl - reflection coefficient (-1 to 1, controls damping)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.001, 0.4, p3-0.001, 0\n    \n    iPlk = 0.5      ; Pluck at center\n    iFreq = p4\n    kPick = 0.1     ; Pick position\n    kRefl = 0.5     ; Reflection coefficient\n    \n    aPluck wgpluck2 iPlk, kAmp, iFreq, kPick, kRefl\n    \n    outs aPluck, aPluck\nendin\n\ninstr 2\n    ; Variable reflection for dynamic damping\n    kAmp linseg 0, 0.001, 0.35, p3-0.001, 0\n    \n    iPlk = 0.5\n    iFreq = p4\n    kPick = 0.15\n    \n    ; Reflection changes (damping increases)\n    kRefl linseg 0.9, p3, 0.2\n    \n    aPluck wgpluck2 iPlk, kAmp, iFreq, kPick, kRefl\n    \n    outs aPluck, aPluck\nendin\n\ninstr 3\n    ; High reflection for longer sustain\n    kAmp linseg 0, 0.001, 0.4, p3-0.001, 0\n    \n    iPlk = 0.7\n    iFreq = p4\n    kPick = 0.05\n    kRefl = 0.95    ; Very high reflection = long sustain\n    \n    aPluck wgpluck2 iPlk, kAmp, iFreq, kPick, kRefl\n    \n    outs aPluck, aPluck\nendin\n\ninstr 4\n    ; Low reflection for short, percussive sound\n    kAmp linseg 0, 0.001, 0.5, p3-0.001, 0\n    \n    iPlk = 0.3\n    iFreq = p4\n    kPick = 0.2\n    kRefl = 0.2     ; Low reflection = quick decay\n    \n    aPluck wgpluck2 iPlk, kAmp, iFreq, kPick, kRefl\n    \n    outs aPluck, aPluck\nendin\n\ninstr 5\n    ; Modulated pick position\n    kAmp linseg 0, 0.001, 0.35, p3-0.001, 0\n    \n    iPlk = 0.5\n    iFreq = p4\n    \n    ; LFO modulates pick position\n    kLFO oscili 0.3, 2, giSine\n    kPick = 0.4 + kLFO\n    \n    kRefl = 0.8\n    \n    aPluck wgpluck2 iPlk, kAmp, iFreq, kPick, kRefl\n    \n    outs aPluck, aPluck\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic wgpluck2\ni1 0 2 440\ni1 1 2 330\ni1 2 2 220\n\n; Play variable damping\ni2 4.5 3 330\ni2 5.5 3 220\n\n; Play long sustain\ni3 9 4 523\ni3 10.5 4 440\n\n; Play percussive\ni4 15 1 330\ni4 16 1 440\ni4 17 1 550\n\n; Play modulated\ni5 19 4 220\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the repluck opcode for re-excitation of plucked strings", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; repluck opcode: ares repluck iplk, kamp, icps, kpick, krefl, axcite\n    ; repluck allows continuous re-excitation of a plucked string\n    ; iplk - initial pluck position (0-0.999)\n    ; kamp - amplitude\n    ; icps - pitch in Hz\n    ; kpick - pick position (0-1)\n    ; krefl - reflection coefficient\n    ; axcite - audio rate excitation signal (for re-plucking)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.001, 0.4, p3-0.001, 0\n    \n    ; Initial impulse\n    aExcite mpulse kAmp*0.5, 0\n    \n    iPlk = 0.5\n    iFreq = p4\n    kPick = 0.1\n    kRefl = 0.85\n    \n    aPluck repluck iPlk, kAmp, iFreq, kPick, kRefl, aExcite\n    \n    outs aPluck, aPluck\nendin\n\ninstr 2\n    ; Re-pluck with multiple excitations\n    kAmp linseg 0, 0.001, 0.35, p3-0.001, 0\n    \n    ; Multiple impulses (strumming effect)\n    aExcite mpulse kAmp*0.4, 4\n    \n    iPlk = 0.5\n    iFreq = p4\n    kPick = 0.15\n    kRefl = 0.9\n    \n    aPluck repluck iPlk, kAmp, iFreq, kPick, kRefl, aExcite\n    \n    outs aPluck, aPluck\nendin\n\ninstr 3\n    ; Tremolo effect with noise excitation\n    kAmp linseg 0, 0.001, 0.3, p3-0.001, 0\n    \n    ; LFO-modulated noise for tremolo\n    kTrem oscili 0.8, 8, giSine\n    kTrem = 0.2 + kTrem\n    aNoise noise kAmp*0.05*kTrem, 0\n    \n    iPlk = 0.5\n    iFreq = p4\n    kPick = 0.1\n    kRefl = 0.92\n    \n    aPluck repluck iPlk, kAmp, iFreq, kPick, kRefl, aNoise\n    \n    outs aPluck*0.8, aPluck*0.8\nendin\n\ninstr 4\n    ; Bowed string simulation\n    kAmp madsr 0.1, 0.2, 0.6, 0.3\n    \n    ; Continuous low-level noise (bow friction)\n    aNoise noise kAmp*0.02, 0\n    \n    iPlk = 0.3\n    iFreq = p4\n    kPick = 0.05\n    kRefl = 0.98    ; Very high reflection for sustained tone\n    \n    aPluck repluck iPlk, kAmp, iFreq, kPick, kRefl, aNoise\n    \n    outs aPluck*0.5, aPluck*0.5\nendin\n\ninstr 5\n    ; Rhythmic re-plucking\n    kAmp linseg 0, 0.001, 0.35, p3-0.001, 0\n    \n    ; Rhythmic pulses\n    kPulseRate = 8  ; 8 Hz\n    aPulse mpulse kAmp*0.3, kPulseRate\n    \n    iPlk = 0.5\n    iFreq = p4\n    kPick = 0.2\n    kRefl = 0.75\n    \n    aPluck repluck iPlk, kAmp, iFreq, kPick, kRefl, aPulse\n    \n    outs aPluck, aPluck\nendin\n\ninstr 6\n    ; Distorted string with audio excitation\n    kAmp linseg 0, 0.001, 0.3, p3-0.001, 0\n    \n    ; Distorted excitation signal\n    aSaw vco2 kAmp*0.1, p4*0.5, 0\n    aExcite tanh aSaw*3\n    \n    iPlk = 0.5\n    iFreq = p4\n    kPick = 0.1\n    kRefl = 0.85\n    \n    aPluck repluck iPlk, kAmp, iFreq, kPick, kRefl, aExcite\n    \n    outs aPluck*0.6, aPluck*0.6\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic repluck\ni1 0 3 440\ni1 1 3 330\n\n; Play strumming\ni2 5 2 220\ni2 6 2 165\n\n; Play tremolo\ni3 9 4 330\n\n; Play bowed\ni4 14 4 220\ni4 15 4 330\n\n; Play rhythmic\ni5 20 3 440\n\n; Play distorted\ni6 24 3 165\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced plucked string techniques", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; Multi-string guitar simulation\n    kAmp linseg 0, 0.001, 0.25, p3-0.001, 0\n    \n    ; Excitation\n    aNoise noise kAmp*0.5, 0\n    aExcite = aNoise * (1 - linseg(0, 0.015, 1, 0.001, 1))\n    \n    ; Six strings with different parameters\n    iFreq1 = 82.4   ; E2\n    iFreq2 = 110    ; A2\n    iFreq3 = 147    ; D3\n    iFreq4 = 196    ; G3\n    iFreq5 = 247    ; B3\n    iFreq6 = 330    ; E4\n    \n    ; Generate strings with slightly different characteristics\n    aStr1 wgpluck iFreq1, 0.8, 0.1, 0.5, 0.88, 0.65, aExcite\n    aStr2 wgpluck iFreq2, 0.8, 0.12, 0.5, 0.89, 0.68, aExcite\n    aStr3 wgpluck iFreq3, 0.8, 0.11, 0.5, 0.90, 0.70, aExcite\n    aStr4 wgpluck iFreq4, 0.8, 0.13, 0.5, 0.91, 0.72, aExcite\n    aStr5 wgpluck iFreq5, 0.8, 0.10, 0.5, 0.92, 0.75, aExcite\n    aStr6 wgpluck iFreq6, 0.8, 0.09, 0.5, 0.93, 0.78, aExcite\n    \n    ; Mix with stereo spread\n    aLeft = (aStr1 + aStr2 + aStr3) * 0.4\n    aRight = (aStr4 + aStr5 + aStr6) * 0.4\n    \n    outs aLeft*kAmp*2, aRight*kAmp*2\nendin\n\ninstr 2\n    ; Harmonics (flageolet technique)\n    kAmp linseg 0, 0.001, 0.3, p3-0.001, 0\n    \n    iFreq = p4\n    \n    ; Fundamental\n    aFund pluck kAmp*0.3, iFreq, iFreq, 0, 1\n    \n    ; Harmonics (2x, 3x, 4x frequency)\n    aHarm2 pluck kAmp*0.2, iFreq*2, iFreq*2, 0, 1\n    aHarm3 pluck kAmp*0.15, iFreq*3, iFreq*3, 0, 1\n    aHarm4 pluck kAmp*0.1, iFreq*4, iFreq*4, 0, 1\n    \n    aMix = aFund + aHarm2 + aHarm3 + aHarm4\n    \n    outs aMix*0.7, aMix*0.7\nendin\n\ninstr 3\n    ; Prepared string with resonance\n    kAmp linseg 0, 0.001, 0.3, p3-0.001, 0\n    \n    ; Primary string\n    iFreq = p4\n    aPluck pluck kAmp*0.4, iFreq, iFreq, 0, 6, 0.9\n    \n    ; Sympathetic resonance strings\n    aSymp1 pluck kAmp*0.1, iFreq*1.5, iFreq*1.5, 0, 6, 0.85\n    aSymp2 pluck kAmp*0.08, iFreq*2, iFreq*2, 0, 6, 0.85\n    \n    ; Add resonance with comb filters\n    aComb1 comb aPluck, 2.0, 1/iFreq\n    aComb2 comb aPluck, 1.5, 1/(iFreq*1.5)\n    \n    aMix = aPluck*0.6 + aSymp1 + aSymp2 + aComb1*0.2 + aComb2*0.1\n    \n    outs aMix, aMix\nendin\n\ninstr 4\n    ; Slide guitar effect\n    kAmp linseg 0, 0.001, 0.35, p3-0.001, 0\n    \n    ; Slide from one pitch to another\n    iStart = p4\n    iEnd = p5\n    kPitch expseg iStart, p3, iEnd\n    \n    ; Continuous excitation for slide\n    aNoise noise kAmp*0.05, 0\n    \n    aSlide repluck 0.5, kAmp, kPitch, 0.08, 0.92, aNoise\n    \n    ; Add some vibrato\n    kVib oscili 0.01, 5, giSine\n    kVib = 1 + kVib\n    \n    outs aSlide*kVib, aSlide*kVib\nendin\n\ninstr 5\n    ; Palm muting simulation\n    kAmp linseg 0, 0.001, 0.4, p3-0.001, 0\n    \n    ; Muted excitation\n    aNoise noise kAmp*0.4, 0\n    aExcite tone aNoise, 800  ; Filter for muted sound\n    aExcite = aExcite * (1 - linseg(0, 0.01, 1, 0.001, 1))\n    \n    iFreq = p4\n    \n    ; Short decay for palm mute\n    aPluck wgpluck iFreq, 0.8, 0.5, 0.5, 0.4, 0.3, aExcite\n    \n    outs aPluck*kAmp, aPluck*kAmp\nendin\n\ninstr 6\n    ; Harp glissando\n    kAmp linseg 0, 0.001, 0.2, p3-0.001, 0\n    \n    ; Staggered plucks\n    iFreq = p4\n    iDelay = p5  ; Delay from previous note\n    \n    ; Delayed excitation\n    aExcite mpulse kAmp*0.5, 0\n    aExcite delay aExcite, iDelay\n    \n    aPluck wgpluck iFreq, 0.8, 0.1, 0.5, 0.95, 0.85, aExcite\n    \n    ; Stereo placement\n    iPan = (iFreq - 220) / 880  ; Pan based on pitch\n    iPan limit iPan, 0, 1\n    \n    aLeft = aPluck * sqrt(1 - iPan)\n    aRight = aPluck * sqrt(iPan)\n    \n    outs aLeft, aRight\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play guitar chord\ni1 0 3\n\n; Play harmonics\ni2 4 2 330\ni2 5 2 440\n\n; Play prepared string\ni3 7.5 3 220\n\n; Play slide guitar\n; Format: start dur start_freq end_freq\ni4 11 2 220 330\ni4 13 2 165 220\n\n; Play palm muted notes\ni5 16 0.5 220\ni5 16.5 0.5 220\ni5 17 0.5 165\ni5 17.5 0.5 165\ni5 18 0.5 220\n\n; Play harp glissando\n; Format: start dur freq delay\ni6 20 3 262 0\ni6 20 3 330 0.05\ni6 20 3 392 0.10\ni6 20 3 523 0.15\ni6 20 3 659 0.20\ni6 20 3 784 0.25\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
