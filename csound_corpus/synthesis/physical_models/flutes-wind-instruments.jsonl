{"instruction": "Write a CSound instrument that demonstrates the wgflute opcode for waveguide flute synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; wgflute opcode: ares wgflute kamp, kfreq, kjet, iatt, idetk, kngain, kvibf, kvamp [, ifn] [, iminfreq]\n    ; wgflute implements a physical model of a flute using waveguide synthesis\n    ; kamp - amplitude\n    ; kfreq - frequency in Hz\n    ; kjet - jet ratio (0-1, typically 0.3-0.6, controls air pressure)\n    ; iatt - attack time in seconds\n    ; idetk - detune parameter (0.1-0.3, controls detuning)\n    ; kngain - noise gain (0-1, breath noise)\n    ; kvibf - vibrato frequency in Hz\n    ; kvamp - vibrato amplitude (0-1)\n    ; ifn - vibrato waveform table\n    ; iminfreq - minimum expected frequency\n    \n    ; Amplitude envelope\n    kAmp madsr 0.1, 0.05, 0.8, 0.2\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Flute parameters\n    kJet = 0.45         ; Moderate air pressure\n    iAtt = 0.1          ; Attack time\n    iDetk = 0.2         ; Detuning\n    kNGain = 0.15       ; Breath noise\n    kVibF = 5           ; Vibrato frequency\n    kVibAmp = 0.003     ; Subtle vibrato\n    \n    aFlute wgflute kAmp*0.5, kFreq, kJet, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aFlute, aFlute\nendin\n\ninstr 2\n    ; Expressive flute with dynamic breath control\n    kAmp madsr 0.15, 0.1, 0.7, 0.3\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Varying jet ratio for expression\n    kJet linseg 0.3, p3*0.2, 0.5, p3*0.6, 0.4, p3*0.2, 0.35\n    \n    iAtt = 0.12\n    iDetk = 0.18\n    \n    ; Varying breath noise\n    kNGain linseg 0.2, p3*0.3, 0.1, p3*0.7, 0.15\n    \n    kVibF = 5.5\n    kVibAmp = 0.007\n    \n    aFlute wgflute kAmp*0.5, kFreq, kJet, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aFlute, aFlute\nendin\n\ninstr 3\n    ; Fast attack flute\n    kAmp madsr 0.05, 0.05, 0.8, 0.2\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kJet = 0.55         ; Higher pressure for attack\n    iAtt = 0.05         ; Quick attack\n    iDetk = 0.15\n    kNGain = 0.2        ; More breath noise\n    kVibF = 6\n    kVibAmp = 0.005\n    \n    aFlute wgflute kAmp*0.5, kFreq, kJet, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aFlute, aFlute\nendin\n\ninstr 4\n    ; Breathy flute tone\n    kAmp madsr 0.15, 0.1, 0.7, 0.3\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kJet = 0.35         ; Lower pressure\n    iAtt = 0.15\n    iDetk = 0.25        ; More detuning\n    kNGain = 0.4        ; High breath noise\n    kVibF = 4.5\n    kVibAmp = 0.008\n    \n    aFlute wgflute kAmp*0.45, kFreq, kJet, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aFlute, aFlute\nendin\n\ninstr 5\n    ; Flute with vibrato crescendo\n    kAmp madsr 0.12, 0.08, 0.75, 0.3\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kJet = 0.45\n    iAtt = 0.1\n    iDetk = 0.2\n    kNGain = 0.15\n    \n    ; Vibrato increases over time\n    kVibF = 5.5\n    kVibAmp linseg 0, p3*0.3, 0.002, p3*0.7, 0.015\n    \n    aFlute wgflute kAmp*0.5, kFreq, kJet, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aFlute, aFlute\nendin\n\ninstr 6\n    ; Flute glissando\n    kAmp madsr 0.12, 0.08, 0.75, 0.25\n    \n    iStart = p4\n    iEnd = p5\n    \n    ; Smooth pitch glide\n    kFreq expseg iStart, p3, iEnd\n    \n    kJet = 0.42\n    iAtt = 0.1\n    iDetk = 0.2\n    kNGain = 0.12\n    kVibF = 5\n    kVibAmp = 0.004\n    \n    aFlute wgflute kAmp*0.5, kFreq, kJet, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aFlute, aFlute\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic flute\ni1 0 2 440\ni1 2.5 2 523\ni1 5 3 660\n\n; Play expressive\ni2 9 4 392\n\n; Play fast attack\ni3 14 1 880\ni3 15 1 784\ni3 16 1 659\n\n; Play breathy\ni4 18 3 330\n\n; Play with vibrato crescendo\ni5 22 4 523\n\n; Play glissando\n; Format: start dur start_freq end_freq\ni6 27 2 440 880\ni6 29.5 2 660 330\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the wgbrass opcode for waveguide brass synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; wgbrass opcode: ares wgbrass kamp, kfreq, ktens, iatt, kvibf, kvamp [, ifn] [, iminfreq]\n    ; wgbrass implements a physical model of a brass instrument using waveguide synthesis\n    ; kamp - amplitude\n    ; kfreq - frequency in Hz\n    ; ktens - lip tension (0-1, typically 0.4-0.9, controls timbre)\n    ; iatt - attack time in seconds\n    ; kvibf - vibrato frequency in Hz\n    ; kvamp - vibrato amplitude (0-1)\n    ; ifn - vibrato waveform table\n    ; iminfreq - minimum expected frequency\n    \n    ; Amplitude envelope\n    kAmp madsr 0.1, 0.05, 0.8, 0.2\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Brass parameters\n    kTens = 0.6         ; Moderate lip tension\n    iAtt = 0.1          ; Attack time\n    kVibF = 4.5         ; Vibrato frequency\n    kVibAmp = 0.005     ; Subtle vibrato\n    \n    aBrass wgbrass kAmp*0.5, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    outs aBrass, aBrass\nendin\n\ninstr 2\n    ; Trumpet with bright tone\n    kAmp madsr 0.08, 0.05, 0.85, 0.2\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kTens = 0.75        ; Higher tension for brightness\n    iAtt = 0.08\n    kVibF = 5\n    kVibAmp = 0.007\n    \n    aBrass wgbrass kAmp*0.5, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    outs aBrass, aBrass\nendin\n\ninstr 3\n    ; Trombone with mellow tone\n    kAmp madsr 0.15, 0.1, 0.75, 0.3\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kTens = 0.45        ; Lower tension for mellowness\n    iAtt = 0.15\n    kVibF = 4\n    kVibAmp = 0.008\n    \n    aBrass wgbrass kAmp*0.5, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    outs aBrass, aBrass\nendin\n\ninstr 4\n    ; French horn\n    kAmp madsr 0.2, 0.1, 0.7, 0.3\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kTens = 0.55\n    iAtt = 0.2          ; Softer attack\n    kVibF = 4.5\n    kVibAmp = 0.006\n    \n    aBrass wgbrass kAmp*0.45, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    ; Add warmth with filtering\n    aBrass tone aBrass, 3000\n    \n    outs aBrass, aBrass\nendin\n\ninstr 5\n    ; Crescendo with increasing tension\n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Dynamic amplitude\n    kAmp linseg 0.1, p3*0.8, 0.7, p3*0.2, 0.5\n    \n    ; Lip tension increases with volume\n    kTens linseg 0.4, p3*0.8, 0.8, p3*0.2, 0.7\n    \n    iAtt = 0.15\n    kVibF = 5\n    kVibAmp = 0.007\n    \n    aBrass wgbrass kAmp*0.5, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    outs aBrass, aBrass\nendin\n\ninstr 6\n    ; Brass fall-off (pitch bend down)\n    kAmp madsr 0.05, 0.05, 0.8, 0.2\n    \n    iFreq = p4\n    \n    ; Fall at end of note\n    kFreq linseg iFreq, p3*0.7, iFreq, p3*0.3, iFreq*0.7\n    \n    ; Decrease tension during fall\n    kTens linseg 0.7, p3*0.7, 0.7, p3*0.3, 0.4\n    \n    iAtt = 0.05\n    kVibF = 4\n    kVibAmp = 0.005\n    \n    aBrass wgbrass kAmp*0.5, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    outs aBrass, aBrass\nendin\n\ninstr 7\n    ; Brass section (multiple instruments)\n    kAmp madsr 0.12, 0.08, 0.75, 0.25\n    \n    iFreq = p4\n    \n    ; Three voices slightly detuned\n    kFreq1 = iFreq * 0.998\n    kFreq2 = iFreq\n    kFreq3 = iFreq * 1.002\n    \n    kTens = 0.65\n    iAtt = 0.1\n    kVibF = 4.8\n    kVibAmp = 0.006\n    \n    ; Generate three brass voices\n    aBrass1 wgbrass kAmp*0.3, kFreq1, kTens, iAtt, kVibF, kVibAmp, giSine\n    aBrass2 wgbrass kAmp*0.3, kFreq2, kTens*1.05, iAtt, kVibF*1.05, kVibAmp, giSine\n    aBrass3 wgbrass kAmp*0.3, kFreq3, kTens*0.95, iAtt, kVibF*0.95, kVibAmp, giSine\n    \n    ; Stereo spread\n    aLeft = aBrass1*0.7 + aBrass2*0.5 + aBrass3*0.3\n    aRight = aBrass1*0.3 + aBrass2*0.5 + aBrass3*0.7\n    \n    outs aLeft, aRight\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic brass\ni1 0 2 330\ni1 2.5 2 392\ni1 5 3 440\n\n; Play trumpet\ni2 9 2 523\ni2 11 2 659\n\n; Play trombone\ni3 14 3 220\ni3 17 3 165\n\n; Play french horn\ni4 21 3 330\n\n; Play crescendo\ni5 25 4 392\n\n; Play fall-off\ni6 30 2 440\ni6 32 2 523\n\n; Play brass section\ni7 35 4 330\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the wgclar opcode for waveguide clarinet synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; wgclar opcode: ares wgclar kamp, kfreq, kstiff, iatt, idetk, kngain, kvibf, kvamp [, ifn] [, iminfreq]\n    ; wgclar implements a physical model of a clarinet using waveguide synthesis\n    ; kamp - amplitude\n    ; kfreq - frequency in Hz\n    ; kstiff - reed stiffness (0-1, typically 0.3-0.7, controls tone)\n    ; iatt - attack time in seconds\n    ; idetk - detune parameter (0.1-0.3)\n    ; kngain - noise gain (0-1, breath noise)\n    ; kvibf - vibrato frequency in Hz\n    ; kvamp - vibrato amplitude (0-1)\n    ; ifn - vibrato waveform table\n    ; iminfreq - minimum expected frequency\n    \n    ; Amplitude envelope\n    kAmp madsr 0.1, 0.05, 0.8, 0.2\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Clarinet parameters\n    kStiff = 0.5        ; Moderate reed stiffness\n    iAtt = 0.1          ; Attack time\n    iDetk = 0.2         ; Detuning\n    kNGain = 0.1        ; Breath noise\n    kVibF = 5           ; Vibrato frequency\n    kVibAmp = 0.004     ; Subtle vibrato\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\ninstr 2\n    ; Bright clarinet with stiff reed\n    kAmp madsr 0.08, 0.05, 0.85, 0.2\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kStiff = 0.7        ; Stiff reed for brightness\n    iAtt = 0.08\n    iDetk = 0.15\n    kNGain = 0.08\n    kVibF = 5.5\n    kVibAmp = 0.006\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\ninstr 3\n    ; Dark, mellow clarinet\n    kAmp madsr 0.15, 0.1, 0.75, 0.3\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kStiff = 0.35       ; Soft reed for mellowness\n    iAtt = 0.15\n    iDetk = 0.25\n    kNGain = 0.12\n    kVibF = 4.5\n    kVibAmp = 0.008\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\ninstr 4\n    ; Expressive clarinet with dynamic control\n    kAmp madsr 0.12, 0.08, 0.75, 0.25\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Varying stiffness for expression\n    kStiff linseg 0.4, p3*0.3, 0.6, p3*0.4, 0.55, p3*0.3, 0.45\n    \n    iAtt = 0.1\n    iDetk = 0.2\n    \n    ; Varying breath noise\n    kNGain linseg 0.15, p3*0.5, 0.08, p3*0.5, 0.12\n    \n    kVibF = 5.2\n    kVibAmp = 0.007\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\ninstr 5\n    ; Chalumeau register (low clarinet)\n    kAmp madsr 0.2, 0.1, 0.7, 0.3\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kStiff = 0.4        ; Softer for low register\n    iAtt = 0.15\n    iDetk = 0.3         ; More detuning\n    kNGain = 0.2        ; More breath noise\n    kVibF = 4\n    kVibAmp = 0.01\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    ; Emphasize low frequencies\n    aClar tone aClar, 1500\n    \n    outs aClar, aClar\nendin\n\ninstr 6\n    ; Clarion register (high clarinet)\n    kAmp madsr 0.08, 0.05, 0.85, 0.2\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kStiff = 0.65       ; Stiffer for high register\n    iAtt = 0.06\n    iDetk = 0.12\n    kNGain = 0.06\n    kVibF = 6\n    kVibAmp = 0.005\n    \n    aClar wgclar kAmp*0.45, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\ninstr 7\n    ; Glissando\n    kAmp madsr 0.12, 0.08, 0.75, 0.25\n    \n    iStart = p4\n    iEnd = p5\n    \n    ; Smooth pitch glide\n    kFreq expseg iStart, p3, iEnd\n    \n    kStiff = 0.5\n    iAtt = 0.1\n    iDetk = 0.2\n    kNGain = 0.1\n    kVibF = 5\n    kVibAmp = 0.004\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic clarinet\ni1 0 2 330\ni1 2.5 2 392\ni1 5 3 440\n\n; Play bright clarinet\ni2 9 2 523\ni2 11 2 659\n\n; Play dark clarinet\ni3 14 3 247\n\n; Play expressive\ni4 18 4 392\n\n; Play chalumeau register\ni5 23 3 165\ni5 26 3 196\n\n; Play clarion register\ni6 30 2 784\ni6 32 2 880\n\n; Play glissando\n; Format: start dur start_freq end_freq\ni7 35 2 330 660\ni7 37.5 2 523 262\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced woodwind ensemble techniques", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; Woodwind trio (flute, clarinet, brass)\n    kAmp madsr 0.15, 0.1, 0.7, 0.3\n    \n    iFreq = p4\n    \n    ; Flute (highest)\n    kFreqFlute = iFreq * 2\n    aFlute wgflute kAmp*0.3, kFreqFlute, 0.45, 0.1, 0.2, 0.12, 5, 0.005, giSine\n    \n    ; Clarinet (middle)\n    kFreqClar = iFreq\n    aClar wgclar kAmp*0.35, kFreqClar, 0.5, 0.1, 0.2, 0.1, 5.2, 0.006, giSine\n    \n    ; Brass (bass)\n    kFreqBrass = iFreq * 0.5\n    aBrass wgbrass kAmp*0.4, kFreqBrass, 0.55, 0.12, 4.5, 0.007, giSine\n    \n    ; Mix with stereo spread\n    aLeft = aFlute*0.7 + aClar*0.5 + aBrass*0.3\n    aRight = aFlute*0.3 + aClar*0.5 + aBrass*0.7\n    \n    outs aLeft*0.7, aRight*0.7\nendin\n\ninstr 2\n    ; Flutter tonguing\n    kAmp madsr 0.1, 0.05, 0.8, 0.2\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Rapid amplitude modulation for flutter\n    kFlutter oscili 0.5, 15, giSine\n    kFlutter = 0.5 + kFlutter\n    \n    kStiff = 0.5\n    iAtt = 0.08\n    iDetk = 0.2\n    kNGain = 0.15\n    kVibF = 5\n    kVibAmp = 0.005\n    \n    aClar wgclar kAmp*kFlutter*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\ninstr 3\n    ; Multiphonics (clarinet playing two notes)\n    kAmp madsr 0.15, 0.1, 0.7, 0.3\n    \n    ; Two frequencies\n    iFreq1 = p4\n    iFreq2 = p5\n    \n    kFreq1 = iFreq1\n    kFreq2 = iFreq2\n    \n    ; Different reed stiffness for each\n    kStiff1 = 0.45\n    kStiff2 = 0.6\n    \n    iAtt = 0.12\n    iDetk = 0.25\n    kNGain = 0.2\n    kVibF = 4.5\n    kVibAmp = 0.008\n    \n    aClar1 wgclar kAmp*0.35, kFreq1, kStiff1, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    aClar2 wgclar kAmp*0.35, kFreq2, kStiff2, iAtt, iDetk*0.8, kNGain*0.8, kVibF*1.1, kVibAmp, giSine\n    \n    aMix = aClar1 + aClar2\n    \n    outs aMix*0.7, aMix*0.7\nendin\n\ninstr 4\n    ; Breathy flute with key clicks\n    kAmp madsr 0.15, 0.1, 0.7, 0.3\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Very breathy\n    kJet = 0.3\n    iAtt = 0.15\n    iDetk = 0.3\n    kNGain = 0.5        ; High breath noise\n    kVibF = 4\n    kVibAmp = 0.01\n    \n    aFlute wgflute kAmp*0.4, kFreq, kJet, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    ; Add key click sounds\n    aClick mpulse 0.1, 8\n    aClick butterbp aClick, 2000, 500\n    \n    aMix = aFlute + aClick*0.3\n    \n    outs aMix, aMix\nendin\n\ninstr 5\n    ; Brass lip trill\n    kAmp madsr 0.1, 0.05, 0.8, 0.2\n    \n    iFreq1 = p4\n    iFreq2 = p5\n    \n    ; Alternate between two pitches rapidly\n    kToggle lfo 1, 6, 1  ; Square wave at 6 Hz\n    kFreq = (kToggle > 0 ? iFreq1 : iFreq2)\n    \n    kTens = 0.7\n    iAtt = 0.05\n    kVibF = 5\n    kVibAmp = 0.005\n    \n    aBrass wgbrass kAmp*0.5, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    outs aBrass, aBrass\nendin\n\ninstr 6\n    ; Clarinet arpeggio\n    kAmp madsr 0.08, 0.05, 0.85, 0.15\n    \n    ; Frequency changes during note\n    iRoot = p4\n    kTime timeinsts\n    kStep = int(kTime * 8) % 4\n    \n    ; Arpeggio pattern\n    if kStep == 0 then\n        kFreq = iRoot\n    elseif kStep == 1 then\n        kFreq = iRoot * 5/4\n    elseif kStep == 2 then\n        kFreq = iRoot * 3/2\n    else\n        kFreq = iRoot * 2\n    endif\n    \n    kStiff = 0.6\n    iAtt = 0.05\n    iDetk = 0.15\n    kNGain = 0.08\n    kVibF = 5.5\n    kVibAmp = 0.004\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\ninstr 7\n    ; Brass muted sound\n    kAmp madsr 0.1, 0.05, 0.8, 0.2\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    kTens = 0.7\n    iAtt = 0.08\n    kVibF = 4.5\n    kVibAmp = 0.006\n    \n    aBrass wgbrass kAmp*0.4, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    ; Mute effect with resonant filter\n    aMuted butterbp aBrass, 800, 300\n    \n    ; Mix original and muted\n    aMix = aBrass*0.3 + aMuted*0.7\n    \n    outs aMix, aMix\nendin\n\ninstr 8\n    ; Wind ensemble chord\n    kAmp madsr 0.2, 0.15, 0.7, 0.4\n    \n    ; Root chord from score\n    iRoot = p4\n    i3rd = iRoot * 5/4\n    i5th = iRoot * 3/2\n    i8ve = iRoot * 2\n    \n    ; Four voices: 2 flutes, 1 clarinet, 1 brass\n    aFlute1 wgflute kAmp*0.25, i8ve*0.999, 0.45, 0.1, 0.2, 0.12, 5, 0.005, giSine\n    aFlute2 wgflute kAmp*0.25, i5th*1.001, 0.47, 0.11, 0.19, 0.13, 5.2, 0.006, giSine\n    aClar wgclar kAmp*0.3, i3rd*0.998, 0.5, 0.1, 0.2, 0.1, 5.1, 0.005, giSine\n    aBrass wgbrass kAmp*0.35, iRoot*1.002, 0.55, 0.12, 4.8, 0.006, giSine\n    \n    ; Stereo mix\n    aLeft = aFlute1*0.7 + aFlute2*0.4 + aClar*0.5 + aBrass*0.3\n    aRight = aFlute1*0.3 + aFlute2*0.5 + aClar*0.4 + aBrass*0.7\n    \n    outs aLeft*0.6, aRight*0.6\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play woodwind trio\ni1 0 4 330\n\n; Play flutter tonguing\ni2 5 3 440\n\n; Play multiphonics\n; Format: start dur freq1 freq2\ni3 9 3 330 494\n\n; Play breathy flute\ni4 13 3 523\n\n; Play brass lip trill\n; Format: start dur freq1 freq2\ni5 17 2 440 494\ni5 19 2 523 587\n\n; Play clarinet arpeggio\ni6 22 2 330\n\n; Play muted brass\ni7 25 2 330\ni7 27 2 392\ni7 29 2 440\n\n; Play wind ensemble chord\ni8 32 5 220  ; Major chord\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates jazz and classical wind instrument performance styles", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; Jazz clarinet with bent notes\n    kAmp madsr 0.1, 0.05, 0.8, 0.2\n    \n    iFreq = p4\n    \n    ; Pitch bend envelope\n    kBend linseg 0, p3*0.1, 0, p3*0.15, 0.05, p3*0.25, 0, p3*0.5, 0\n    kFreq = iFreq * (1 + kBend)\n    \n    ; Jazz style - more aggressive\n    kStiff = 0.65\n    iAtt = 0.05\n    iDetk = 0.15\n    kNGain = 0.15\n    kVibF = 6\n    kVibAmp = 0.012  ; Wide vibrato\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\ninstr 2\n    ; Classical flute with pure tone\n    kAmp madsr 0.15, 0.1, 0.75, 0.35\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Classical style - controlled\n    kJet = 0.48\n    iAtt = 0.12\n    iDetk = 0.18\n    kNGain = 0.08    ; Less breath noise\n    \n    ; Refined vibrato that grows\n    kVibF = 5.5\n    kVibAmp linseg 0, p3*0.4, 0.003, p3*0.6, 0.007\n    \n    aFlute wgflute kAmp*0.5, kFreq, kJet, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aFlute, aFlute\nendin\n\ninstr 3\n    ; Jazz trumpet with fall-off and shake\n    kAmp madsr 0.05, 0.05, 0.85, 0.15\n    \n    iFreq = p4\n    \n    ; Fall-off at end\n    kFreq linseg iFreq, p3*0.7, iFreq, p3*0.3, iFreq*0.6\n    \n    ; Shake (fast vibrato) at end\n    kVibF linseg 5, p3*0.7, 5, p3*0.3, 12\n    kVibAmp linseg 0.005, p3*0.7, 0.005, p3*0.3, 0.03\n    \n    kTens = 0.75\n    iAtt = 0.05\n    \n    aBrass wgbrass kAmp*0.5, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    outs aBrass, aBrass\nendin\n\ninstr 4\n    ; Classical french horn with noble sound\n    kAmp madsr 0.25, 0.2, 0.65, 0.45\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Mellow horn\n    kTens = 0.5\n    iAtt = 0.25\n    kVibF = 4\n    kVibAmp = 0.004  ; Subtle vibrato\n    \n    aBrass wgbrass kAmp*0.45, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    ; Warm filtering\n    aBrass tone aBrass, 2500\n    aBrass tone aBrass, 3000\n    \n    outs aBrass, aBrass\nendin\n\ninstr 5\n    ; Bebop-style rapid notes\n    kAmp linseg 0, 0.001, 0.6, p3-0.051, 0.4, 0.05, 0\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Fast, articulated\n    kStiff = 0.7\n    iAtt = 0.02      ; Very fast attack\n    iDetk = 0.12\n    kNGain = 0.1\n    kVibF = 0        ; No vibrato for bebop\n    kVibAmp = 0\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\ninstr 6\n    ; Baroque flute with minimal vibrato\n    kAmp madsr 0.12, 0.08, 0.75, 0.25\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Period style\n    kJet = 0.42\n    iAtt = 0.1\n    iDetk = 0.22\n    kNGain = 0.18    ; More breath noise\n    kVibF = 0        ; No vibrato in Baroque style\n    kVibAmp = 0\n    \n    aFlute wgflute kAmp*0.45, kFreq, kJet, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aFlute, aFlute\nendin\n\ninstr 7\n    ; Big band brass hit\n    kAmp linseg 0, 0.005, 0.8, 0.05, 0.6, p3-0.155, 0.6, 0.1, 0\n    \n    iFreq = p4\n    kFreq = iFreq\n    \n    ; Punchy brass\n    kTens = 0.8      ; High tension\n    iAtt = 0.005     ; Very quick attack\n    kVibF = 5\n    kVibAmp = 0.008\n    \n    aBrass wgbrass kAmp*0.6, kFreq, kTens, iAtt, kVibF, kVibAmp, giSine\n    \n    ; Add bite with distortion\n    aBrass tanh aBrass*2\n    \n    outs aBrass*0.7, aBrass*0.7\nendin\n\ninstr 8\n    ; Klezmer clarinet with scoops and wails\n    kAmp madsr 0.08, 0.05, 0.8, 0.2\n    \n    iFreq = p4\n    \n    ; Dramatic pitch scoops\n    kScoop linseg iFreq*0.7, p3*0.15, iFreq, p3*0.85, iFreq\n    kFreq = kScoop\n    \n    ; Expressive reed\n    kStiff linseg 0.4, p3*0.3, 0.65, p3*0.4, 0.6, p3*0.3, 0.5\n    \n    iAtt = 0.08\n    iDetk = 0.2\n    kNGain = 0.15\n    \n    ; Expressive vibrato\n    kVibF = 6.5\n    kVibAmp linseg 0.008, p3*0.3, 0.015, p3*0.4, 0.012, p3*0.3, 0.02\n    \n    aClar wgclar kAmp*0.5, kFreq, kStiff, iAtt, iDetk, kNGain, kVibF, kVibAmp, giSine\n    \n    outs aClar, aClar\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play jazz clarinet\ni1 0 2 440\ni1 2.5 2 523\n\n; Play classical flute\ni2 5.5 3 660\n\n; Play jazz trumpet\ni3 9.5 2 523\ni3 11.5 2 440\n\n; Play french horn\ni4 14.5 4 330\n\n; Play bebop clarinet run\ni5 19.5 0.3 523\ni5 19.8 0.3 587\ni5 20.1 0.3 659\ni5 20.4 0.3 784\ni5 20.7 0.3 880\ni5 21.0 0.3 784\ni5 21.3 0.3 659\n\n; Play baroque flute\ni6 23 2 392\ni6 25 2 440\ni6 27 3 330\n\n; Play big band hits\ni7 31 1 330\ni7 32.5 1 392\ni7 34 1 330\n\n; Play klezmer clarinet\ni8 36 3 330\ni8 39 3 392\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
