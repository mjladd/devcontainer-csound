{"instruction": "Write a CSound instrument that demonstrates the buthp opcode for second-order Butterworth high-pass filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; buthp opcode: ares buthp asig, kfreq [, iskip]\n    ; buthp is a second-order Butterworth high-pass filter\n    ; asig - input audio signal\n    ; kfreq - cutoff frequency in Hz\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate signal with low and high frequency content\n    aLow poscil kAmp*0.5, 110, giSine\n    aMid poscil kAmp*0.3, 440, giSine\n    aHigh poscil kAmp*0.2, 1760, giSine\n    aMix = aLow + aMid + aHigh\n    \n    ; Sweep high-pass cutoff frequency\n    kCutoff linseg 100, p3, 1000\n    \n    ; Apply Butterworth high-pass filter\n    aFilt buthp aMix, kCutoff\n    \n    out aFilt\nendin\n\ninstr 2\n    ; Remove low-frequency rumble from noise\n    kAmp madsr 0.01, 0.1, 0.7, 0.3\n    \n    ; Generate noise with DC offset\n    aNoise noise kAmp*0.4, 0\n    \n    ; Remove DC and very low frequencies\n    aClean buthp aNoise, 50\n    \n    out aClean\nendin\n\ninstr 3\n    ; Create \"thin\" synth sound by filtering out bass\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; Generate full-spectrum sawtooth\n    aSaw vco2 kAmp, 220, 0\n    \n    ; High-pass to remove low frequencies\n    kCutoff = 800\n    aFilt buthp aSaw, kCutoff\n    \n    out aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play frequency sweep\ni1 0 4\n; Play filtered noise\ni2 4.5 3\n; Play thin synth\ni3 8 2.5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the atone opcode for first-order recursive high-pass filtering to remove DC offset", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; atone opcode: ares atone asig, khp [, iskip]\n    ; atone is a first-order recursive high-pass filter\n    ; asig - input audio signal\n    ; khp - half-power point (cutoff frequency in Hz)\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate signal with unwanted DC component\n    aSaw vco2 kAmp, 220, 0\n    aSaw = aSaw + 0.15  ; Add DC offset\n    \n    ; Remove DC offset with very low cutoff\n    aClean atone aSaw, 10\n    \n    outs aClean, aClean\nendin\n\ninstr 2\n    ; Emphasize high frequencies\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; Generate triangle wave\n    aTri vco2 kAmp*0.4, 330, 4\n    \n    ; Variable high-pass cutoff\n    kCutoff linseg 50, p3, 600\n    \n    ; Apply high-pass filter\n    aFilt atone aTri, kCutoff\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Create \"telephone\" effect by removing lows\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; Voice-like buzz source\n    aBuzz buzz kAmp*0.3, 150, 15, 1\n    \n    ; High-pass to simulate telephone\n    aHP atone aBuzz, 300\n    \n    outs aHP, aHP\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Cosine for buzz\nf1 0 8192 11 1\n\n; Play DC removal\ni1 0 3\n; Play variable high-pass\ni2 3.5 3\n; Play telephone effect\ni3 7 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the atonex opcode for resistor-capacitor high-pass filter emulation", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: square wave\ngiSquare ftgen 1, 0, 8192, 10, 1, 0, 0.333, 0, 0.2, 0, 0.142, 0, 0.111\n\ninstr 1\n    ; atonex opcode: ares atonex asig, khp, inumlayer [, iskip]\n    ; atonex emulates a resistor-capacitor high-pass filter\n    ; asig - input audio signal\n    ; khp - half-power point (cutoff frequency in Hz)\n    ; inumlayer - number of filter layers (1-4 for steeper slopes)\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate square wave with rich harmonics\n    aSq poscil kAmp, 165, giSquare\n    \n    ; Variable cutoff frequency\n    kCutoff linseg 100, p3, 800\n    \n    ; Apply atonex with 2 layers for 12dB/octave slope\n    aFiltL atonex aSq, kCutoff, 2\n    aFiltR atonex aSq, kCutoff*1.01, 2\n    \n    outs aFiltL, aFiltR\nendin\n\ninstr 2\n    ; Steep high-pass filtering with 4 layers\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    ; Full-spectrum sawtooth\n    aSaw vco2 kAmp*0.35, 220, 0\n    \n    ; Fixed cutoff\n    kCutoff = 500\n    \n    ; 4-layer filter for steep 24dB/octave rolloff\n    aFilt atonex aSaw, kCutoff, 4\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Compare different filter slopes\n    kAmp linseg 0, 0.1, 0.35, p3-0.2, 0.35, 0.1, 0\n    \n    ; Buzz with many harmonics\n    aBuzz buzz kAmp*0.3, 110, 30, 1\n    \n    ; Fixed cutoff at 300 Hz\n    kCutoff = 300\n    \n    ; Time changes number of layers\n    kTime timeinsts\n    kLayers = (kTime < p3/3) ? 1 : (kTime < 2*p3/3) ? 2 : 4\n    \n    ; Apply filter with varying slope\n    aFilt atonex aBuzz, kCutoff, kLayers\n    \n    outs aFilt, aFilt\nendin\n\ninstr 4\n    ; Create bright metallic sound\n    kAmp madsr 0.005, 0.05, 0.4, 0.2\n    \n    ; Multiple detuned oscillators\n    aSaw1 vco2 kAmp*0.15, 440, 0\n    aSaw2 vco2 kAmp*0.15, 442, 0\n    aSaw3 vco2 kAmp*0.15, 438, 0\n    aMix = aSaw1 + aSaw2 + aSaw3\n    \n    ; Aggressive high-pass to create thin, bright tone\n    kCutoff = 1200\n    aFilt atonex aMix, kCutoff, 3\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Cosine for buzz\nf1 0 8192 11 1\n\n; Play variable cutoff sweep\ni1 0 4\n; Play steep filtering\ni2 4.5 3\n; Play varying slope demonstration\ni3 8 3\n; Play metallic bright sound\ni4 11.5 2\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates using atone for creating a bandpass effect by combining with low-pass filter", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\ninstr 1\n    ; atone opcode: ares atone asig, khp [, iskip]\n    ; Combine atone (high-pass) with tone (low-pass) to create bandpass\n    ; asig - input audio signal\n    ; khp - half-power point for high-pass\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; Generate white noise\n    aNoise noise kAmp, 0\n    \n    ; High-pass cutoff (removes lows)\n    kHPCutoff = 500\n    \n    ; Low-pass cutoff (removes highs)\n    kLPCutoff = 2000\n    \n    ; Create bandpass by cascading filters\n    aHP atone aNoise, kHPCutoff\n    aBP tone aHP, kLPCutoff\n    \n    out aBP\nendin\n\ninstr 2\n    ; Sweeping bandpass effect\n    kAmp madsr 0.01, 0.1, 0.7, 0.3\n    \n    ; Sawtooth source\n    aSaw vco2 kAmp*0.35, 110, 0\n    \n    ; Sweep the band center\n    kCenter expseg 200, p3, 3000\n    \n    ; Bandwidth of ~2 octaves\n    kHPCutoff = kCenter * 0.5\n    kLPCutoff = kCenter * 2\n    \n    ; Create sweeping bandpass\n    aHP atone aSaw, kHPCutoff\n    aBP tone aHP, kLPCutoff\n    \n    out aBP\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play fixed bandpass on noise\ni1 0 3\n; Play sweeping bandpass\ni2 3.5 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates buthp for creating hi-hat sounds by filtering white noise", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; buthp opcode: ares buthp asig, kfreq [, iskip]\n    ; Create hi-hat sound using high-pass filtered noise\n    ; asig - input audio signal\n    ; kfreq - cutoff frequency in Hz\n    \n    ; Sharp envelope for hi-hat\n    kAmp expseg 0.001, 0.001, 0.6, p3-0.001, 0.001\n    \n    ; Generate white noise\n    aNoise noise kAmp, 0\n    \n    ; High-pass filter to keep only high frequencies\n    kCutoff = 7000\n    aHP buthp aNoise, kCutoff\n    \n    ; Add slight resonance with bandpass\n    aRes reson aHP, 9000, 1000\n    aRes balance aRes, aHP\n    \n    ; Mix filtered signals\n    aMix = aHP + aRes*0.3\n    \n    outs aMix*0.5, aMix*0.5\nendin\n\ninstr 2\n    ; Open hi-hat (longer decay)\n    kAmp expseg 0.001, 0.002, 0.5, p3-0.002, 0.001\n    \n    ; White noise source\n    aNoise noise kAmp, 0\n    \n    ; High-pass filtering\n    kCutoff = 6000\n    aHP buthp aNoise, kCutoff\n    \n    ; Multiple resonant peaks\n    aRes1 reson aHP, 8000, 800\n    aRes2 reson aHP, 11000, 1200\n    aRes1 balance aRes1, aHP\n    aRes2 balance aRes2, aHP\n    \n    aMix = aHP*0.5 + aRes1*0.3 + aRes2*0.2\n    \n    outs aMix*0.5, aMix*0.5\nendin\n\ninstr 3\n    ; Closed hi-hat (short, crisp)\n    kAmp expseg 0.001, 0.001, 0.7, 0.05, 0.001\n    \n    ; Noise\n    aNoise noise kAmp, 0\n    \n    ; Aggressive high-pass\n    aHP buthp aNoise, 8000\n    aHP buthp aHP, 5000\n    \n    ; Single resonance\n    aRes reson aHP, 10000, 1500\n    aRes balance aRes, aHP\n    \n    aMix = aHP*0.6 + aRes*0.4\n    \n    outs aMix*0.5, aMix*0.5\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Closed hi-hat pattern\ni3 0 0.1\ni3 0.25 0.1\ni3 0.5 0.1\ni3 0.75 0.1\n\n; Open hi-hat\ni2 1 0.3\n\n; More closed\ni3 1.5 0.1\ni3 1.75 0.1\n\n; Open again\ni2 2 0.4\n\n; Final closed\ni3 2.5 0.1\ni3 2.75 0.1\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
