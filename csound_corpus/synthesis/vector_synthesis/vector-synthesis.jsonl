{"instruction": "Write a CSound instrument that demonstrates vector synthesis with vpvoc", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSine ftgen 1, 0, 16384, 10, 1\ngiSaw ftgen 2, 0, 16384, 10, 1, 0.5, 0.3, 0.25, 0.2\ngiSquare ftgen 3, 0, 16384, 10, 1, 0, 0.3, 0, 0.2\ngiTri ftgen 4, 0, 16384, 10, 1, 0, -0.11, 0, 0.04\n\ninstr 1\n    ; vpvoc opcode: ares vpvoc ktimpnt, kfmod, ifile [, ispecwp] [, ifn]\n    ; vpvoc performs phase vocoding with vector synthesis\n    ; ktimpnt - time pointer for reading\n    ; kfmod - frequency multiplier\n    ; ifile - analysis file or table number\n    \n    ; Note: vpvoc typically reads from analysis files\n    ; This demonstrates the concept using tables\n    \n    iAmp = 0.4\n    iFreq = p4\n    \n    ; Generate source\n    aSource poscil iAmp, iFreq, giSaw\n    \n    ; Analyze (conceptual)\n    fSig pvsanal aSource, 2048, 256, 2048, 1\n    \n    ; Resynthesize\n    aOut pvsynth fSig\n    \n    outs aOut, aOut\nendin\n\ninstr 2\n    ; Vector mixing between waveforms\n    iAmp = 0.4\n    iFreq = p4\n    \n    ; Four corner waveforms\n    aWave1 poscil iAmp, iFreq, giSine\n    aWave2 poscil iAmp, iFreq, giSaw\n    aWave3 poscil iAmp, iFreq, giSquare\n    aWave4 poscil iAmp, iFreq, giTri\n    \n    ; Vector position (X,Y coordinates)\n    kX linseg 0, p3, 1\n    kY = 0.5\n    \n    ; Mix based on position\n    kMix1 = (1-kX) * (1-kY)\n    kMix2 = kX * (1-kY)\n    kMix3 = (1-kX) * kY\n    kMix4 = kX * kY\n    \n    aMix = aWave1*kMix1 + aWave2*kMix2 + aWave3*kMix3 + aWave4*kMix4\n    \n    outs aMix, aMix\nendin\n\ninstr 3\n    ; 2D vector path\n    iAmp = 0.4\n    iFreq = p4\n    \n    ; Waveforms\n    aWave1 poscil iAmp, iFreq, giSine\n    aWave2 poscil iAmp, iFreq, giSaw\n    aWave3 poscil iAmp, iFreq, giSquare\n    aWave4 poscil iAmp, iFreq, giTri\n    \n    ; Circular path\n    kAngle phasor 0.5\n    kAngle = kAngle * 2 * 3.14159\n    \n    kX = (cos(kAngle) + 1) * 0.5\n    kY = (sin(kAngle) + 1) * 0.5\n    \n    ; Bilinear interpolation\n    kMix1 = (1-kX) * (1-kY)\n    kMix2 = kX * (1-kY)\n    kMix3 = (1-kX) * kY\n    kMix4 = kX * kY\n    \n    aMix = aWave1*kMix1 + aWave2*kMix2 + aWave3*kMix3 + aWave4*kMix4\n    \n    outs aMix, aMix\nendin\n\ninstr 4\n    ; Vector with independent X and Y motion\n    iAmp = 0.4\n    iFreq = p4\n    \n    ; Waveforms\n    aWave1 poscil iAmp, iFreq, giSine\n    aWave2 poscil iAmp, iFreq, giSaw\n    aWave3 poscil iAmp, iFreq, giSquare\n    aWave4 poscil iAmp, iFreq, giTri\n    \n    ; Independent LFOs for X and Y\n    kX poscil 0.5, 0.3, giSine\n    kX = kX + 0.5\n    \n    kY poscil 0.5, 0.5, giSine, 0.25\n    kY = kY + 0.5\n    \n    ; Mix\n    kMix1 = (1-kX) * (1-kY)\n    kMix2 = kX * (1-kY)\n    kMix3 = (1-kX) * kY\n    kMix4 = kX * kY\n    \n    aMix = aWave1*kMix1 + aWave2*kMix2 + aWave3*kMix3 + aWave4*kMix4\n    \n    outs aMix, aMix\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic vector\ni1 0 3 220\n\n; Play linear sweep\ni2 4 4 330\n\n; Play circular path\ni3 9 6 440\n\n; Play independent motion\ni4 16 5 294\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
