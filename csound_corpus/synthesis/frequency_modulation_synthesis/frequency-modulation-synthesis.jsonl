{"instruction": "Write a CSound instrument that demonstrates the foscil opcode for basic FM synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; foscil opcode: ares foscil xamp, kcps, xcar, xmod, kndx, ifn [, iphs]\n    ; foscil implements basic FM synthesis\n    ; xamp - amplitude\n    ; kcps - frequency in Hz (carrier frequency)\n    ; xcar - carrier/modulator ratio (C:M ratio)\n    ; xmod - modulator/carrier ratio (typically inverse of xcar)\n    ; kndx - modulation index (depth of modulation)\n    ; ifn - function table (typically sine wave)\n    ; iphs - initial phase (optional)\n    \n    ; Amplitude envelope\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    ; Basic FM parameters\n    kCPS = 440\n    kCar = 1      ; Carrier = fundamental\n    kMod = 1      ; Modulator = fundamental (1:1 ratio)\n    kNdx = 2      ; Modulation index\n    \n    ; Generate FM tone\n    aFM foscil kAmp*0.4, kCPS, kCar, kMod, kNdx, giSine\n    \n    out aFM\nendin\n\ninstr 2\n    ; FM bell sound with time-varying index\n    kAmp linseg 0, 0.01, 0.5, p3-0.2, 0.5, 0.19, 0\n    \n    kCPS = p4\n    kCar = 1\n    kMod = 1.4    ; Slightly inharmonic ratio\n    \n    ; Index envelope - starts high, decays\n    kNdx linseg 10, p3, 0.5\n    \n    aFM foscil kAmp*0.4, kCPS, kCar, kMod, kNdx, giSine\n    \n    out aFM\nendin\n\ninstr 3\n    ; FM brass with harmonic ratio\n    kAmp madsr 0.02, 0.15, 0.5, 0.4\n    \n    kCPS = 220\n    kCar = 1\n    kMod = 1      ; Harmonic ratio (1:1)\n    \n    ; Modulation index controlled by envelope\n    kNdxEnv madsr 0.05, 0.2, 0.3, 0.1\n    kNdx = 5 + kNdxEnv * 10\n    \n    aFM foscil kAmp*0.35, kCPS, kCar, kMod, kNdx, giSine\n    \n    out aFM\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic FM\ni1 0 3\n\n; Play FM bells\ni2 3.5 2 440\ni2 4.5 2 550\ni2 5.5 2 660\n\n; Play FM brass\ni3 8 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the foscili opcode for interpolating FM synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; foscili opcode: ares foscili xamp, kcps, xcar, xmod, kndx, ifn [, iphs]\n    ; foscili is like foscil but with interpolation for smoother modulation\n    ; xamp - amplitude\n    ; kcps - carrier frequency (Hz)\n    ; xcar - carrier multiplier\n    ; xmod - modulator multiplier\n    ; kndx - modulation index\n    ; ifn - function table\n    ; iphs - initial phase (optional)\n    \n    ; Amplitude envelope\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    kCPS = 330\n    kCar = 1\n    kMod = 2.001  ; Slightly detuned for shimmer\n    kNdx = 3\n    \n    aFM foscili kAmp*0.35, kCPS, kCar, kMod, kNdx, giSine\n    \n    outs aFM, aFM\nendin\n\ninstr 2\n    ; Swept FM with smooth modulation index changes\n    kAmp madsr 0.02, 0.15, 0.5, 0.4\n    \n    kCPS = 220\n    kCar = 1\n    kMod = 1.5\n    \n    ; Smoothly sweep modulation index\n    kNdx linseg 0.5, p3*0.3, 8, p3*0.4, 8, p3*0.3, 0.5\n    \n    aFM foscili kAmp*0.3, kCPS, kCar, kMod, kNdx, giSine\n    \n    outs aFM, aFM\nendin\n\ninstr 3\n    ; FM pad with LFO modulation\n    kAmp linseg 0, 0.3, 0.3, p3-0.6, 0.3, 0.3, 0\n    \n    kCPS = 110\n    kCar = 1\n    kMod = 2\n    \n    ; LFO modulates index\n    kLFO oscili 2, 0.4, giSine\n    kNdx = 4 + kLFO\n    \n    ; Detuned voices\n    aFM1 foscili kAmp*0.2, kCPS, kCar, kMod, kNdx, giSine\n    aFM2 foscili kAmp*0.2, kCPS*1.005, kCar, kMod, kNdx, giSine\n    \n    outs aFM1, aFM2\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic foscili\ni1 0 3\n\n; Play swept FM\ni2 3.5 5\n\n; Play FM pad\ni3 9 8\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the fmb3 opcode for Hammond organ-like FM tones", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; fmb3 opcode: ares fmb3 kamp, kfreq, kc1, kc2, kvdepth, kvrate [, ifn1] [, ifn2] [, ifn3] [, ifn4] [, ivfn]\n    ; fmb3 is an FM emulation of a Hammond B3 organ\n    ; kamp - amplitude\n    ; kfreq - frequency (Hz)\n    ; kc1 - control 1 (drawbar mix)\n    ; kc2 - control 2 (detune amount)\n    ; kvdepth - vibrato depth\n    ; kvrate - vibrato rate\n    ; ifn1-4 - waveform tables (default to sine)\n    ; ivfn - vibrato function table\n    \n    ; Amplitude envelope\n    kAmp madsr 0.02, 0.1, 0.8, 0.3\n    \n    kFreq = p4\n    kC1 = 0.5     ; Drawbar mix\n    kC2 = 5       ; Detune\n    kVDepth = 0.01  ; Vibrato depth\n    kVRate = 6      ; Vibrato rate (Hz)\n    \n    ; Generate B3-like tone\n    aOrgan fmb3 kAmp*0.3, kFreq, kC1, kC2, kVDepth, kVRate, giSine, giSine, giSine, giSine, giSine\n    \n    outs aOrgan, aOrgan\nendin\n\ninstr 2\n    ; B3 organ with expression\n    kAmp madsr 0.03, 0.15, 0.7, 0.4\n    \n    kFreq = p4\n    \n    ; Drawbar settings change over time\n    kC1 linseg 0.3, p3, 0.8\n    kC2 = 6\n    kVDepth = 0.015\n    kVRate = 5.8\n    \n    aOrgan fmb3 kAmp*0.35, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aOrgan, aOrgan\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play B3 organ chord\ni1 0 3 262\ni1 0 3 330\ni1 0 3 392\n\n; Play melody with expression\ni2 3.5 1.5 262\ni2 5 1.5 294\ni2 6.5 1.5 330\ni2 8 2 349\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the fmbell opcode for bell-like FM tones", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; fmbell opcode: ares fmbell kamp, kfreq, kc1, kc2, kvdepth, kvrate [, ifn1] [, ifn2] [, ifn3] [, ifn4] [, ivfn]\n    ; fmbell generates bell-like tones using FM synthesis\n    ; kamp - amplitude\n    ; kfreq - frequency (Hz)\n    ; kc1 - modulation index control 1\n    ; kc2 - modulation index control 2\n    ; kvdepth - vibrato depth\n    ; kvrate - vibrato rate\n    ; ifn1-4 - waveform tables\n    ; ivfn - vibrato function table\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.01, 0.5, p3-0.01, 0\n    \n    kFreq = p4\n    kC1 = 5       ; High modulation index for bell\n    kC2 = 5\n    kVDepth = 0   ; No vibrato for bell\n    kVRate = 0\n    \n    ; Generate bell tone\n    aBell fmbell kAmp*0.4, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aBell, aBell\nendin\n\ninstr 2\n    ; Tubular bell with decay\n    kAmp expon 0.6, p3, 0.001\n    \n    kFreq = p4\n    kC1 = 4\n    kC2 = 6\n    kVDepth = 0\n    kVRate = 0\n    \n    aBell fmbell kAmp*0.35, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aBell, aBell\nendin\n\ninstr 3\n    ; Gamelan-like bell\n    kAmp linseg 0, 0.005, 0.5, p3-0.01, 0.5, 0.005, 0\n    \n    kFreq = p4\n    kC1 = 7       ; Very inharmonic\n    kC2 = 4.5\n    kVDepth = 0.005  ; Slight vibrato\n    kVRate = 4\n    \n    aBell fmbell kAmp*0.4, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aBell*0.7, aBell\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play church bells\ni1 0 4 262\ni1 1 4 330\ni1 2 4 392\n\n; Play tubular bells\ni2 6 3 523\ni2 7 3 659\ni2 8 3 784\n\n; Play gamelan\ni3 11 2.5 440\ni3 12 2.5 550\ni3 13 2.5 660\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the fmrhode opcode for Fender Rhodes electric piano tones", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; fmrhode opcode: ares fmrhode kamp, kfreq, kc1, kc2, kvdepth, kvrate [, ifn1] [, ifn2] [, ifn3] [, ifn4] [, ivfn]\n    ; fmrhode emulates Fender Rhodes electric piano using FM\n    ; kamp - amplitude\n    ; kfreq - frequency (Hz)\n    ; kc1 - modulation index control 1\n    ; kc2 - crossfade control\n    ; kvdepth - vibrato depth\n    ; kvrate - vibrato rate\n    ; ifn1-4 - waveform tables\n    ; ivfn - vibrato function table\n    \n    ; Amplitude envelope - piano-like\n    kAmp madsr 0.005, 0.08, 0.5, 0.3\n    \n    kFreq = p4\n    kC1 = 5       ; Modulation index\n    kC2 = 5       ; Crossfade\n    kVDepth = 0   ; No vibrato for piano\n    kVRate = 0\n    \n    ; Generate Rhodes tone\n    aRhodes fmrhode kAmp*0.35, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aRhodes, aRhodes\nendin\n\ninstr 2\n    ; Tremolo Rhodes\n    kAmp madsr 0.005, 0.08, 0.5, 0.3\n    \n    kFreq = p4\n    kC1 = 4.5\n    kC2 = 5\n    \n    ; Tremolo effect\n    kTrem oscili 0.3, 5, giSine\n    kAmpMod = kAmp * (0.7 + kTrem)\n    \n    kVDepth = 0\n    kVRate = 0\n    \n    aRhodes fmrhode kAmpMod*0.35, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aRhodes, aRhodes\nendin\n\ninstr 3\n    ; Chorused Rhodes\n    kAmp madsr 0.005, 0.08, 0.5, 0.3\n    \n    kFreq = p4\n    kC1 = 5\n    kC2 = 4.5\n    kVDepth = 0.01  ; Slight vibrato for chorus\n    kVRate = 4.5\n    \n    ; Two detuned voices\n    aRhodes1 fmrhode kAmp*0.25, kFreq, kC1, kC2, kVDepth, kVRate\n    aRhodes2 fmrhode kAmp*0.25, kFreq*1.003, kC1, kC2, kVDepth, kVRate+0.3\n    \n    outs aRhodes1, aRhodes2\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play Rhodes piano chord\ni1 0 2 262\ni1 0 2 330\ni1 0 2 392\ni1 0 2 523\n\n; Play melody with tremolo\ni2 3 1 440\ni2 4 1 494\ni2 5 1 523\ni2 6 2 587\n\n; Play chorused Rhodes\ni3 8.5 2 330\ni3 9 2 415\ni3 9.5 2 523\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the fmwurlie opcode for Wurlitzer electric piano tones", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; fmwurlie opcode: ares fmwurlie kamp, kfreq, kc1, kc2, kvdepth, kvrate [, ifn1] [, ifn2] [, ifn3] [, ifn4] [, ivfn]\n    ; fmwurlie emulates Wurlitzer electric piano using FM\n    ; kamp - amplitude\n    ; kfreq - frequency (Hz)\n    ; kc1 - modulation index control 1\n    ; kc2 - modulation index control 2\n    ; kvdepth - vibrato depth\n    ; kvrate - vibrato rate\n    ; ifn1-4 - waveform tables\n    ; ivfn - vibrato function table\n    \n    ; Amplitude envelope\n    kAmp madsr 0.003, 0.06, 0.4, 0.25\n    \n    kFreq = p4\n    kC1 = 5       ; Modulation settings\n    kC2 = 5\n    kVDepth = 0\n    kVRate = 0\n    \n    ; Generate Wurlitzer tone\n    aWurlie fmwurlie kAmp*0.35, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aWurlie, aWurlie\nendin\n\ninstr 2\n    ; Wurlitzer with expression\n    kAmp madsr 0.003, 0.06, 0.4, 0.25\n    \n    kFreq = p4\n    \n    ; Dynamic modulation\n    kC1 linseg 4, p3, 6\n    kC2 = 5\n    kVDepth = 0\n    kVRate = 0\n    \n    aWurlie fmwurlie kAmp*0.35, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aWurlie, aWurlie\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play Wurlitzer\ni1 0 1.5 330\ni1 1.5 1.5 392\ni1 3 2 440\n\n; Play with expression\ni2 6 2 262\ni2 7 2 330\ni2 8 2 392\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the fmpercfl opcode for FM percussion and flute sounds", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; fmpercfl opcode: ares fmpercfl kamp, kfreq, kc1, kc2, kvdepth, kvrate [, ifn1] [, ifn2] [, ifn3] [, ifn4] [, ivfn]\n    ; fmpercfl generates percussion and flute sounds using FM\n    ; kamp - amplitude\n    ; kfreq - frequency (Hz)\n    ; kc1 - modulation control 1\n    ; kc2 - modulation control 2\n    ; kvdepth - vibrato depth\n    ; kvrate - vibrato rate\n    ; ifn1-4 - waveform tables\n    ; ivfn - vibrato function table\n    \n    ; Percussion envelope\n    kAmp linseg 0, 0.005, 0.5, p3-0.01, 0.5, 0.005, 0\n    \n    kFreq = p4\n    kC1 = 8       ; High index for percussion\n    kC2 = 3\n    kVDepth = 0\n    kVRate = 0\n    \n    ; Generate percussion\n    aPerc fmpercfl kAmp*0.4, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aPerc, aPerc\nendin\n\ninstr 2\n    ; Flute-like sound\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    kFreq = p4\n    kC1 = 1       ; Low index for flute\n    kC2 = 1.5\n    kVDepth = 0.01  ; Vibrato for flute\n    kVRate = 5.5\n    \n    aFlute fmpercfl kAmp*0.35, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aFlute, aFlute\nendin\n\ninstr 3\n    ; Marimba-like percussion\n    kAmp expon 0.5, p3, 0.001\n    \n    kFreq = p4\n    kC1 = 10\n    kC2 = 2\n    kVDepth = 0\n    kVRate = 0\n    \n    aMarimba fmpercfl kAmp*0.4, kFreq, kC1, kC2, kVDepth, kVRate\n    \n    outs aMarimba, aMarimba\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play percussion\ni1 0 0.8 440\ni1 0.8 0.8 550\ni1 1.6 0.8 660\n\n; Play flute melody\ni2 3 1.5 523\ni2 4.5 1.5 587\ni2 6 2 659\n\n; Play marimba\ni3 9 1.5 330\ni3 10 1.5 392\ni3 11 1.5 440\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the fmvoice opcode for voice-like FM sounds", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; fmvoice opcode: ares fmvoice kamp, kfreq, kvowel, ktilt, kvibamt, kvibrate, ifn1, ifn2, ifn3, ifn4, ivibfn\n    ; fmvoice generates voice-like sounds using FM synthesis\n    ; kamp - amplitude\n    ; kfreq - frequency (Hz)\n    ; kvowel - vowel selection (1-5: a, e, i, o, u)\n    ; ktilt - spectral tilt\n    ; kvibamt - vibrato amount\n    ; kvibrate - vibrato rate\n    ; ifn1-4 - waveform tables\n    ; ivibfn - vibrato function table\n    \n    ; Amplitude envelope\n    kAmp madsr 0.03, 0.1, 0.7, 0.3\n    \n    kFreq = p4\n    kVowel = p5   ; 1-5 for different vowels\n    kTilt = 1\n    kVibAmt = 0.01\n    kVibRate = 5.5\n    \n    ; Generate voice\n    aVoice fmvoice kAmp*0.35, kFreq, kVowel, kTilt, kVibAmt, kVibRate, \\\n                   giSine, giSine, giSine, giSine, giSine\n    \n    outs aVoice, aVoice\nendin\n\ninstr 2\n    ; Morphing between vowels\n    kAmp madsr 0.03, 0.15, 0.6, 0.4\n    \n    kFreq = 180\n    \n    ; Vowel changes over time\n    kVowel linseg 1, p3, 5\n    kTilt = 1\n    kVibAmt = 0.015\n    kVibRate = 6\n    \n    aVoice fmvoice kAmp*0.35, kFreq, kVowel, kTilt, kVibAmt, kVibRate, \\\n                   giSine, giSine, giSine, giSine, giSine\n    \n    outs aVoice, aVoice\nendin\n\ninstr 3\n    ; Choir-like texture\n    kAmp linseg 0, 0.3, 0.3, p3-0.6, 0.3, 0.3, 0\n    \n    kFreq = p4\n    kVowel = 1    ; \"ah\" vowel\n    kTilt = 1.2\n    kVibAmt = 0.02\n    kVibRate = 5\n    \n    ; Multiple voices with slight detuning\n    aVoice1 fmvoice kAmp*0.2, kFreq, kVowel, kTilt, kVibAmt, kVibRate, \\\n                    giSine, giSine, giSine, giSine, giSine\n    aVoice2 fmvoice kAmp*0.2, kFreq*1.003, kVowel, kTilt, kVibAmt, kVibRate+0.3, \\\n                    giSine, giSine, giSine, giSine, giSine\n    \n    aChoir = aVoice1 + aVoice2\n    \n    outs aChoir, aChoir\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play different vowels\n; Vowels: 1=a, 2=e, 3=i, 4=o, 5=u\ni1 0 2 220 1\ni1 2.5 2 220 3\ni1 5 2 220 5\n\n; Play vowel morph\ni2 8 5\n\n; Play choir\ni3 14 6 262\ni3 14 6 330\ni3 14 6 392\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the crossfm and crossfmi opcodes for cross-synthesis FM", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; crossfm opcode: a1, a2 crossfm xfrq1, xfrq2, xndx1, xndx2, kcps, ifn1, ifn2 [, iphs1] [, iphs2]\n    ; crossfm implements cross-coupled FM synthesis\n    ; xfrq1, xfrq2 - base frequencies\n    ; xndx1, xndx2 - modulation indices\n    ; kcps - crossfade control\n    ; ifn1, ifn2 - function tables\n    ; iphs1, iphs2 - initial phases (optional)\n    ; Returns two outputs with cross-modulation\n    \n    ; Amplitude envelope\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    kFrq1 = 220\n    kFrq2 = 330\n    kNdx1 = 3\n    kNdx2 = 4\n    kCPS = 0.5    ; Balance between oscillators\n    \n    ; Generate cross-FM\n    aFM1, aFM2 crossfm kFrq1, kFrq2, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    ; Mix outputs\n    aOut = (aFM1 + aFM2) * kAmp * 0.3\n    \n    outs aOut, aOut\nendin\n\ninstr 2\n    ; crossfmi opcode: a1, a2 crossfmi xfrq1, xfrq2, xndx1, xndx2, kcps, ifn1, ifn2 [, iphs1] [, iphs2]\n    ; crossfmi is like crossfm but with interpolation\n    ; xfrq1, xfrq2 - base frequencies\n    ; xndx1, xndx2 - modulation indices\n    ; kcps - crossfade control\n    ; ifn1, ifn2 - function tables\n    \n    ; Amplitude envelope\n    kAmp madsr 0.02, 0.15, 0.5, 0.4\n    \n    kFrq1 = 165\n    kFrq2 = 165 * 1.5\n    \n    ; Modulation indices with envelopes\n    kNdxEnv madsr 0.03, 0.2, 0.3, 0.1\n    kNdx1 = 2 + kNdxEnv * 8\n    kNdx2 = 3 + kNdxEnv * 6\n    \n    kCPS = 0.5\n    \n    ; Generate cross-FM with interpolation\n    aFM1, aFM2 crossfmi kFrq1, kFrq2, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    aOut = (aFM1*0.5 + aFM2*0.5) * kAmp * 0.3\n    \n    outs aOut, aOut\nendin\n\ninstr 3\n    ; Dynamic cross-modulation with sweeping parameters\n    kAmp linseg 0, 0.05, 0.35, p3-0.1, 0.35, 0.05, 0\n    \n    ; Frequencies change over time\n    kFrq1 = 220\n    kFrq2 linseg 330, p3, 880\n    \n    ; Indices sweep\n    kNdx1 linseg 1, p3, 10\n    kNdx2 linseg 8, p3, 2\n    \n    ; Crossfade control sweeps\n    kCPS linseg 0, p3, 1\n    \n    aFM1, aFM2 crossfmi kFrq1, kFrq2, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    ; Stereo output with different mix\n    outs aFM1*kAmp*0.3, aFM2*kAmp*0.3\nendin\n\ninstr 4\n    ; Complex cross-modulation texture\n    kAmp madsr 0.01, 0.12, 0.55, 0.35\n    \n    kFrq1 = 110\n    kFrq2 = 110 * 2.001  ; Slightly detuned\n    \n    ; LFO modulates indices\n    kLFO1 oscili 4, 0.37, giSine\n    kLFO2 oscili 3, 0.53, giSine\n    \n    kNdx1 = 5 + kLFO1\n    kNdx2 = 4 + kLFO2\n    \n    kCPS = 0.6\n    \n    aFM1, aFM2 crossfmi kFrq1, kFrq2, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    aOut = (aFM1 + aFM2) * kAmp * 0.25\n    \n    outs aOut, aOut\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic cross-FM\ni1 0 3\n\n; Play cross-FM with envelope\ni2 3.5 3\n\n; Play sweeping parameters\ni3 7 5\n\n; Play complex texture\ni4 12.5 6\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the crosspm and crosspmi opcodes for cross-coupled phase modulation", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; crosspm opcode: a1, a2 crosspm xfrq1, xfrq2, xndx1, xndx2, kcps, ifn1, ifn2 [, iphs1] [, iphs2]\n    ; crosspm implements cross-coupled phase modulation synthesis\n    ; xfrq1, xfrq2 - base frequencies\n    ; xndx1, xndx2 - modulation indices\n    ; kcps - crossfade control\n    ; ifn1, ifn2 - function tables\n    ; iphs1, iphs2 - initial phases (optional)\n    ; Returns two outputs with cross-modulation\n    \n    ; Amplitude envelope\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    kFrq1 = 220\n    kFrq2 = 220 * 1.5\n    kNdx1 = 2\n    kNdx2 = 3\n    kCPS = 0.5\n    \n    ; Generate cross-PM\n    aPM1, aPM2 crosspm kFrq1, kFrq2, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    aOut = (aPM1 + aPM2) * kAmp * 0.3\n    \n    outs aOut, aOut\nendin\n\ninstr 2\n    ; crosspmi opcode: a1, a2 crosspmi xfrq1, xfrq2, xndx1, xndx2, kcps, ifn1, ifn2 [, iphs1] [, iphs2]\n    ; crosspmi is like crosspm but with interpolation\n    ; xfrq1, xfrq2 - base frequencies\n    ; xndx1, xndx2 - modulation indices\n    ; kcps - crossfade control\n    ; ifn1, ifn2 - function tables\n    \n    ; Amplitude envelope\n    kAmp madsr 0.02, 0.15, 0.5, 0.4\n    \n    kFrq1 = 165\n    kFrq2 = 247.5\n    kNdx1 = 4\n    kNdx2 = 5\n    kCPS = 0.5\n    \n    ; Generate cross-PM with interpolation\n    aPM1, aPM2 crosspmi kFrq1, kFrq2, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    aOut = (aPM1*0.6 + aPM2*0.4) * kAmp * 0.3\n    \n    outs aOut, aOut\nendin\n\ninstr 3\n    ; Bell-like sound with cross-PM\n    kAmp linseg 0, 0.01, 0.5, p3-0.01, 0\n    \n    kFrq1 = p4\n    kFrq2 = p4 * 1.414  ; Inharmonic ratio\n    \n    ; Index decays\n    kNdx1 linseg 10, p3, 1\n    kNdx2 linseg 8, p3, 0.5\n    \n    kCPS = 0.5\n    \n    aPM1, aPM2 crosspmi kFrq1, kFrq2, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    aOut = (aPM1 + aPM2) * kAmp * 0.3\n    \n    outs aOut, aOut\nendin\n\ninstr 4\n    ; Metallic percussion with cross-PM\n    kAmp expon 0.5, p3, 0.001\n    \n    kFrq1 = 200\n    kFrq2 = 314.159  ; Inharmonic\n    kNdx1 = 12\n    kNdx2 = 10\n    \n    ; Sweep crossfade\n    kCPS linseg 0, p3, 1\n    \n    aPM1, aPM2 crosspmi kFrq1, kFrq2, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    ; Stereo placement\n    outs aPM1*kAmp*0.3, aPM2*kAmp*0.3\nendin\n\ninstr 5\n    ; Evolving pad with cross-PM\n    kAmp linseg 0, 0.5, 0.3, p3-1, 0.3, 0.5, 0\n    \n    kFrq1 = 110\n    kFrq2 = 110 * 2.003\n    \n    ; LFOs modulate indices\n    kLFO1 oscili 3, 0.23, giSine\n    kLFO2 oscili 4, 0.37, giSine\n    \n    kNdx1 = 6 + kLFO1\n    kNdx2 = 5 + kLFO2\n    \n    ; Slow crossfade sweep\n    kCPS linseg 0.3, p3, 0.7\n    \n    aPM1, aPM2 crosspmi kFrq1, kFrq2, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    aOut = (aPM1 + aPM2) * kAmp * 0.25\n    \n    outs aOut, aOut\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play basic cross-PM\ni1 0 3\n\n; Play cross-PM interpolated\ni2 3.5 3\n\n; Play bell-like sounds\ni3 7 3 440\ni3 8 3 550\ni3 9 3 660\n\n; Play metallic percussion\ni4 12 2\ni4 13 2\ni4 14 2\n\n; Play evolving pad\ni5 17 10\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced FM techniques combining multiple FM opcodes", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; Complex FM synthesis with multiple operators\n    kAmp madsr 0.01, 0.15, 0.5, 0.4\n    \n    kFreq = p4\n    \n    ; Operator 1: Basic FM\n    kNdx1 linseg 8, p3, 2\n    aOp1 foscili kAmp*0.3, kFreq, 1, 1, kNdx1, giSine\n    \n    ; Operator 2: Different ratio\n    kNdx2 linseg 5, p3, 1\n    aOp2 foscili kAmp*0.25, kFreq, 1, 2.001, kNdx2, giSine\n    \n    ; Operator 3: High ratio for brightness\n    kNdx3 = 3\n    aOp3 foscili kAmp*0.15, kFreq, 1, 3.5, kNdx3, giSine\n    \n    ; Mix operators\n    aOut = aOp1 + aOp2 + aOp3\n    \n    outs aOut*0.5, aOut*0.5\nendin\n\ninstr 2\n    ; Layered FM instruments\n    kAmp madsr 0.005, 0.08, 0.5, 0.3\n    \n    kFreq = p4\n    \n    ; Rhodes layer\n    aRhodes fmrhode kAmp*0.25, kFreq, 5, 5, 0, 0\n    \n    ; Bell layer\n    aBell fmbell kAmp*0.2, kFreq*2, 5, 5, 0, 0\n    \n    ; Mix with different envelope on bell\n    kBellEnv linseg 1, p3, 0\n    \n    aOut = aRhodes + aBell*kBellEnv\n    \n    outs aOut, aOut\nendin\n\ninstr 3\n    ; FM feedback synthesis\n    kAmp linseg 0, 0.05, 0.3, p3-0.1, 0.3, 0.05, 0\n    \n    kFreq = p4\n    \n    ; Cross-FM for feedback-like behavior\n    kNdx1 linseg 10, p3, 3\n    kNdx2 linseg 8, p3, 2\n    kCPS linseg 0.2, p3, 0.8\n    \n    aFM1, aFM2 crossfmi kFreq, kFreq*1.003, kNdx1, kNdx2, kCPS, giSine, giSine\n    \n    ; Additional basic FM on top\n    aTop foscili kAmp*0.15, kFreq*2, 1, 1, 2, giSine\n    \n    aOut = (aFM1*0.4 + aFM2*0.4 + aTop) * kAmp\n    \n    outs aOut, aOut\nendin\n\ninstr 4\n    ; Morphing timbre with multiple FM types\n    kAmp madsr 0.02, 0.15, 0.6, 0.4\n    \n    kFreq = 220\n    \n    ; Crossfade between different FM sounds\n    kMorph linseg 0, p3, 2\n    \n    ; FM percussion\n    aPerc fmpercfl kAmp*0.3, kFreq, 8, 3, 0, 0\n    \n    ; FM bell\n    aBell fmbell kAmp*0.3, kFreq, 5, 5, 0, 0\n    \n    ; Basic FM\n    aBasic foscili kAmp*0.3, kFreq, 1, 1.5, 4, giSine\n    \n    ; Crossfade between sounds\n    if kMorph < 1 then\n        aOut = aPerc * (1-kMorph) + aBell * kMorph\n    else\n        aOut = aBell * (2-kMorph) + aBasic * (kMorph-1)\n    endif\n    \n    outs aOut, aOut\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play complex FM\ni1 0 4 330\n\n; Play layered instruments\ni2 4.5 2 440\ni2 5.5 2 494\ni2 6.5 2 523\n\n; Play FM feedback\ni3 9.5 3 220\ni3 10.5 3 275\n\n; Play morphing timbre\ni4 14 6\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
