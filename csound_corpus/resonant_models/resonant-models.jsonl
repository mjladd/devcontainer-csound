{"instruction": "Write a CSound instrument that demonstrates resonant filter models", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSaw ftgen 1, 0, 16384, 10, 1, 0.5, 0.3, 0.25, 0.2, 0.16\n\ninstr 1\n    ; mode opcode: aout mode ain, kfreq, kq [, iskip]\n    ; mode implements resonant mode filter\n    ; ain - input signal\n    ; kfreq - resonant frequency\n    ; kq - quality factor (higher = narrower)\n    \n    iAmp = 0.4\n    iFreq = p4\n    \n    ; Impulse excitation\n    aExcite mpulse 0.8, 0\n    \n    ; Resonant mode\n    kResFreq = iFreq\n    kQ = 500\n    \n    aMode mode aExcite, kResFreq, kQ\n    \n    outs aMode*iAmp, aMode*iAmp\nendin\n\ninstr 2\n    ; streson opcode: asig streson ain, kfr, kfdbgain\n    ; streson is string resonator\n    \n    iAmp = 0.4\n    iFreq = p4\n    \n    aExcite mpulse 0.8, 0\n    \n    kFeedback = 0.95\n    \n    aString streson aExcite, iFreq, kFeedback\n    \n    outs aString*iAmp, aString*iAmp\nendin\n\ninstr 3\n    ; resony opcode: ares resony asig, kcf, kbw [, iscl] [, iskip]\n    ; resony implements resonant bandpass filter\n    ; kcf - center frequency\n    ; kbw - bandwidth\n    \n    iAmp = 0.4\n    iFreq = p4\n    \n    ; Source signal\n    aSource poscil 0.5, iFreq, giSaw\n    \n    ; Resonant filter\n    kCF = iFreq * 2\n    kBW = 50\n    \n    aReson resony aSource, kCF, kBW\n    \n    outs aReson*iAmp, aReson*iAmp\nendin\n\ninstr 4\n    ; resonr opcode: ares resonr asig, kcf, kbw [, iscl] [, iskip]\n    ; resonr is resonator (bandpass + notch)\n    \n    iAmp = 0.4\n    iFreq = p4\n    \n    aSource poscil 0.5, iFreq, giSaw\n    \n    kCF = iFreq * 1.5\n    kBW = 100\n    \n    aReson resonr aSource, kCF, kBW\n    \n    outs aReson*iAmp, aReson*iAmp\nendin\n\ninstr 5\n    ; resonz opcode: ares resonz asig, kcf, kbw [, iscl] [, iskip]\n    ; resonz implements zero-delay feedback resonator\n    \n    iAmp = 0.4\n    iFreq = p4\n    \n    aSource poscil 0.5, iFreq, giSaw\n    \n    kCF = iFreq * 2.5\n    kBW = 80\n    \n    aReson resonz aSource, kCF, kBW\n    \n    outs aReson*iAmp, aReson*iAmp\nendin\n\ninstr 6\n    ; vlowrez opcode: ares vlowrez asig, xfco, xres, iattn, iord [, iskip]\n    ; vlowrez implements resonant low-pass filter\n    ; xfco - cutoff frequency\n    ; xres - resonance (0-1)\n    ; iattn - attenuation\n    ; iord - filter order (1-4)\n    \n    iAmp = 0.4\n    iFreq = p4\n    \n    aSource poscil 0.5, iFreq, giSaw\n    \n    ; Sweeping resonant filter\n    kCutoff expseg 200, p3, 3000\n    kRes = 0.8\n    iAttn = 0.5\n    iOrder = 4\n    \n    aFilt vlowrez aSource, kCutoff, kRes, iAttn, iOrder\n    \n    outs aFilt*iAmp, aFilt*iAmp\nendin\n\ninstr 7\n    ; Multiple resonant modes (bell-like)\n    iAmp = 0.3\n    iFreq = p4\n    \n    aExcite mpulse 0.8, 0\n    \n    ; Several inharmonic modes\n    aMode1 mode aExcite, iFreq, 500\n    aMode2 mode aExcite, iFreq*2.76, 400\n    aMode3 mode aExcite, iFreq*5.40, 300\n    aMode4 mode aExcite, iFreq*8.93, 200\n    \n    aMix = (aMode1 + aMode2*0.7 + aMode3*0.5 + aMode4*0.3) * iAmp\n    \n    outs aMix, aMix\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play mode filter\ni1 0 3 440\ni1 3.5 3 330\n\n; Play streson\ni2 7.5 3 294\n\n; Play resony\ni3 11.5 2 523\n\n; Play resonr\ni4 14.5 2 392\n\n; Play resonz\ni5 17.5 2 659\n\n; Play vlowrez\ni6 20.5 3 220\n\n; Play bell-like\ni7 24.5 4 523\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
