{"instruction": "Write a CSound instrument that demonstrates the table opcode for direct table value access without interpolation", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table 1: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n; Function table 2: envelope shape\ngiEnv ftgen 2, 0, 1024, 7, 0, 256, 1, 512, 1, 256, 0\n\ninstr 1\n    ; table opcode: ares table andx, ifn [, ixmode] [, ixoff] [, iwrap]\n    ; table accesses table values by direct indexing without interpolation\n    ; andx - index into the table (can be k-rate or a-rate)\n    ; ifn - function table number\n    ; ixmode - index mode (0=raw, 1=normalized 0-1, optional)\n    ; ixoff - index offset (optional)\n    ; iwrap - wraparound mode (optional)\n    \n    ; Create a phasor to scan through the table\n    aPhs phasor 440\n    \n    ; Use table to read sine wave (normalized mode)\n    aSig table aPhs, giSine, 1\n    \n    ; Apply amplitude envelope\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    out aSig * kAmp\nendin\n\ninstr 2\n    ; Demonstrate table for reading envelope shapes\n    kEnvIdx line 0, p3, 1\n    kEnvAmp table kEnvIdx, giEnv, 1\n    \n    aPhs phasor 330\n    aSig table aPhs, giSine, 1\n    \n    out aSig * kEnvAmp * 0.4\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 2 seconds\ni1 0 2\n; Play instrument 2 for 3 seconds\ni2 2.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the tablei opcode for table lookup with linear interpolation", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table 1: complex waveform\ngiComplex ftgen 1, 0, 8192, 10, 1, 0.5, 0.3, 0.2, 0.1, 0.05\n; Function table 2: sawtooth wave\ngiSaw ftgen 2, 0, 8192, 7, -1, 8192, 1\n\ninstr 1\n    ; tablei opcode: ares tablei andx, ifn [, ixmode] [, ixoff] [, iwrap]\n    ; tablei accesses table values with linear interpolation for smoother output\n    ; andx - index into the table\n    ; ifn - function table number\n    ; ixmode - index mode (0=raw, 1=normalized 0-1)\n    ; ixoff - index offset (optional)\n    ; iwrap - wraparound mode (optional)\n    \n    ; Frequency sweep\n    kFreq expseg 220, p3*0.5, 880, p3*0.5, 220\n    \n    ; Generate phase\n    aPhs phasor kFreq\n    \n    ; Use tablei with linear interpolation for smooth reading\n    aSig tablei aPhs, giComplex, 1\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.5, p3-0.2, 0.5, 0.1, 0\n    \n    out aSig * kAmp\nendin\n\ninstr 2\n    ; Demonstrate tablei for waveshaping\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; Input signal\n    aInput poscil 1, 440, giComplex\n    \n    ; Convert to index (0-1)\n    aIdx = (aInput + 1) * 0.5\n    \n    ; Apply waveshaping via table lookup\n    aShaped tablei aIdx, giSaw, 1\n    \n    out aShaped * kAmp\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 4 seconds\ni1 0 4\n; Play instrument 2 for 2 seconds\ni2 4.5 2\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the table3 opcode for table lookup with cubic interpolation", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table 1: rich harmonic content\ngiRich ftgen 1, 0, 16384, 10, 1, 0.8, 0.6, 0.5, 0.4, 0.3, 0.25, 0.2, 0.15, 0.1\n; Function table 2: custom envelope\ngiEnv ftgen 2, 0, 4096, 7, 0, 100, 1, 1000, 0.7, 2000, 0.5, 996, 0\n\ninstr 1\n    ; table3 opcode: ares table3 andx, ifn [, ixmode] [, ixoff] [, iwrap]\n    ; table3 accesses table values with cubic interpolation for highest quality\n    ; andx - index into the table\n    ; ifn - function table number\n    ; ixmode - index mode (0=raw, 1=normalized 0-1)\n    ; ixoff - index offset (optional)\n    ; iwrap - wraparound mode (optional)\n    \n    ; Variable frequency with vibrato\n    kVib oscili 3, 5, 1\n    kFreq = 440 + kVib\n    \n    ; Generate phase\n    aPhs phasor kFreq\n    \n    ; Use table3 with cubic interpolation for very smooth reading\n    aSig table3 aPhs, giRich, 1\n    \n    ; Time-varying amplitude using table3\n    kTime line 0, p3, 1\n    kAmp table3 kTime, giEnv, 1\n    \n    ; Stereo output\n    aLeft = aSig * kAmp * 0.4\n    aRight = aSig * kAmp * 0.4\n    \n    outs aLeft, aRight\nendin\n\ninstr 2\n    ; Demonstrate table3 for high-quality waveshaping\n    kAmp madsr 0.01, 0.1, 0.7, 0.2\n    \n    ; Input oscillator\n    aCarrier poscil 1, 330, giRich\n    \n    ; Use carrier as index for table lookup\n    aIdx = (aCarrier + 1) * 0.5\n    \n    ; High-quality table lookup with cubic interpolation\n    aShaped table3 aIdx, giRich, 1\n    \n    outs aShaped * kAmp * 0.4, aShaped * kAmp * 0.4\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 3 seconds\ni1 0 3\n; Play instrument 2 for 2.5 seconds\ni2 3.5 2.5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the tablekt opcode for table access with k-rate or a-rate control", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table 1: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n; Function table 2: square wave\ngiSquare ftgen 2, 0, 8192, 10, 1, 0, 0.333, 0, 0.2, 0, 0.142\n; Function table 3: triangle wave\ngiTri ftgen 3, 0, 8192, 7, 0, 2048, 1, 4096, -1, 2048, 0\n\ninstr 1\n    ; tablekt opcode: ares tablekt xndx, kfn [, ixmode] [, ixoff] [, iwrap]\n    ; tablekt allows k-rate control of which table to read from\n    ; xndx - index into the table (k-rate or a-rate)\n    ; kfn - function table number (k-rate for dynamic table selection)\n    ; ixmode - index mode (0=raw, 1=normalized 0-1)\n    ; ixoff - index offset (optional)\n    ; iwrap - wraparound mode (optional)\n    \n    ; Switch between different waveforms over time\n    kTableNum init giSine\n    kTime timeinsts\n    \n    if kTime < p3/3 then\n        kTableNum = giSine\n    elseif kTime < 2*p3/3 then\n        kTableNum = giSquare\n    else\n        kTableNum = giTri\n    endif\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; Generate phase\n    aPhs phasor 440\n    \n    ; Use tablekt to read from dynamically selected table\n    aSig tablekt aPhs, kTableNum, 1\n    \n    out aSig * kAmp\nendin\n\ninstr 2\n    ; Demonstrate k-rate index control\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; K-rate index scanning through table\n    kIdx linseg 0, p3, 1\n    \n    ; Use k-rate index\n    kVal tablekt kIdx, giSine, 1\n    \n    ; Generate audio at varying frequency based on table value\n    aSig poscil kAmp, 440 + (kVal * 110), giSine\n    \n    out aSig\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 3 seconds (morphs through waveforms)\ni1 0 3\n; Play instrument 2 for 2 seconds\ni2 3.5 2\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the tablexkt opcode for table crossfading between multiple tables", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table 1: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n; Function table 2: sawtooth\ngiSaw ftgen 2, 0, 8192, 10, 1, 0.5, 0.333, 0.25, 0.2, 0.166, 0.142, 0.125\n; Function table 3: square wave\ngiSquare ftgen 3, 0, 8192, 10, 1, 0, 0.333, 0, 0.2, 0, 0.142, 0, 0.111\n; Function table 4: triangle wave\ngiTri ftgen 4, 0, 8192, 7, 0, 2048, 1, 4096, -1, 2048, 0\n\ninstr 1\n    ; tablexkt opcode: ares tablexkt xndx, kfn, kwarp, iwsize [, ixmode] [, ixoff] [, iwrap]\n    ; tablexkt allows smooth crossfading between adjacent tables\n    ; xndx - index into the table\n    ; kfn - base function table number (can be fractional for crossfade)\n    ; kwarp - warping factor\n    ; iwsize - window size\n    ; ixmode - index mode (0=raw, 1=normalized 0-1)\n    ; ixoff - index offset (optional)\n    ; iwrap - wraparound mode (optional)\n    \n    ; Sweep through different waveforms with crossfading\n    kTableSweep linseg giSine, p3*0.25, giSaw, p3*0.25, giSquare, p3*0.25, giTri, p3*0.25, giSine\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate phase\n    aPhs phasor 330\n    \n    ; Use tablexkt for smooth crossfading between waveforms\n    aSig tablexkt aPhs, kTableSweep, 1, 8192, 1\n    \n    outs aSig * kAmp, aSig * kAmp\nendin\n\ninstr 2\n    ; Demonstrate interactive waveform morphing\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; LFO to modulate between waveforms\n    kLFO oscili 1.5, 0.5, giSine\n    kTableNum = giSine + abs(kLFO)\n    \n    ; Frequency modulation\n    kFreq linseg 220, p3*0.5, 440, p3*0.5, 220\n    \n    ; Generate phase\n    aPhs phasor kFreq\n    \n    ; Crossfade between tables based on LFO\n    aSig tablexkt aPhs, kTableNum, 1, 8192, 1\n    \n    ; Add stereo width with slight detuning\n    aPhs2 phasor kFreq * 1.002\n    aSig2 tablexkt aPhs2, kTableNum, 1, 8192, 1\n    \n    outs aSig * kAmp, aSig2 * kAmp\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 4 seconds\ni1 0 4\n; Play instrument 2 for 3 seconds\ni2 4.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
