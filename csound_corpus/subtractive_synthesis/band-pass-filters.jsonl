{"instruction": "Write a CSound instrument that demonstrates the butbp opcode for second-order Butterworth band-pass filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\ninstr 1\n    ; butbp opcode: ares butbp asig, kfreq, kband [, iskip]\n    ; butbp is a second-order Butterworth band-pass filter\n    ; asig - input audio signal\n    ; kfreq - center frequency in Hz\n    ; kband - bandwidth in Hz\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate white noise\n    aNoise noise kAmp, 0\n    \n    ; Sweep center frequency\n    kCenter expseg 200, p3, 3000\n    \n    ; Fixed bandwidth\n    kBW = 100\n    \n    ; Apply band-pass filter\n    aFilt butbp aNoise, kCenter, kBW\n    \n    out aFilt * 3\nendin\n\ninstr 2\n    ; Create vowel-like formants\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; Sawtooth source\n    aSaw vco2 kAmp*0.3, 220, 0\n    \n    ; Two formant filters for \"ah\" vowel\n    kF1 = 730\n    kF2 = 1090\n    kBW = 80\n    \n    aForm1 butbp aSaw, kF1, kBW\n    aForm2 butbp aSaw, kF2, kBW\n    \n    out (aForm1 + aForm2*0.7) * 2\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play sweeping bandpass on noise\ni1 0 4\n; Play formant filtering\ni2 4.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the reson opcode for second-order resonant filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; reson opcode: ares reson asig, xcf, xbw [, iscl] [, iskip]\n    ; reson is a second-order resonant filter\n    ; asig - input audio signal\n    ; xcf - center frequency in Hz\n    ; xbw - bandwidth in Hz\n    ; iscl - scaling flag (1=no scaling, 2=peak response)\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.05, 0.3, p3-0.1, 0.3, 0.05, 0\n    \n    ; Generate noise burst\n    aNoise noise kAmp, 0\n    \n    ; Resonant filter at 440 Hz\n    kCF = 440\n    kBW = 20\n    \n    ; Apply reson filter\n    aFilt reson aNoise, kCF, kBW, 2\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; Plucked string simulation using impulse + reson\n    kAmp = 0.5\n    \n    ; Single impulse at start\n    aImp mpulse kAmp, 0\n    \n    ; Multiple resonant modes for string-like sound\n    kFreq = 220\n    aRes1 reson aImp, kFreq, 5, 2\n    aRes2 reson aImp, kFreq*2, 8, 2\n    aRes3 reson aImp, kFreq*3, 12, 2\n    \n    ; Decay envelope\n    kEnv expseg 1, p3, 0.001\n    \n    aMix = (aRes1 + aRes2*0.5 + aRes3*0.3) * kEnv\n    \n    outs aMix*0.3, aMix*0.3\nendin\n\ninstr 3\n    ; Resonant sweep effect\n    kAmp madsr 0.01, 0.1, 0.7, 0.3\n    \n    ; Sawtooth source\n    aSaw vco2 kAmp*0.25, 110, 0\n    \n    ; Sweep resonant frequency\n    kCF expseg 300, p3*0.5, 3000, p3*0.5, 400\n    \n    ; Narrow bandwidth for pronounced resonance\n    kBW = 30\n    \n    aFilt reson aSaw, kCF, kBW, 2\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play resonant noise\ni1 0 2\n; Play plucked simulation\ni2 2.5 3\n; Play resonant sweep\ni3 6 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the resonk opcode for resonant filtering with k-rate frequency", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\ninstr 1\n    ; resonk opcode: ares resonk asig, kcf, kbw [, iscl] [, iskip]\n    ; resonk is similar to reson but with explicit k-rate frequency control\n    ; asig - input audio signal\n    ; kcf - center frequency in Hz (k-rate)\n    ; kbw - bandwidth in Hz (k-rate)\n    ; iscl - scaling flag\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; Generate pulse train\n    aPulse vco2 kAmp, 55, 10, 0.3\n    \n    ; LFO modulates filter frequency\n    kLFO oscili 400, 2, 1\n    kCF = 800 + kLFO\n    \n    ; Variable bandwidth\n    kBW linseg 50, p3, 200\n    \n    ; Apply resonant filter\n    aFilt resonk aPulse, kCF, kBW, 2\n    \n    out aFilt\nendin\n\ninstr 2\n    ; Step-wise frequency changes\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    ; White noise\n    aNoise noise kAmp*0.3, 0\n    \n    ; Stepped center frequencies\n    kTime timeinsts\n    kCF init 300\n    \n    if kTime > p3*0.25 && kTime < p3*0.25+0.01 then\n        kCF = 600\n    elseif kTime > p3*0.5 && kTime < p3*0.5+0.01 then\n        kCF = 1200\n    elseif kTime > p3*0.75 && kTime < p3*0.75+0.01 then\n        kCF = 400\n    endif\n    \n    ; Fixed narrow bandwidth\n    kBW = 40\n    \n    aFilt resonk aNoise, kCF, kBW, 2\n    \n    out aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Sine wave for LFO\nf1 0 8192 10 1\n\n; Play LFO modulation\ni1 0 4\n; Play stepped frequencies\ni2 4.5 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the resonr opcode for resonant filtering with variable resonance", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; resonr opcode: ares resonr asig, xcf, xbw, iscl [, iskip]\n    ; resonr is a resonant filter with improved response\n    ; asig - input audio signal\n    ; xcf - center frequency in Hz\n    ; xbw - bandwidth in Hz\n    ; iscl - scaling mode\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; Sawtooth source\n    aSaw vco2 kAmp, 165, 0\n    \n    ; Fixed center frequency\n    kCF = 1200\n    \n    ; Sweep bandwidth (narrow to wide = high Q to low Q)\n    kBW expseg 10, p3*0.5, 500, p3*0.5, 20\n    \n    ; Apply resonant filter\n    aFiltL resonr aSaw, kCF, kBW, 2\n    aFiltR resonr aSaw, kCF*1.01, kBW, 2\n    \n    outs aFiltL, aFiltR\nendin\n\ninstr 2\n    ; Bell-like sound using resonr\n    kAmp expseg 0.001, 0.01, 0.4, p3-0.01, 0.001\n    \n    ; Impulse excitation\n    aImp mpulse kAmp, 0\n    \n    ; Multiple inharmonic resonances for bell timbre\n    kCF1 = 440\n    kCF2 = 440 * 2.76\n    kCF3 = 440 * 5.4\n    \n    aRes1 resonr aImp, kCF1, 15, 2\n    aRes2 resonr aImp, kCF2, 20, 2\n    aRes3 resonr aImp, kCF3, 30, 2\n    \n    aMix = aRes1 + aRes2*0.6 + aRes3*0.3\n    \n    outs aMix*0.5, aMix*0.5\nendin\n\ninstr 3\n    ; Vocal formant synthesis\n    kAmp madsr 0.02, 0.1, 0.7, 0.3\n    \n    ; Buzz source\n    aBuzz buzz kAmp*0.2, 220, 30, giSine\n    \n    ; Formants for \"ee\" vowel\n    kF1 = 270\n    kF2 = 2300\n    kF3 = 3000\n    \n    aForm1 resonr aBuzz, kF1, 50, 2\n    aForm2 resonr aBuzz, kF2, 100, 2\n    aForm3 resonr aBuzz, kF3, 150, 2\n    \n    aMix = aForm1 + aForm2*0.5 + aForm3*0.3\n    \n    outs aMix, aMix\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play bandwidth sweep\ni1 0 4\n; Play bell sound\ni2 4.5 3\n; Play vowel sound\ni3 8 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the resony opcode for resonant filtering with k-rate frequency and bandwidth", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; resony opcode: ares resony asig, kcf, kbw, inum, ksep [, isepmode] [, iscl] [, iskip]\n    ; resony provides multiple parallel resonators\n    ; asig - input audio signal\n    ; kcf - base center frequency in Hz\n    ; kbw - bandwidth in Hz\n    ; inum - number of filters\n    ; ksep - frequency separation\n    ; isepmode - separation mode (1=multiplier, 2=additive)\n    ; iscl - scaling flag\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; White noise source\n    aNoise noise kAmp, 0\n    \n    ; Sweep base frequency\n    kCF linseg 200, p3, 1000\n    \n    ; Bandwidth\n    kBW = 30\n    \n    ; 5 harmonically related resonators\n    iNum = 5\n    kSep = 2  ; Octave spacing (multiplicative)\n    \n    ; Apply multiple resonators\n    aFilt resony aNoise, kCF, kBW, iNum, kSep, 1, 2\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; Harmonic resonator bank\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; Pulse excitation\n    aPulse vco2 kAmp*0.25, 110, 10, 0.2\n    \n    ; Base frequency\n    kCF = 220\n    kBW = 20\n    \n    ; 8 harmonic resonators\n    iNum = 8\n    kSep = 220  ; Additive spacing (harmonic)\n    \n    aFilt resony aPulse, kCF, kBW, iNum, kSep, 2, 2\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Dynamic spectral filtering\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; Sawtooth\n    aSaw vco2 kAmp, 165, 0\n    \n    ; Sweep base frequency\n    kCF expseg 150, p3*0.5, 1500, p3*0.5, 200\n    \n    ; Variable bandwidth\n    kBW linseg 50, p3, 10\n    \n    ; 6 resonators with octave spacing\n    iNum = 6\n    kSep = 2\n    \n    aFilt resony aSaw, kCF, kBW, iNum, kSep, 1, 2\n    \n    outs aFilt*0.5, aFilt*0.5\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play harmonic sweep\ni1 0 4\n; Play harmonic bank\ni2 4.5 3\n; Play dynamic spectral filtering\ni3 8 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the resonx opcode for emulating second-order resonant filter", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\ninstr 1\n    ; resonx opcode: ares resonx asig, xcf, xbw [, inumlayer] [, iscl] [, iskip]\n    ; resonx emulates a second-order resonant filter\n    ; asig - input audio signal\n    ; xcf - center frequency in Hz\n    ; xbw - bandwidth in Hz\n    ; inumlayer - number of layers (1-4)\n    ; iscl - scaling flag\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.05, 0.3, p3-0.1, 0.3, 0.05, 0\n    \n    ; Generate noise\n    aNoise noise kAmp, 0\n    \n    ; Sweep center frequency\n    kCF expseg 300, p3, 2000\n    \n    ; Narrow bandwidth\n    kBW = 40\n    \n    ; Single layer resonant filter\n    aFilt resonx aNoise, kCF, kBW, 1, 2\n    \n    out aFilt\nendin\n\ninstr 2\n    ; Multi-layer for sharper resonance\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    ; Sawtooth source\n    aSaw vco2 kAmp*0.25, 220, 0\n    \n    ; Fixed frequency\n    kCF = 1000\n    kBW = 25\n    \n    ; 3 layers for steeper response\n    aFilt resonx aSaw, kCF, kBW, 3, 2\n    \n    out aFilt\nendin\n\ninstr 3\n    ; Pitched percussion using resonx\n    kAmp expseg 0.001, 0.005, 0.5, p3-0.005, 0.001\n    \n    ; Click impulse\n    aClick mpulse kAmp, 0\n    \n    ; Resonant filter creates pitch\n    kCF = 440\n    kBW = 15\n    \n    ; 2 layers\n    aFilt resonx aClick, kCF, kBW, 2, 2\n    \n    out aFilt * 0.6\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play sweeping filter\ni1 0 4\n; Play multi-layer\ni2 4.5 3\n; Play percussion sounds\ni3 8 0.5\ni3 8.5 0.5\ni3 9 0.5\ni3 9.5 1\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the resonxk opcode for resonant filtering with k-rate frequency control", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; resonxk opcode: ares resonxk asig, kcf, kbw [, inumlayer] [, iscl] [, iskip]\n    ; resonxk is resonx with explicit k-rate frequency\n    ; asig - input audio signal\n    ; kcf - center frequency in Hz (k-rate)\n    ; kbw - bandwidth in Hz (k-rate)\n    ; inumlayer - number of layers\n    ; iscl - scaling flag\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; Pulse wave\n    aPulse vco2 kAmp, 110, 10, 0.4\n    \n    ; LFO modulates filter\n    kLFO oscili 300, 3, giSine\n    kCF = 700 + kLFO\n    \n    ; Fixed bandwidth\n    kBW = 50\n    \n    ; 2-layer filter\n    aFiltL resonxk aPulse, kCF, kBW, 2, 2\n    aFiltR resonxk aPulse, kCF*1.02, kBW, 2, 2\n    \n    outs aFiltL, aFiltR\nendin\n\ninstr 2\n    ; Random filter jumps\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; Noise source\n    aNoise noise kAmp*0.25, 0\n    \n    ; Random center frequency\n    kCF randomh 300, 2000, 4\n    \n    ; Random bandwidth\n    kBW randomh 30, 100, 2\n    \n    ; Single layer\n    aFilt resonxk aNoise, kCF, kBW, 1, 2\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Quantized frequency steps\n    kAmp linseg 0, 0.05, 0.3, p3-0.1, 0.3, 0.05, 0\n    \n    ; Sawtooth\n    aSaw vco2 kAmp, 165, 0\n    \n    ; Stepped frequencies (pentatonic scale)\n    kTime timeinsts\n    kStep = int(kTime * 4) % 5\n    kScale[] fillarray 200, 225, 267, 300, 400\n    kCF = kScale[kStep]\n    \n    kBW = 40\n    \n    ; 3-layer filter\n    aFilt resonxk aSaw, kCF, kBW, 3, 2\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play LFO modulation\ni1 0 4\n; Play random jumps\ni2 4.5 4\n; Play quantized steps\ni3 9 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the tbvcf opcode for modeling a TB-303 voltage-controlled filter", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; tbvcf opcode: ares tbvcf asig, xfco, xres, kdist, kasym [, iskip]\n    ; tbvcf models the TB-303 voltage-controlled filter\n    ; asig - input audio signal\n    ; xfco - cutoff frequency in Hz\n    ; xres - resonance (0-1, self-oscillates above ~0.95)\n    ; kdist - distortion amount (0-inf, typically 0-2)\n    ; kasym - asymmetry of distortion (0-1)\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp madsr 0.005, 0.05, 0.4, 0.2\n    \n    ; Classic TB-303 sawtooth\n    aSaw vco2 kAmp*0.3, 82.41, 0\n    \n    ; Fast filter sweep (accent)\n    kCutoff expseg 100, 0.05, 2000, 0.15, 300, p3-0.2, 150\n    \n    ; High resonance for squelchy sound\n    kRes = 0.85\n    \n    ; Moderate distortion\n    kDist = 0.5\n    \n    ; Slight asymmetry\n    kAsym = 0.3\n    \n    ; Apply TB-303 filter\n    aFilt tbvcf aSaw, kCutoff, kRes, kDist, kAsym\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; Classic acid bassline pattern\n    kAmp madsr 0.003, 0.03, 0.3, 0.15\n    \n    ; Get note frequency from score\n    iFreq = p4\n    iAccent = p5\n    \n    ; Sawtooth oscillator\n    aSaw vco2 kAmp*0.3, iFreq, 0\n    \n    ; Filter envelope depends on accent\n    iCutStart = (iAccent > 0) ? 150 : 100\n    iCutPeak = (iAccent > 0) ? 3000 : 1500\n    iCutEnd = (iAccent > 0) ? 400 : 200\n    \n    kCutoff expseg iCutStart, 0.04, iCutPeak, 0.12, iCutEnd, p3-0.16, iCutStart\n    \n    ; Resonance\n    kRes = 0.88\n    \n    ; Distortion\n    kDist = 0.4\n    kAsym = 0.2\n    \n    aFilt tbvcf aSaw, kCutoff, kRes, kDist, kAsym\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Self-oscillation demonstration\n    kAmp linseg 0, 0.1, 0.2, p3-0.2, 0.2, 0.1, 0\n    \n    ; Low-level noise input\n    aNoise noise 0.01, 0\n    \n    ; Sweep cutoff for self-oscillation pitch\n    kCutoff linseg 200, p3, 1000\n    \n    ; Very high resonance (self-oscillates)\n    kRes = 0.98\n    \n    ; No distortion for pure tone\n    kDist = 0\n    kAsym = 0\n    \n    aFilt tbvcf aNoise, kCutoff, kRes, kDist, kAsym\n    \n    outs aFilt*kAmp, aFilt*kAmp\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play accented note\ni1 0 1.5\n\n; Acid bassline pattern (freq, accent)\n; Note: p4=frequency, p5=accent(0 or 1)\ni2 2    0.5  82.41  1   ; C accented\ni2 2.5  0.25 82.41  0   ; C\ni2 2.75 0.25 110.00 0   ; A\ni2 3    0.5  146.83 1   ; D accented\ni2 3.5  0.5  110.00 0   ; A\ni2 4    0.5  82.41  1   ; C accented\ni2 4.5  0.5  73.42  0   ; D\ni2 5    1.0  65.41  1   ; C accented\n\n; Self-oscillation\ni3 6.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
