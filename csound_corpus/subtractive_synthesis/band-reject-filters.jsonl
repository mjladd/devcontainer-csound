{"instruction": "Write a CSound instrument that demonstrates the butbr opcode for second-order Butterworth band-reject filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; butbr opcode: ares butbr asig, kfreq, kband [, iskip]\n    ; butbr is a second-order Butterworth band-reject (notch) filter\n    ; asig - input audio signal\n    ; kfreq - center frequency to reject (in Hz)\n    ; kband - bandwidth of rejection (in Hz)\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate signal with multiple harmonics\n    aSig1 poscil kAmp*0.3, 220, giSine\n    aSig2 poscil kAmp*0.25, 440, giSine\n    aSig3 poscil kAmp*0.2, 660, giSine\n    aSig4 poscil kAmp*0.15, 880, giSine\n    aMix = aSig1 + aSig2 + aSig3 + aSig4\n    \n    ; Notch out 440 Hz (remove second harmonic)\n    kNotchFreq = 440\n    kBW = 20\n    \n    ; Apply band-reject filter\n    aFilt butbr aMix, kNotchFreq, kBW\n    \n    out aFilt\nendin\n\ninstr 2\n    ; Remove specific frequency from noise\n    kAmp madsr 0.01, 0.1, 0.7, 0.3\n    \n    ; Generate white noise\n    aNoise noise kAmp*0.4, 0\n    \n    ; Sweep notch frequency\n    kNotchFreq expseg 200, p3, 2000\n    \n    ; Narrow notch\n    kBW = 30\n    \n    ; Apply notch filter\n    aFilt butbr aNoise, kNotchFreq, kBW\n    \n    out aFilt\nendin\n\ninstr 3\n    ; Multiple notch filters for comb-like effect\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; Bright sawtooth\n    aSaw vco2 kAmp, 165, 0\n    \n    ; Apply multiple notches at harmonic intervals\n    kBase = 550\n    kBW = 40\n    \n    ; First notch\n    aFilt butbr aSaw, kBase, kBW\n    ; Second notch\n    aFilt butbr aFilt, kBase*2, kBW\n    ; Third notch\n    aFilt butbr aFilt, kBase*3, kBW\n    \n    out aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play harmonic removal\ni1 0 3\n; Play sweeping notch on noise\ni2 3.5 4\n; Play multiple notches\ni3 8 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the butbr opcode for removing hum and unwanted resonances", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; butbr opcode: ares butbr asig, kfreq, kband [, iskip]\n    ; Remove 60 Hz hum and harmonics\n    ; asig - input audio signal\n    ; kfreq - center frequency to reject\n    ; kband - bandwidth of rejection\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; Generate \"contaminated\" signal with 60 Hz hum\n    aSignal vco2 kAmp*0.3, 440, 0\n    aHum poscil kAmp*0.15, 60, 1\n    aHum2 poscil kAmp*0.08, 120, 1\n    aMix = aSignal + aHum + aHum2\n    \n    ; Remove 60 Hz hum\n    aFilt butbr aMix, 60, 5\n    ; Remove 120 Hz harmonic\n    aFilt butbr aFilt, 120, 5\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; Notch filter for feedback suppression\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; Complex signal\n    aSaw vco2 kAmp*0.2, 220, 0\n    aSq vco2 kAmp*0.2, 220.5, 2\n    aMix = aSaw + aSq\n    \n    ; Suppress potential feedback frequency\n    kFeedbackFreq = 1200\n    kBW = 50\n    \n    aFilt butbr aMix, kFeedbackFreq, kBW\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Phaser-like effect using moving notches\n    kAmp linseg 0, 0.1, 0.35, p3-0.2, 0.35, 0.1, 0\n    \n    ; Rich source\n    aSaw vco2 kAmp, 330, 0\n    \n    ; LFO controls notch positions\n    kLFO oscili 800, 0.3, 1\n    kNotch1 = 500 + kLFO\n    kNotch2 = 1200 + kLFO*1.5\n    \n    kBW = 100\n    \n    ; Apply moving notches\n    aFilt butbr aSaw, kNotch1, kBW\n    aFilt butbr aFilt, kNotch2, kBW\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Sine wave for oscillators\nf1 0 8192 10 1\n\n; Play hum removal\ni1 0 3\n; Play feedback suppression\ni2 3.5 3\n; Play phaser effect\ni3 7 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the areson opcode for second-order band-reject filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; areson opcode: ares areson asig, kcf, kbw [, iscl] [, iskip]\n    ; areson is a second-order band-reject (notch) filter\n    ; asig - input audio signal\n    ; kcf - center frequency to reject (in Hz)\n    ; kbw - bandwidth in Hz\n    ; iscl - scaling flag (optional)\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate harmonic series\n    aSig1 poscil kAmp*0.25, 200, giSine\n    aSig2 poscil kAmp*0.2, 400, giSine\n    aSig3 poscil kAmp*0.15, 600, giSine\n    aSig4 poscil kAmp*0.12, 800, giSine\n    aSig5 poscil kAmp*0.1, 1000, giSine\n    aMix = aSig1 + aSig2 + aSig3 + aSig4 + aSig5\n    \n    ; Notch out 600 Hz\n    kNotchFreq = 600\n    kBW = 25\n    \n    ; Apply areson filter\n    aFilt areson aMix, kNotchFreq, kBW\n    \n    out aFilt\nendin\n\ninstr 2\n    ; Sweep notch through spectrum\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; Bright sawtooth source\n    aSaw vco2 kAmp*0.35, 220, 0\n    \n    ; Sweep notch frequency\n    kNotchFreq linseg 300, p3*0.5, 2000, p3*0.5, 400\n    \n    ; Narrow bandwidth for pronounced effect\n    kBW = 30\n    \n    ; Apply notch filter\n    aFilt areson aSaw, kNotchFreq, kBW\n    \n    out aFilt\nendin\n\ninstr 3\n    ; Create formant-removal effect\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; Buzz source (voice-like)\n    aBuzz buzz kAmp*0.3, 150, 20, 1\n    \n    ; Remove formant regions to create \"anti-vowel\"\n    kNotch1 = 730   ; Remove \"ah\" first formant\n    kNotch2 = 1090  ; Remove \"ah\" second formant\n    kBW = 80\n    \n    ; Apply multiple notches\n    aFilt areson aBuzz, kNotch1, kBW\n    aFilt areson aFilt, kNotch2, kBW\n    \n    out aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Cosine for buzz\nf1 0 8192 11 1\n\n; Play harmonic removal\ni1 0 3\n; Play sweeping notch\ni2 3.5 4\n; Play formant removal\ni3 8 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the areson opcode for creating comb-filter effects", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; areson opcode: ares areson asig, kcf, kbw [, iscl] [, iskip]\n    ; Create comb-like filtering with multiple notches\n    ; asig - input audio signal\n    ; kcf - center frequency to reject\n    ; kbw - bandwidth\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; Generate noise\n    aNoise noise kAmp, 0\n    \n    ; Create harmonic series of notches\n    kBase = 200\n    kBW = 20\n    \n    ; Apply multiple notches at harmonic intervals\n    aFilt = aNoise\n    iNotch = 1\n    while iNotch <= 8 do\n        aFilt areson aFilt, kBase*iNotch, kBW\n        iNotch += 1\n    od\n    \n    outs aFilt*2, aFilt*2\nendin\n\ninstr 2\n    ; Dynamic comb filter with variable spacing\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; Square wave source\n    aSq vco2 kAmp*0.25, 165, 2\n    \n    ; Variable notch spacing\n    kSpacing linseg 150, p3, 400\n    kBW = 30\n    \n    ; Apply 6 notches with variable spacing\n    aFilt = aSq\n    iNotch = 1\n    while iNotch <= 6 do\n        aFilt areson aFilt, kSpacing*iNotch, kBW\n        iNotch += 1\n    od\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Metallic/robotic effect\n    kAmp linseg 0, 0.05, 0.35, p3-0.1, 0.35, 0.05, 0\n    \n    ; Voice-like buzz\n    aBuzz buzz kAmp*0.3, 180, 25, giSine\n    \n    ; Inharmonic notch series for metallic timbre\n    kNotches[] fillarray 317, 689, 1123, 1847, 2456\n    kBW = 50\n    \n    ; Apply each notch\n    aFilt = aBuzz\n    iCount = 0\n    while iCount < lenarray(kNotches) do\n        aFilt areson aFilt, kNotches[iCount], kBW\n        iCount += 1\n    od\n    \n    outs aFilt, aFilt\nendin\n\ninstr 4\n    ; Phasing/flanging effect with moving notches\n    kAmp madsr 0.01, 0.15, 0.5, 0.4\n    \n    ; Rich sawtooth\n    aSaw vco2 kAmp*0.25, 220, 0\n    \n    ; LFO modulates notch positions\n    kLFO oscili 300, 0.4, giSine\n    \n    kBW = 40\n    \n    ; Multiple notches move together\n    aFilt = aSaw\n    iNotch = 1\n    while iNotch <= 5 do\n        kNotchFreq = 400*iNotch + kLFO\n        aFilt areson aFilt, kNotchFreq, kBW\n        iNotch += 1\n    od\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play harmonic comb filter\ni1 0 4\n; Play variable spacing\ni2 4.5 4\n; Play metallic effect\ni3 9 3\n; Play phasing effect\ni4 12.5 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates using butbr for precise frequency notching in subtractive synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sawtooth\ngiSaw ftgen 1, 0, 8192, 10, 1, 0.5, 0.333, 0.25, 0.2, 0.166, 0.142, 0.125\n\ninstr 1\n    ; butbr opcode: ares butbr asig, kfreq, kband [, iskip]\n    ; Sculpt timbre by removing specific frequency ranges\n    ; asig - input audio signal\n    ; kfreq - center frequency to reject\n    ; kband - bandwidth\n    \n    ; Amplitude envelope\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    ; Detuned sawtooth oscillators\n    aSaw1 poscil kAmp*0.2, 110, giSaw\n    aSaw2 poscil kAmp*0.2, 110.5, giSaw\n    aMix = aSaw1 + aSaw2\n    \n    ; Remove specific harmonics to create unique timbre\n    ; Remove 3rd harmonic region\n    aFilt butbr aMix, 330, 40\n    ; Remove 7th harmonic region\n    aFilt butbr aFilt, 770, 50\n    \n    ; Apply low-pass to smooth\n    aFilt tone aFilt, 2000\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; Hollowed-out bass sound\n    kAmp madsr 0.005, 0.08, 0.5, 0.25\n    \n    ; Low frequency sawtooth\n    aSaw vco2 kAmp*0.35, 55, 0\n    \n    ; Remove mid-range to create \"scooped\" bass\n    aFilt butbr aSaw, 350, 200\n    aFilt butbr aFilt, 800, 250\n    \n    ; Boost highs with resonant filter\n    aRes reson aFilt, 2500, 200, 2\n    aRes balance aRes, aFilt\n    \n    aMix = aFilt + aRes*0.3\n    \n    outs aMix, aMix\nendin\n\ninstr 3\n    ; Nasal/telephone quality by removing frequencies\n    kAmp linseg 0, 0.05, 0.35, p3-0.1, 0.35, 0.05, 0\n    \n    ; Buzz source\n    aBuzz buzz kAmp*0.3, 150, 30, 1\n    \n    ; Remove very low and very high, keep mid\n    ; This creates telephone-like bandpass effect via notches\n    aFilt butbr aBuzz, 100, 80   ; Remove lows\n    aFilt butbr aFilt, 3500, 1000 ; Remove highs\n    \n    outs aFilt, aFilt\nendin\n\ninstr 4\n    ; Animated timbre with moving notches\n    kAmp madsr 0.02, 0.15, 0.55, 0.35\n    \n    ; Complex waveform\n    aSaw vco2 kAmp*0.15, 220, 0\n    aSq vco2 kAmp*0.15, 220.3, 2\n    aMix = aSaw + aSq\n    \n    ; Two independent LFOs control notch positions\n    kLFO1 oscili 500, 0.3, 1\n    kLFO2 oscili 700, 0.47, 1\n    \n    kNotch1 = 600 + kLFO1\n    kNotch2 = 1400 + kLFO2\n    \n    aFilt butbr aMix, kNotch1, 60\n    aFilt butbr aFilt, kNotch2, 80\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Cosine for buzz\nf1 0 8192 11 1\n\n; Play harmonic sculpting\ni1 0 3\ni1 1 3\ni1 2 3\n\n; Play scooped bass\ni2 5 2.5\ni2 6 2.5\n\n; Play telephone effect\ni3 9 3\n\n; Play animated notches\ni4 12.5 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
