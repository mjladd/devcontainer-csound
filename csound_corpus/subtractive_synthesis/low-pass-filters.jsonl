{"instruction": "Write a CSound instrument that demonstrates the tone opcode for first-order recursive low-pass filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table: sawtooth wave\ngiSaw ftgen 1, 0, 8192, 10, 1, 0.5, 0.333, 0.25, 0.2, 0.166, 0.142, 0.125\n\ninstr 1\n    ; tone opcode: ares tone asig, khp [, iskip]\n    ; tone is a first-order recursive low-pass filter\n    ; asig - input audio signal\n    ; khp - half-power point (cutoff frequency in Hz)\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; Generate bright sawtooth wave\n    aSaw poscil kAmp, 220, giSaw\n    \n    ; Sweep cutoff frequency\n    kCutoff expseg 200, p3*0.5, 4000, p3*0.5, 200\n    \n    ; Apply low-pass filter\n    aFilt tone aSaw, kCutoff\n    \n    out aFilt\nendin\n\ninstr 2\n    ; Demonstrate tone for smoothing control signals\n    kAmp madsr 0.01, 0.1, 0.7, 0.3\n    \n    ; Generate noise\n    aNoise rand 0.4\n    \n    ; Apply gentle low-pass filter\n    aFilt tone aNoise, 1000\n    \n    out aFilt * kAmp\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 4 seconds\ni1 0 4\n; Play instrument 2 for 3 seconds\ni2 4.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the tonex opcode for emulating a resistor-capacitor low-pass filter", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: square wave\ngiSquare ftgen 1, 0, 8192, 10, 1, 0, 0.333, 0, 0.2, 0, 0.142, 0, 0.111\n\ninstr 1\n    ; tonex opcode: ares tonex asig, khp, inumlayer [, iskip]\n    ; tonex emulates a resistor-capacitor low-pass filter\n    ; asig - input audio signal\n    ; khp - half-power point (cutoff frequency in Hz)\n    ; inumlayer - number of filter layers (1-4 for different slopes)\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate square wave\n    aSq poscil kAmp, 330, giSquare\n    \n    ; Variable cutoff frequency\n    kCutoff linseg 500, p3, 3000\n    \n    ; Apply tonex with 2 layers for 12dB/octave slope\n    aFilt tonex aSq, kCutoff, 2\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; Compare different filter slopes\n    kAmp madsr 0.02, 0.1, 0.6, 0.3\n    \n    ; Bright source\n    aSaw vco2 kAmp*0.3, 220, 0\n    \n    ; Fixed cutoff\n    kCutoff = 1000\n    \n    ; 4-layer filter for steep rolloff\n    aFilt tonex aSaw, kCutoff, 4\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 3 seconds\ni1 0 3\n; Play instrument 2 for 3 seconds\ni2 3.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the atone opcode for first-order recursive high-pass filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; atone opcode: ares atone asig, khp [, iskip]\n    ; atone is a first-order recursive high-pass filter (complement of tone)\n    ; asig - input audio signal\n    ; khp - half-power point (cutoff frequency in Hz)\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate bass-heavy signal\n    aLow poscil kAmp*0.6, 110, giSine\n    aMid poscil kAmp*0.3, 440, giSine\n    aHigh poscil kAmp*0.1, 1760, giSine\n    aMix = aLow + aMid + aHigh\n    \n    ; Sweep high-pass cutoff\n    kCutoff linseg 50, p3, 800\n    \n    ; Apply high-pass filter\n    aFilt atone aMix, kCutoff\n    \n    out aFilt\nendin\n\ninstr 2\n    ; Remove DC offset and low rumble\n    kAmp madsr 0.01, 0.1, 0.7, 0.3\n    \n    ; Generate signal with DC offset\n    aSaw vco2 kAmp*0.4, 220, 0\n    aSaw = aSaw + 0.1\n    \n    ; Remove DC and low frequencies\n    aClean atone aSaw, 20\n    \n    out aClean\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 4 seconds\ni1 0 4\n; Play instrument 2 for 3 seconds\ni2 4.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the port opcode for portamento (glissando) generation", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\n; Function table: sine wave\ngiSine ftgen 1, 0, 8192, 10, 1\n\ninstr 1\n    ; port opcode: kres port ksig, ihtim [, isig]\n    ; port applies portamento (smooth glide) to a control signal\n    ; ksig - input control signal\n    ; ihtim - half-time of the function (smoothing time)\n    ; isig - initial value (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.05, 0.4, p3-0.1, 0.4, 0.05, 0\n    \n    ; Step-wise frequency changes\n    kFreqRaw init 220\n    kTime timeinsts\n    \n    if kTime > p3*0.25 && kTime < p3*0.25+0.01 then\n        kFreqRaw = 330\n    elseif kTime > p3*0.5 && kTime < p3*0.5+0.01 then\n        kFreqRaw = 440\n    elseif kTime > p3*0.75 && kTime < p3*0.75+0.01 then\n        kFreqRaw = 220\n    endif\n    \n    ; Apply portamento with 0.2 second glide time\n    kFreq port kFreqRaw, 0.2\n    \n    ; Generate tone with smooth frequency transitions\n    aSig poscil kAmp, kFreq, giSine\n    \n    out aSig\nendin\n\ninstr 2\n    ; Demonstrate port for amplitude smoothing\n    kAmp madsr 0.01, 0.1, 0.7, 0.3\n    \n    ; Random amplitude jumps\n    kRandAmp randomh 0.2, 0.5, 3\n    \n    ; Smooth the amplitude changes\n    kSmoothAmp port kRandAmp, 0.1\n    \n    aSig poscil kAmp*kSmoothAmp, 440, giSine\n    \n    out aSig\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 4 seconds\ni1 0 4\n; Play instrument 2 for 4 seconds\ni2 4.5 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the butlp opcode for second-order Butterworth low-pass filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function table: sawtooth\ngiSaw ftgen 1, 0, 8192, 10, 1, 0.5, 0.333, 0.25, 0.2, 0.166, 0.142, 0.125\n\ninstr 1\n    ; butlp opcode: ares butlp asig, kfreq [, iskip]\n    ; butlp is a second-order Butterworth low-pass filter\n    ; asig - input audio signal\n    ; kfreq - cutoff frequency in Hz\n    ; iskip - skip initialization flag (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate bright sawtooth\n    aSaw poscil kAmp, 220, giSaw\n    \n    ; Sweep cutoff frequency\n    kCutoff expseg 100, p3*0.6, 5000, p3*0.4, 200\n    \n    ; Apply Butterworth low-pass filter\n    aFiltL butlp aSaw, kCutoff\n    aFiltR butlp aSaw, kCutoff*1.01\n    \n    outs aFiltL, aFiltR\nendin\n\ninstr 2\n    ; Classic synth bass with resonant filter sweep\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    ; Dual oscillator bass\n    aSaw1 vco2 kAmp*0.3, 55, 0\n    aSaw2 vco2 kAmp*0.3, 55.5, 0\n    aMix = aSaw1 + aSaw2\n    \n    ; Envelope-controlled filter\n    kFiltEnv linseg 200, 0.05, 2000, p3-0.05, 200\n    \n    aFilt butlp aMix, kFiltEnv\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play instrument 1 for 4 seconds\ni1 0 4\n; Play instrument 2 for 3 seconds\ni2 4.5 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the lpf18 opcode for 18dB/octave low-pass filtering with resonance", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; lpf18 opcode: ares lpf18 asig, kfco, kres, kdist\n    ; lpf18 is an 18dB/octave low-pass filter with resonance and distortion\n    ; asig - input audio signal\n    ; kfco - cutoff frequency in Hz\n    ; kres - resonance (0-1, self-oscillates at higher values)\n    ; kdist - distortion amount (0-2)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.05, 0.3, p3-0.1, 0.3, 0.05, 0\n    \n    ; Generate sawtooth wave\n    aSaw vco2 kAmp, 110, 0\n    \n    ; Sweep cutoff with envelope\n    kCutoff expseg 200, 0.1, 4000, p3-0.1, 300\n    \n    ; Moderate resonance\n    kRes = 0.7\n    \n    ; Light distortion\n    kDist = 0.3\n    \n    ; Apply lpf18 filter\n    aFilt lpf18 aSaw, kCutoff, kRes, kDist\n    \n    outs aFilt, aFilt\nendin\n\ninstr 2\n    ; Acid bass with high resonance\n    kAmp madsr 0.005, 0.05, 0.4, 0.2\n    \n    ; Sawtooth oscillator\n    aSaw vco2 kAmp*0.4, 82.41, 0\n    \n    ; Fast filter sweep\n    kCutoff expseg 100, 0.05, 3000, 0.2, 200, p3-0.25, 150\n    \n    ; High resonance for squelchy sound\n    kRes = 0.85\n    \n    ; Some distortion\n    kDist = 0.5\n    \n    aFilt lpf18 aSaw, kCutoff, kRes, kDist\n    \n    outs aFilt*0.7, aFilt*0.7\nendin\n\ninstr 3\n    ; Self-oscillation demonstration\n    kAmp linseg 0, 0.1, 0.2, p3-0.2, 0.2, 0.1, 0\n    \n    ; Low amplitude input (filter will self-oscillate)\n    aNoise noise 0.01, 0\n    \n    ; Varying cutoff\n    kCutoff linseg 200, p3, 2000\n    \n    ; Very high resonance (near self-oscillation)\n    kRes = 0.95\n    \n    aFilt lpf18 aNoise, kCutoff, kRes, 0\n    \n    outs aFilt*kAmp, aFilt*kAmp\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play filter sweep\ni1 0 3\n; Play acid bass\ni2 3.5 2.5\n; Play self-oscillation\ni3 6.5 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the moogladder opcode for Moog ladder filter emulation", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; moogladder opcode: asig moogladder ain, kcf, kres [, istor]\n    ; moogladder is an improved implementation of the Moog ladder filter\n    ; ain - input audio signal\n    ; kcf - cutoff frequency in Hz\n    ; kres - resonance (0-1)\n    ; istor - skip initialization (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; Generate bright sawtooth\n    aSaw vco2 kAmp, 220, 0\n    \n    ; Classic filter sweep\n    kCutoff expseg 150, p3*0.3, 3000, p3*0.7, 200\n    \n    ; Resonance\n    kRes = 0.75\n    \n    ; Apply Moog ladder filter\n    aFiltL moogladder aSaw, kCutoff, kRes\n    aFiltR moogladder aSaw, kCutoff*1.005, kRes\n    \n    outs aFiltL, aFiltR\nendin\n\ninstr 2\n    ; Classic Moog bass sound\n    kAmp madsr 0.01, 0.05, 0.5, 0.3\n    \n    ; Dual detuned oscillators\n    aSaw1 vco2 kAmp*0.25, 55, 0\n    aSaw2 vco2 kAmp*0.25, 55.2, 0\n    aMix = aSaw1 + aSaw2\n    \n    ; Envelope-controlled filter\n    kFiltEnv expseg 200, 0.1, 2500, p3-0.1, 150\n    \n    ; Medium-high resonance\n    kRes = 0.8\n    \n    aFilt moogladder aMix, kFiltEnv, kRes\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Lead sound with vibrato\n    kAmp madsr 0.02, 0.2, 0.6, 0.4\n    \n    ; Vibrato\n    kVib oscili 3, 5, 1\n    kFreq = 440 + kVib\n    \n    ; Square and sawtooth mix\n    aSq vco2 kAmp*0.2, kFreq, 2\n    aSaw vco2 kAmp*0.2, kFreq, 0\n    aMix = aSq + aSaw\n    \n    ; Moderate filter setting\n    kCutoff = 1800\n    kRes = 0.6\n    \n    aFilt moogladder aMix, kCutoff, kRes\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play filter sweep\ni1 0 4\n; Play bass\ni2 4.5 3\n; Play lead\ni3 8 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the moogvcf opcode for Moog voltage-controlled filter", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\ninstr 1\n    ; moogvcf opcode: ares moogvcf asig, xfco, xres [, iscale, iskip]\n    ; moogvcf is a digital implementation of the Moog VCF\n    ; asig - input audio signal\n    ; xfco - cutoff frequency in Hz\n    ; xres - resonance (0-1, typically 0-0.9)\n    ; iscale - scaling factor (optional)\n    ; iskip - skip initialization (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.05, 0.3, p3-0.1, 0.3, 0.05, 0\n    \n    ; Generate pulse wave\n    aPulse vco2 kAmp, 165, 10, 0.5\n    \n    ; LFO-modulated cutoff\n    kLFO oscili 800, 0.5, 1\n    kCutoff = 1000 + kLFO\n    \n    ; Resonance\n    kRes = 0.7\n    \n    ; Apply moogvcf\n    aFilt moogvcf aPulse, kCutoff, kRes\n    \n    out aFilt\nendin\n\ninstr 2\n    ; Sweeping resonance\n    kAmp madsr 0.01, 0.1, 0.6, 0.3\n    \n    ; Bright sawtooth\n    aSaw vco2 kAmp*0.3, 110, 0\n    \n    ; Fixed cutoff\n    kCutoff = 1500\n    \n    ; Sweep resonance\n    kRes linseg 0.1, p3*0.5, 0.85, p3*0.5, 0.2\n    \n    aFilt moogvcf aSaw, kCutoff, kRes\n    \n    out aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Sine wave for LFO\nf1 0 8192 10 1\n\n; Play LFO-modulated filter\ni1 0 4\n; Play resonance sweep\ni2 4.5 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the moogvcf2 opcode for improved Moog voltage-controlled filter", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; moogvcf2 opcode: ares moogvcf2 asig, xfco, xres [, iscale, iskip]\n    ; moogvcf2 is an improved version with better stability\n    ; asig - input audio signal\n    ; xfco - cutoff frequency in Hz\n    ; xres - resonance (0-1)\n    ; iscale - scaling factor (optional)\n    ; iskip - skip initialization (optional)\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; Generate sawtooth with slight detuning\n    aSaw1 vco2 kAmp, 220, 0\n    aSaw2 vco2 kAmp, 220.5, 0\n    aMix = (aSaw1 + aSaw2) * 0.5\n    \n    ; Exponential filter sweep\n    kCutoff expseg 180, p3*0.4, 4000, p3*0.6, 250\n    \n    ; High resonance\n    kRes = 0.82\n    \n    ; Apply improved Moog filter\n    aFiltL moogvcf2 aMix, kCutoff, kRes\n    aFiltR moogvcf2 aMix, kCutoff*1.01, kRes\n    \n    outs aFiltL, aFiltR\nendin\n\ninstr 2\n    ; Percussive bass with fast envelope\n    kAmp expseg 0.4, 0.02, 0.35, p3-0.02, 0.001\n    \n    ; Low frequency oscillator\n    aSaw vco2 kAmp, 65, 0\n    \n    ; Fast filter decay\n    kCutoff expseg 100, 0.03, 3000, p3-0.03, 100\n    \n    ; Very high resonance\n    kRes = 0.88\n    \n    aFilt moogvcf2 aSaw, kCutoff, kRes\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Pad sound with slow modulation\n    kAmp madsr 0.3, 0.5, 0.6, 0.8\n    \n    ; Mix of waveforms\n    aSaw vco2 kAmp*0.15, 110, 0\n    aSq vco2 kAmp*0.15, 110.3, 2\n    aTri vco2 kAmp*0.15, 55, 4\n    aMix = aSaw + aSq + aTri\n    \n    ; Slow filter LFO\n    kLFO oscili 600, 0.3, 1\n    kCutoff = 800 + kLFO\n    \n    kRes = 0.65\n    \n    aFilt moogvcf2 aMix, kCutoff, kRes\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Sine wave for LFO\nf1 0 8192 10 1\n\n; Play filter sweep\ni1 0 4\n; Play percussive bass\ni2 4.5 2\n; Play pad sound\ni3 7 5\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the lpform opcode for formant filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 1\n0dbfs = 1\n\ninstr 1\n    ; lpform opcode: ares lpform asig, kfiltq, kfco\n    ; lpform implements a formant filter\n    ; asig - input audio signal\n    ; kfiltq - Q factor (bandwidth)\n    ; kfco - center frequency in Hz\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.05, 0.3, p3-0.1, 0.3, 0.05, 0\n    \n    ; Generate sawtooth source\n    aSaw vco2 kAmp, 110, 0\n    \n    ; Sweep formant frequency\n    kFormant linseg 400, p3*0.5, 2000, p3*0.5, 600\n    \n    ; Q factor (lower = wider bandwidth)\n    kQ = 50\n    \n    ; Apply formant filter\n    aFilt lpform aSaw, kQ, kFormant\n    \n    out aFilt\nendin\n\ninstr 2\n    ; Vowel-like sounds\n    kAmp madsr 0.02, 0.1, 0.7, 0.3\n    \n    ; Buzz as source\n    aBuzz buzz kAmp*0.3, 220, 20, 1\n    \n    ; Two formants for vowel simulation\n    ; First formant (low)\n    kF1 = 730  ; \"a\" vowel approximation\n    aFilt1 lpform aBuzz, 40, kF1\n    \n    ; Second formant (high)\n    kF2 = 1090\n    aFilt2 lpform aBuzz, 40, kF2\n    \n    ; Mix formants\n    aMix = aFilt1 + aFilt2*0.7\n    \n    out aMix * 0.5\nendin\n\ninstr 3\n    ; Morphing between vowels\n    kAmp linseg 0, 0.1, 0.3, p3-0.2, 0.3, 0.1, 0\n    \n    ; Source\n    aSaw vco2 kAmp, 165, 0\n    \n    ; Morph from \"ee\" to \"oo\" formants\n    kF1 linseg 270, p3, 300   ; First formant\n    kF2 linseg 2300, p3, 870  ; Second formant\n    \n    ; Apply formants\n    aF1 lpform aSaw, 30, kF1\n    aF2 lpform aSaw, 40, kF2\n    \n    aMix = aF1 + aF2*0.6\n    \n    out aMix * 0.5\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Cosine for buzz\nf1 0 8192 11 1\n\n; Play formant sweep\ni1 0 3\n; Play static vowel\ni2 3.5 2.5\n; Play morphing vowels\ni3 6.5 4\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates the lpf opcode for general low-pass filtering", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ninstr 1\n    ; lpf opcode: ares lpf asig, kfreq\n    ; lpf is a general low-pass filter\n    ; asig - input audio signal\n    ; kfreq - cutoff frequency in Hz\n    \n    ; Amplitude envelope\n    kAmp linseg 0, 0.1, 0.4, p3-0.2, 0.4, 0.1, 0\n    \n    ; Generate bright signal\n    aSaw vco2 kAmp, 220, 0\n    \n    ; Cutoff frequency sweep\n    kCutoff expseg 200, p3*0.5, 5000, p3*0.5, 300\n    \n    ; Apply low-pass filter\n    aFiltL lpf aSaw, kCutoff\n    aFiltR lpf aSaw, kCutoff*1.02\n    \n    outs aFiltL, aFiltR\nendin\n\ninstr 2\n    ; Smooth noise with lpf\n    kAmp madsr 0.01, 0.2, 0.6, 0.4\n    \n    ; White noise source\n    aNoise noise kAmp*0.4, 0\n    \n    ; Variable filter cutoff\n    kCutoff linseg 500, p3*0.3, 3000, p3*0.7, 800\n    \n    ; Filter the noise\n    aFilt lpf aNoise, kCutoff\n    \n    outs aFilt, aFilt\nendin\n\ninstr 3\n    ; Multi-stage filtering\n    kAmp linseg 0, 0.1, 0.35, p3-0.2, 0.35, 0.1, 0\n    \n    ; Square wave\n    aSq vco2 kAmp, 165, 2\n    \n    ; Fixed cutoff\n    kCutoff = 1200\n    \n    ; Apply filter multiple times for steeper rolloff\n    aFilt lpf aSq, kCutoff\n    aFilt lpf aFilt, kCutoff\n    aFilt lpf aFilt, kCutoff\n    \n    outs aFilt, aFilt\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play filter sweep\ni1 0 4\n; Play filtered noise\ni2 4.5 3\n; Play multi-stage filtering\ni3 8 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
