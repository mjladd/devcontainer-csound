{"instruction": "Write a CSound instrument that demonstrates basic scanned synthesis", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Function tables for scanned synthesis\n; Mass table\ngiMass ftgen 1, 0, 128, -7, 1, 128, 1\n\n; Spring stiffness table  \ngiStiff ftgen 2, 0, 128, -7, 0.5, 128, 0.5\n\n; Damping table\ngiDamp ftgen 3, 0, 128, -7, 0.01, 128, 0.01\n\n; Initial position\ngiInit ftgen 4, 0, 128, 7, 0, 64, 0, 0, 1, 0, 64, 0\n\n; Trajectory table (will be updated)\ngiTraj ftgen 5, 0, 128, 7, 0, 128, 0\n\ninstr 1\n    ; scans opcode: scans kamp, kfreq, ifn, id [, iorder]\n    ; scans reads from scanned synthesis wavetable\n    ; kamp - amplitude\n    ; kfreq - frequency\n    ; ifn - trajectory table\n    ; id - scantable ID from scantable opcode\n    \n    ; First need to define the physical model with scantable\n    ; This is typically done in header or separate instrument\n    \n    iAmp = 0.5\n    iFreq = p4\n    \n    ; Read scanned wavetable\n    aOut scans iAmp, iFreq, giTraj, 1\n    \n    outs aOut, aOut\nendin\n\ninstr 2\n    ; scan opcode: scan kamp, kfreq, ifn, id, ivl, ivr [, ikl] [, ikr] [, kscan] [, iorder] [, imass] [, istiff] [, idamp] [, ivel]\n    ; scan performs scanned synthesis\n    ; kamp - amplitude\n    ; kfreq - scanning frequency\n    ; ifn - initial position table\n    ; id - scantable ID\n    ; ivl, ivr - initial velocity left and right\n    ; ikl, ikr - stiffness left and right\n    \n    iAmp = 0.5\n    iFreq = p4\n    iID = 1\n    iVelL = 0.5\n    iVelR = 0.5\n    iStiffL = 1\n    iStiffR = 1\n    \n    ; Perform scanning\n    aOut scan iAmp, iFreq, giInit, iID, iVelL, iVelR, iStiffL, iStiffR\n    \n    outs aOut, aOut\nendin\n\ninstr 3\n    ; scantable opcode: scantable insrc, ifn [, iorder] [, iperiod]\n    ; scantable creates a scanned synthesis wavetable\n    ; insrc - source instrument number\n    ; ifn - function table number\n    ; iorder - interpolation order\n    ; iperiod - scanning period\n    \n    ; This is usually called in the header\n    ; scantable 10, giTraj, 2, 0.1\n    \n    iAmp = 0.5\n    iFreq = p4\n    \n    ; Simple scan output\n    aOut scans iAmp, iFreq, giTraj, 1\n    \n    outs aOut, aOut\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Initialize scanned synthesis\n; Note: Full scanned synthesis requires more setup\n; These examples show basic usage\n\n; Play basic scans\ni1 0 3 220\ni1 3.5 3 330\n\n; Play scan\ni2 7.5 3 440\n\n; Play with table\ni3 11.5 3 294\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates scanned synthesis with dynamic control", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Scanned synthesis tables\ngiMass ftgen 1, 0, 64, -7, 1, 64, 1\ngiStiff ftgen 2, 0, 64, -7, 0.3, 64, 0.8\ngiDamp ftgen 3, 0, 64, -7, 0.02, 64, 0.02\ngiInit ftgen 4, 0, 64, 7, 0, 32, 0.5, 32, 0\ngiTraj ftgen 5, 0, 64, 7, 0, 64, 0\n\ninstr 1\n    ; Variable scanning frequency\n    iAmp = 0.4\n    \n    ; Frequency sweep\n    kFreq expseg 110, p3, 880\n    \n    aOut scans iAmp, kFreq, giTraj, 1\n    \n    outs aOut, aOut\nendin\n\ninstr 2\n    ; Modulated amplitude\n    iFreq = p4\n    \n    ; Amplitude modulation\n    kAmp poscil 0.3, 5, 1\n    kAmp = 0.2 + kAmp\n    \n    aOut scans kAmp, iFreq, giTraj, 1\n    \n    outs aOut, aOut\nendin\n\ninstr 3\n    ; Multiple scan points\n    iAmp = 0.3\n    iFreq = p4\n    \n    ; Two scanning frequencies\n    aOut1 scans iAmp, iFreq, giTraj, 1\n    aOut2 scans iAmp, iFreq*1.5, giTraj, 1\n    \n    aMix = aOut1*0.6 + aOut2*0.4\n    \n    outs aMix, aMix\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play sweep\ni1 0 4\n\n; Play modulated\ni2 5 3 330\n\n; Play multiple\ni3 9 3 220\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
{"instruction": "Write a CSound instrument that demonstrates advanced scanned synthesis techniques", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\n; Various mass distributions\ngiMassUniform ftgen 1, 0, 128, -7, 1, 128, 1\ngiMassGradient ftgen 2, 0, 128, -7, 0.5, 128, 1.5\ngiMassRandom ftgen 3, 0, 128, 21, 1, 1\n\n; Stiffness tables\ngiStiffLow ftgen 4, 0, 128, -7, 0.2, 128, 0.2\ngiStiffHigh ftgen 5, 0, 128, -7, 0.8, 128, 0.8\ngiStiffVar ftgen 6, 0, 128, -7, 0.3, 64, 0.8, 64, 0.3\n\n; Damping tables\ngiDampLight ftgen 7, 0, 128, -7, 0.005, 128, 0.005\ngiDampHeavy ftgen 8, 0, 128, -7, 0.05, 128, 0.05\n\n; Initial conditions\ngiInitImpulse ftgen 9, 0, 128, 7, 0, 64, 0, 0, 1, 0, 64, 0\ngiInitSine ftgen 10, 0, 128, 10, 1\ngiInitRamp ftgen 11, 0, 128, 7, 0, 128, 1\n\n; Trajectory storage\ngiTraj1 ftgen 12, 0, 128, 7, 0, 128, 0\ngiTraj2 ftgen 13, 0, 128, 7, 0, 128, 0\n\ninstr 1\n    ; Metallic sound (high stiffness, low damping)\n    iAmp = 0.4\n    iFreq = p4\n    \n    aOut scans iAmp, iFreq, giTraj1, 1\n    \n    outs aOut, aOut\nendin\n\ninstr 2\n    ; Wood-like sound (medium stiffness, medium damping)\n    iAmp = 0.4\n    iFreq = p4\n    \n    aOut scans iAmp, iFreq, giTraj1, 2\n    \n    outs aOut, aOut\nendin\n\ninstr 3\n    ; Changing timbre over time\n    iAmp = 0.4\n    \n    ; Frequency changes\n    kFreq linseg 220, p3, 440\n    \n    aOut scans iAmp, kFreq, giTraj1, 1\n    \n    ; Filter sweep for additional timbral change\n    kCutoff expseg 500, p3, 5000\n    aFilt butterlp aOut, kCutoff\n    \n    outs aFilt, aFilt\nendin\n\ninstr 4\n    ; Stereo scanned synthesis\n    iAmp = 0.35\n    iFreq = p4\n    \n    ; Two different trajectories\n    aLeft scans iAmp, iFreq, giTraj1, 1\n    aRight scans iAmp, iFreq*1.01, giTraj2, 1\n    \n    outs aLeft, aRight\nendin\n\ninstr 5\n    ; Rhythmic scanning\n    iAmp = 0.4\n    iFreq = p4\n    \n    ; Pulsing amplitude\n    kPulse lfo 0.3, 4, 1\n    kAmp = 0.2 + abs(kPulse)\n    \n    aOut scans kAmp, iFreq, giTraj1, 1\n    \n    outs aOut, aOut\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play metallic\ni1 0 3 440\ni1 3.5 3 523\n\n; Play wood-like\ni2 7.5 3 330\n\n; Play changing timbre\ni3 11.5 5 220\n\n; Play stereo\ni4 17.5 3 392\n\n; Play rhythmic\ni5 21.5 4 294\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
