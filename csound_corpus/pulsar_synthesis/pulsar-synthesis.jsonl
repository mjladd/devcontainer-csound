{"instruction": "Write a CSound instrument that demonstrates ATS resynthesis opcodes", "input": "", "output": "<CsoundSynthesizer>\n<CsOptions>\n-odac\n</CsOptions>\n<CsInstruments>\n\nsr = 44100\nkr = 4410\nksmps = 10\nnchnls = 2\n0dbfs = 1\n\ngiSine ftgen 1, 0, 16384, 10, 1\n\n; Note: ATS opcodes work with ATS analysis files\n; These examples show the basic usage patterns\n\ninstr 1\n    ; atsadd opcode: ar atsadd ktimepnt, kfmod, iatsfile, ifn, ipartials [, ipartialoffset, ipartialincr, igatefn]\n    ; atsadd performs additive resynthesis from ATS file\n    ; ktimepnt - time pointer in analysis\n    ; kfmod - frequency multiplier\n    ; iatsfile - ATS file handle\n    ; ifn - sine wave table\n    ; ipartials - number of partials\n    \n    iAmp = 0.5\n    kTime line 0, p3, p3\n    kFreqMod = 1\n    iATSfile = 1  ; Would reference actual ATS file\n    iPartials = 30\n    \n    ; Additive resynthesis\n    ; aOut atsadd kTime, kFreqMod, iATSfile, giSine, iPartials\n    \n    ; Placeholder for demonstration\n    aOut poscil iAmp, 440, giSine\n    \n    outs aOut*0.5, aOut*0.5\nendin\n\ninstr 2\n    ; atsaddnz opcode: ar atsaddnz ktimepnt, iatsfile, ibands [, ibandoffset, ibandincr]\n    ; atsaddnz adds noise bands from ATS analysis\n    ; ktimepnt - time pointer\n    ; iatsfile - ATS file\n    ; ibands - number of noise bands\n    \n    kTime line 0, p3, p3\n    iATSfile = 1\n    iBands = 25\n    \n    ; Noise component resynthesis\n    ; aOut atsaddnz kTime, iATSfile, iBands\n    \n    ; Placeholder\n    aOut noise 0.3, 0\n    aOut butterlp aOut, 2000\n    \n    outs aOut, aOut\nendin\n\ninstr 3\n    ; atscross opcode: ar atscross ktimepnt, kfmod, iatsfile, ifn, kmylev, kbuflev, ipartials [, ipartialoffset, ipartialincr]\n    ; atscross performs cross-synthesis\n    ; kmylev - level of synthesis\n    ; kbuflev - level of buffer\n    \n    kTime line 0, p3, p3\n    kFreqMod = 1\n    iATSfile = 1\n    iPartials = 30\n    kSynthLev = 0.7\n    kBufLev = 0.3\n    \n    ; Cross-synthesis\n    ; aOut atscross kTime, kFreqMod, iATSfile, giSine, kSynthLev, kBufLev, iPartials\n    \n    ; Placeholder\n    aOut poscil 0.4, 440, giSine\n    \n    outs aOut, aOut\nendin\n\ninstr 4\n    ; atssinnoi opcode: ar atssinnoi ktimepnt, ksinlev, knzlev, kfmod, iatsfile, ifn, ipartials [, ipartialoffset, ipartialincr]\n    ; atssinnoi combines deterministic and stochastic components\n    ; ksinlev - sine level\n    ; knzlev - noise level\n    \n    kTime line 0, p3, p3\n    kSineLev = 0.7\n    kNoiseLev = 0.3\n    kFreqMod = 1\n    iATSfile = 1\n    iPartials = 30\n    \n    ; Combined resynthesis\n    ; aOut atssinnoi kTime, kSineLev, kNoiseLev, kFreqMod, iATSfile, giSine, iPartials\n    \n    ; Placeholder\n    aSine poscil 0.35, 440, giSine\n    aNoise noise 0.15, 0\n    aNoise butterlp aNoise, 2000\n    aOut = aSine + aNoise\n    \n    outs aOut, aOut\nendin\n\n</CsInstruments>\n<CsScore>\n\n; Play additive resynthesis\ni1 0 3\n\n; Play noise resynthesis\ni2 4 3\n\n; Play cross-synthesis\ni3 8 3\n\n; Play combined resynthesis\ni4 12 3\n\ne\n</CsScore>\n</CsoundSynthesizer>"}
